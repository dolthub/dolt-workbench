diff --git a/sdk.mjs b/sdk.mjs
index 43adc6f79a93910449d584b79724c3fa814785af..33fea99f6bc5da96622fc38d917b7128c2ad2b09 100755
--- a/sdk.mjs
+++ b/sdk.mjs
@@ -12,11 +12,11 @@ var $K=Object.create;var{getPrototypeOf:YK,defineProperty:Y9,getOwnPropertyNames
               || ${G} === "boolean" || ${W} === null`).assign(H,m._`[${W}]`)}}}function QD({gen:X,parentData:Q,parentDataProperty:$},Y){X.if(m._`${Q} !== undefined`,()=>X.assign(m._`${Q}[${$}]`,Y))}function VY(X,Q,$,Y=l6.Correct){let W=Y===l6.Correct?m.operators.EQ:m.operators.NEQ,J;switch(X){case"null":return m._`${Q} ${W} null`;case"array":J=m._`Array.isArray(${Q})`;break;case"object":J=m._`${Q} && typeof ${Q} == "object" && !Array.isArray(${Q})`;break;case"integer":J=G(m._`!(${Q} % 1) && !isNaN(${Q})`);break;case"number":J=G();break;default:return m._`typeof ${Q} ${W} ${X}`}return Y===l6.Correct?J:(0,m.not)(J);function G(H=m.nil){return(0,m.and)(m._`typeof ${Q} == "number"`,H,$?m._`isFinite(${Q})`:m.nil)}}eG.checkDataType=VY;function LY(X,Q,$,Y){if(X.length===1)return VY(X[0],Q,$,Y);let W,J=(0,tG.toHash)(X);if(J.array&&J.object){let G=m._`typeof ${Q} != "object"`;W=J.null?G:m._`!${Q} || ${G}`,delete J.null,delete J.array,delete J.object}else W=m.nil;if(J.number)delete J.integer;for(let G in J)W=(0,m.and)(W,VY(G,Q,$,Y));return W}eG.checkDataTypes=LY;var $D={message:({schema:X})=>`must be ${X}`,params:({schema:X,schemaValue:Q})=>typeof X=="string"?m._`{type: ${X}}`:m._`{type: ${Q}}`};function qY(X){let Q=YD(X);(0,tO.reportError)(Q,$D)}eG.reportTypeError=qY;function YD(X){let{gen:Q,data:$,schema:Y}=X,W=(0,tG.schemaRefOrVal)(X,Y,"type");return{gen:Q,keyword:"type",data:$,schema:Y.type,schemaCode:W,schemaValue:W,parentSchema:Y,params:{},it:X}}});var W3=P(($3)=>{Object.defineProperty($3,"__esModule",{value:!0});$3.assignDefaults=void 0;var m6=c(),KD=e();function UD(X,Q){let{properties:$,items:Y}=X.schema;if(Q==="object"&&$)for(let W in $)Q3(X,W,$[W].default);else if(Q==="array"&&Array.isArray(Y))Y.forEach((W,J)=>Q3(X,J,W.default))}$3.assignDefaults=UD;function Q3(X,Q,$){let{gen:Y,compositeRule:W,data:J,opts:G}=X;if($===void 0)return;let H=m6._`${J}${(0,m6.getProperty)(Q)}`;if(W){(0,KD.checkStrictMode)(X,`default is ignored for: ${H}`);return}let B=m6._`${H} === undefined`;if(G.useDefaults==="empty")B=m6._`${B} || ${H} === null || ${H} === ""`;Y.if(B,m6._`${H} = ${(0,m6.stringify)($)}`)}});var d0=P((H3)=>{Object.defineProperty(H3,"__esModule",{value:!0});H3.validateUnion=H3.validateArray=H3.usePattern=H3.callValidateCode=H3.schemaProperties=H3.allSchemaProperties=H3.noPropertyInData=H3.propertyInData=H3.isOwnProperty=H3.hasPropFunc=H3.reportMissingProp=H3.checkMissingProp=H3.checkReportMissingProp=void 0;var G0=c(),FY=e(),p1=R1(),VD=e();function LD(X,Q){let{gen:$,data:Y,it:W}=X;$.if(OY($,Y,Q,W.opts.ownProperties),()=>{X.setParams({missingProperty:G0._`${Q}`},!0),X.error()})}H3.checkReportMissingProp=LD;function qD({gen:X,data:Q,it:{opts:$}},Y,W){return(0,G0.or)(...Y.map((J)=>(0,G0.and)(OY(X,Q,J,$.ownProperties),G0._`${W} = ${J}`)))}H3.checkMissingProp=qD;function FD(X,Q){X.setParams({missingProperty:Q},!0),X.error()}H3.reportMissingProp=FD;function J3(X){return X.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:G0._`Object.prototype.hasOwnProperty`})}H3.hasPropFunc=J3;function NY(X,Q,$){return G0._`${J3(X)}.call(${Q}, ${$})`}H3.isOwnProperty=NY;function ND(X,Q,$,Y){let W=G0._`${Q}${(0,G0.getProperty)($)} !== undefined`;return Y?G0._`${W} && ${NY(X,Q,$)}`:W}H3.propertyInData=ND;function OY(X,Q,$,Y){let W=G0._`${Q}${(0,G0.getProperty)($)} === undefined`;return Y?(0,G0.or)(W,(0,G0.not)(NY(X,Q,$))):W}H3.noPropertyInData=OY;function G3(X){return X?Object.keys(X).filter((Q)=>Q!=="__proto__"):[]}H3.allSchemaProperties=G3;function OD(X,Q){return G3(Q).filter(($)=>!(0,FY.alwaysValidSchema)(X,Q[$]))}H3.schemaProperties=OD;function DD({schemaCode:X,data:Q,it:{gen:$,topSchemaRef:Y,schemaPath:W,errorPath:J},it:G},H,B,z){let K=z?G0._`${X}, ${Q}, ${Y}${W}`:Q,V=[[p1.default.instancePath,(0,G0.strConcat)(p1.default.instancePath,J)],[p1.default.parentData,G.parentData],[p1.default.parentDataProperty,G.parentDataProperty],[p1.default.rootData,p1.default.rootData]];if(G.opts.dynamicRef)V.push([p1.default.dynamicAnchors,p1.default.dynamicAnchors]);let L=G0._`${K}, ${$.object(...V)}`;return B!==G0.nil?G0._`${H}.call(${B}, ${L})`:G0._`${H}(${L})`}H3.callValidateCode=DD;var AD=G0._`new RegExp`;function wD({gen:X,it:{opts:Q}},$){let Y=Q.unicodeRegExp?"u":"",{regExp:W}=Q.code,J=W($,Y);return X.scopeValue("pattern",{key:J.toString(),ref:J,code:G0._`${W.code==="new RegExp"?AD:(0,VD.useFunc)(X,W)}(${$}, ${Y})`})}H3.usePattern=wD;function MD(X){let{gen:Q,data:$,keyword:Y,it:W}=X,J=Q.name("valid");if(W.allErrors){let H=Q.let("valid",!0);return G(()=>Q.assign(H,!1)),H}return Q.var(J,!0),G(()=>Q.break()),J;function G(H){let B=Q.const("len",G0._`${$}.length`);Q.forRange("i",0,B,(z)=>{X.subschema({keyword:Y,dataProp:z,dataPropType:FY.Type.Num},J),Q.if((0,G0.not)(J),H)})}}H3.validateArray=MD;function jD(X){let{gen:Q,schema:$,keyword:Y,it:W}=X;if(!Array.isArray($))throw Error("ajv implementation error");if($.some((B)=>(0,FY.alwaysValidSchema)(W,B))&&!W.opts.unevaluated)return;let G=Q.let("valid",!1),H=Q.name("_valid");Q.block(()=>$.forEach((B,z)=>{let K=X.subschema({keyword:Y,schemaProp:z,compositeRule:!0},H);if(Q.assign(G,G0._`${G} || ${H}`),!X.mergeValidEvaluated(K,H))Q.if((0,G0.not)(G))})),X.result(G,()=>X.reset(),()=>X.error(!0))}H3.validateUnion=jD});var L3=P((U3)=>{Object.defineProperty(U3,"__esModule",{value:!0});U3.validateKeywordUsage=U3.validSchemaType=U3.funcKeywordCode=U3.macroKeywordCode=void 0;var T0=c(),H6=R1(),xD=d0(),yD=lX();function gD(X,Q){let{gen:$,keyword:Y,schema:W,parentSchema:J,it:G}=X,H=Q.macro.call(G.self,W,J,G),B=K3($,Y,H);if(G.opts.validateSchema!==!1)G.self.validateSchema(H,!0);let z=$.name("valid");X.subschema({schema:H,schemaPath:T0.nil,errSchemaPath:`${G.errSchemaPath}/${Y}`,topSchemaRef:B,compositeRule:!0},z),X.pass(z,()=>X.error(!0))}U3.macroKeywordCode=gD;function fD(X,Q){var $;let{gen:Y,keyword:W,schema:J,parentSchema:G,$data:H,it:B}=X;uD(B,Q);let z=!H&&Q.compile?Q.compile.call(B.self,J,G,B):Q.validate,K=K3(Y,W,z),V=Y.let("valid");X.block$data(V,L),X.ok(($=Q.valid)!==null&&$!==void 0?$:V);function L(){if(Q.errors===!1){if(q(),Q.modifying)z3(X);N(()=>X.error())}else{let A=Q.async?U():F();if(Q.modifying)z3(X);N(()=>hD(X,A))}}function U(){let A=Y.let("ruleErrs",null);return Y.try(()=>q(T0._`await `),(M)=>Y.assign(V,!1).if(T0._`${M} instanceof ${B.ValidationError}`,()=>Y.assign(A,T0._`${M}.errors`),()=>Y.throw(M))),A}function F(){let A=T0._`${K}.errors`;return Y.assign(A,null),q(T0.nil),A}function q(A=Q.async?T0._`await `:T0.nil){let M=B.opts.passContext?H6.default.this:H6.default.self,R=!(("compile"in Q)&&!H||Q.schema===!1);Y.assign(V,T0._`${A}${(0,xD.callValidateCode)(X,K,M,R)}`,Q.modifying)}function N(A){var M;Y.if((0,T0.not)((M=Q.valid)!==null&&M!==void 0?M:V),A)}}U3.funcKeywordCode=fD;function z3(X){let{gen:Q,data:$,it:Y}=X;Q.if(Y.parentData,()=>Q.assign($,T0._`${Y.parentData}[${Y.parentDataProperty}]`))}function hD(X,Q){let{gen:$}=X;$.if(T0._`Array.isArray(${Q})`,()=>{$.assign(H6.default.vErrors,T0._`${H6.default.vErrors} === null ? ${Q} : ${H6.default.vErrors}.concat(${Q})`).assign(H6.default.errors,T0._`${H6.default.vErrors}.length`),(0,yD.extendErrors)(X)},()=>X.error())}function uD({schemaEnv:X},Q){if(Q.async&&!X.$async)throw Error("async keyword in sync schema")}function K3(X,Q,$){if($===void 0)throw Error(`keyword "${Q}" failed to compile`);return X.scopeValue("keyword",typeof $=="function"?{ref:$}:{ref:$,code:(0,T0.stringify)($)})}function lD(X,Q,$=!1){return!Q.length||Q.some((Y)=>Y==="array"?Array.isArray(X):Y==="object"?X&&typeof X=="object"&&!Array.isArray(X):typeof X==Y||$&&typeof X>"u")}U3.validSchemaType=lD;function mD({schema:X,opts:Q,self:$,errSchemaPath:Y},W,J){if(Array.isArray(W.keyword)?!W.keyword.includes(J):W.keyword!==J)throw Error("ajv implementation error");let G=W.dependencies;if(G===null||G===void 0?void 0:G.some((H)=>!Object.prototype.hasOwnProperty.call(X,H)))throw Error(`parent schema must have dependencies of ${J}: ${G.join(",")}`);if(W.validateSchema){if(!W.validateSchema(X[J])){let B=`keyword "${J}" value is invalid at path "${Y}": `+$.errorsText(W.validateSchema.errors);if(Q.validateSchema==="log")$.logger.error(B);else throw Error(B)}}}U3.validateKeywordUsage=mD});var O3=P((F3)=>{Object.defineProperty(F3,"__esModule",{value:!0});F3.extendSubschemaMode=F3.extendSubschemaData=F3.getSubschema=void 0;var U1=c(),q3=e();function iD(X,{keyword:Q,schemaProp:$,schema:Y,schemaPath:W,errSchemaPath:J,topSchemaRef:G}){if(Q!==void 0&&Y!==void 0)throw Error('both "keyword" and "schema" passed, only one allowed');if(Q!==void 0){let H=X.schema[Q];return $===void 0?{schema:H,schemaPath:U1._`${X.schemaPath}${(0,U1.getProperty)(Q)}`,errSchemaPath:`${X.errSchemaPath}/${Q}`}:{schema:H[$],schemaPath:U1._`${X.schemaPath}${(0,U1.getProperty)(Q)}${(0,U1.getProperty)($)}`,errSchemaPath:`${X.errSchemaPath}/${Q}/${(0,q3.escapeFragment)($)}`}}if(Y!==void 0){if(W===void 0||J===void 0||G===void 0)throw Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:Y,schemaPath:W,topSchemaRef:G,errSchemaPath:J}}throw Error('either "keyword" or "schema" must be passed')}F3.getSubschema=iD;function nD(X,Q,{dataProp:$,dataPropType:Y,data:W,dataTypes:J,propertyName:G}){if(W!==void 0&&$!==void 0)throw Error('both "data" and "dataProp" passed, only one allowed');let{gen:H}=Q;if($!==void 0){let{errorPath:z,dataPathArr:K,opts:V}=Q,L=H.let("data",U1._`${Q.data}${(0,U1.getProperty)($)}`,!0);B(L),X.errorPath=U1.str`${z}${(0,q3.getErrorPath)($,Y,V.jsPropertySyntax)}`,X.parentDataProperty=U1._`${$}`,X.dataPathArr=[...K,X.parentDataProperty]}if(W!==void 0){let z=W instanceof U1.Name?W:H.let("data",W,!0);if(B(z),G!==void 0)X.propertyName=G}if(J)X.dataTypes=J;function B(z){X.data=z,X.dataLevel=Q.dataLevel+1,X.dataTypes=[],Q.definedProperties=new Set,X.parentData=Q.data,X.dataNames=[...Q.dataNames,z]}}F3.extendSubschemaData=nD;function rD(X,{jtdDiscriminator:Q,jtdMetadata:$,compositeRule:Y,createErrors:W,allErrors:J}){if(Y!==void 0)X.compositeRule=Y;if(W!==void 0)X.createErrors=W;if(J!==void 0)X.allErrors=J;X.jtdDiscriminator=Q,X.jtdMetadata=$}F3.extendSubschemaMode=rD});var DY=P((ev,D3)=>{D3.exports=function X(Q,$){if(Q===$)return!0;if(Q&&$&&typeof Q=="object"&&typeof $=="object"){if(Q.constructor!==$.constructor)return!1;var Y,W,J;if(Array.isArray(Q)){if(Y=Q.length,Y!=$.length)return!1;for(W=Y;W--!==0;)if(!X(Q[W],$[W]))return!1;return!0}if(Q.constructor===RegExp)return Q.source===$.source&&Q.flags===$.flags;if(Q.valueOf!==Object.prototype.valueOf)return Q.valueOf()===$.valueOf();if(Q.toString!==Object.prototype.toString)return Q.toString()===$.toString();if(J=Object.keys(Q),Y=J.length,Y!==Object.keys($).length)return!1;for(W=Y;W--!==0;)if(!Object.prototype.hasOwnProperty.call($,J[W]))return!1;for(W=Y;W--!==0;){var G=J[W];if(!X(Q[G],$[G]))return!1}return!0}return Q!==Q&&$!==$}});var w3=P((XT,A3)=>{var d1=A3.exports=function(X,Q,$){if(typeof Q=="function")$=Q,Q={};$=Q.cb||$;var Y=typeof $=="function"?$:$.pre||function(){},W=$.post||function(){};C8(Q,Y,W,X,"",X)};d1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};d1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};d1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};d1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function C8(X,Q,$,Y,W,J,G,H,B,z){if(Y&&typeof Y=="object"&&!Array.isArray(Y)){Q(Y,W,J,G,H,B,z);for(var K in Y){var V=Y[K];if(Array.isArray(V)){if(K in d1.arrayKeywords)for(var L=0;L<V.length;L++)C8(X,Q,$,V[L],W+"/"+K+"/"+L,J,W,K,Y,L)}else if(K in d1.propsKeywords){if(V&&typeof V=="object")for(var U in V)C8(X,Q,$,V[U],W+"/"+K+"/"+aD(U),J,W,K,Y,U)}else if(K in d1.keywords||X.allKeys&&!(K in d1.skipKeywords))C8(X,Q,$,V,W+"/"+K,J,W,K,Y)}$(Y,W,J,G,H,B,z)}}function aD(X){return X.replace(/~/g,"~0").replace(/\//g,"~1")}});var cX=P((I3)=>{Object.defineProperty(I3,"__esModule",{value:!0});I3.getSchemaRefs=I3.resolveUrl=I3.normalizeId=I3._getFullPath=I3.getFullPath=I3.inlineRef=void 0;var sD=e(),eD=DY(),XA=w3(),QA=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function $A(X,Q=!0){if(typeof X=="boolean")return!0;if(Q===!0)return!AY(X);if(!Q)return!1;return M3(X)<=Q}I3.inlineRef=$A;var YA=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function AY(X){for(let Q in X){if(YA.has(Q))return!0;let $=X[Q];if(Array.isArray($)&&$.some(AY))return!0;if(typeof $=="object"&&AY($))return!0}return!1}function M3(X){let Q=0;for(let $ in X){if($==="$ref")return 1/0;if(Q++,QA.has($))continue;if(typeof X[$]=="object")(0,sD.eachItem)(X[$],(Y)=>Q+=M3(Y));if(Q===1/0)return 1/0}return Q}function j3(X,Q="",$){if($!==!1)Q=c6(Q);let Y=X.parse(Q);return R3(X,Y)}I3.getFullPath=j3;function R3(X,Q){return X.serialize(Q).split("#")[0]+"#"}I3._getFullPath=R3;var WA=/#\/?$/;function c6(X){return X?X.replace(WA,""):""}I3.normalizeId=c6;function JA(X,Q,$){return $=c6($),X.resolve(Q,$)}I3.resolveUrl=JA;var GA=/^[a-z_][-a-z0-9._]*$/i;function HA(X,Q){if(typeof X=="boolean")return{};let{schemaId:$,uriResolver:Y}=this.opts,W=c6(X[$]||Q),J={"":W},G=j3(Y,W,!1),H={},B=new Set;return XA(X,{allKeys:!0},(V,L,U,F)=>{if(F===void 0)return;let q=G+L,N=J[F];if(typeof V[$]=="string")N=A.call(this,V[$]);M.call(this,V.$anchor),M.call(this,V.$dynamicAnchor),J[L]=N;function A(R){let S=this.opts.uriResolver.resolve;if(R=c6(N?S(N,R):R),B.has(R))throw K(R);B.add(R);let C=this.refs[R];if(typeof C=="string")C=this.refs[C];if(typeof C=="object")z(V,C.schema,R);else if(R!==c6(q))if(R[0]==="#")z(V,H[R],R),H[R]=V;else this.refs[R]=q;return R}function M(R){if(typeof R=="string"){if(!GA.test(R))throw Error(`invalid anchor "${R}"`);A.call(this,`#${R}`)}}}),H;function z(V,L,U){if(L!==void 0&&!eD(V,L))throw K(U)}function K(V){return Error(`reference "${V}" resolves to more than one schema`)}}I3.getSchemaRefs=HA});var iX=P((u3)=>{Object.defineProperty(u3,"__esModule",{value:!0});u3.getData=u3.KeywordCxt=u3.validateFunctionCode=void 0;var C3=cG(),b3=mX(),MY=UY(),k8=mX(),LA=W3(),dX=L3(),wY=O3(),_=c(),u=R1(),qA=cX(),I1=e(),pX=lX();function FA(X){if(T3(X)){if(_3(X),v3(X)){DA(X);return}}k3(X,()=>(0,C3.topBoolOrEmptySchema)(X))}u3.validateFunctionCode=FA;function k3({gen:X,validateName:Q,schema:$,schemaEnv:Y,opts:W},J){if(W.code.es5)X.func(Q,_._`${u.default.data}, ${u.default.valCxt}`,Y.$async,()=>{X.code(_._`"use strict"; ${P3($,W)}`),OA(X,W),X.code(J)});else X.func(Q,_._`${u.default.data}, ${NA(W)}`,Y.$async,()=>X.code(P3($,W)).code(J))}function NA(X){return _._`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${X.dynamicRef?_._`, ${u.default.dynamicAnchors}={}`:_.nil}}={}`}function OA(X,Q){X.if(u.default.valCxt,()=>{if(X.var(u.default.instancePath,_._`${u.default.valCxt}.${u.default.instancePath}`),X.var(u.default.parentData,_._`${u.default.valCxt}.${u.default.parentData}`),X.var(u.default.parentDataProperty,_._`${u.default.valCxt}.${u.default.parentDataProperty}`),X.var(u.default.rootData,_._`${u.default.valCxt}.${u.default.rootData}`),Q.dynamicRef)X.var(u.default.dynamicAnchors,_._`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{if(X.var(u.default.instancePath,_._`""`),X.var(u.default.parentData,_._`undefined`),X.var(u.default.parentDataProperty,_._`undefined`),X.var(u.default.rootData,u.default.data),Q.dynamicRef)X.var(u.default.dynamicAnchors,_._`{}`)})}function DA(X){let{schema:Q,opts:$,gen:Y}=X;k3(X,()=>{if($.$comment&&Q.$comment)y3(X);if(RA(X),Y.let(u.default.vErrors,null),Y.let(u.default.errors,0),$.unevaluated)AA(X);x3(X),bA(X)});return}function AA(X){let{gen:Q,validateName:$}=X;X.evaluated=Q.const("evaluated",_._`${$}.evaluated`),Q.if(_._`${X.evaluated}.dynamicProps`,()=>Q.assign(_._`${X.evaluated}.props`,_._`undefined`)),Q.if(_._`${X.evaluated}.dynamicItems`,()=>Q.assign(_._`${X.evaluated}.items`,_._`undefined`))}function P3(X,Q){let $=typeof X=="object"&&X[Q.schemaId];return $&&(Q.code.source||Q.code.process)?_._`/*# sourceURL=${$} */`:_.nil}function wA(X,Q){if(T3(X)){if(_3(X),v3(X)){MA(X,Q);return}}(0,C3.boolOrEmptySchema)(X,Q)}function v3({schema:X,self:Q}){if(typeof X=="boolean")return!X;for(let $ in X)if(Q.RULES.all[$])return!0;return!1}function T3(X){return typeof X.schema!="boolean"}function MA(X,Q){let{schema:$,gen:Y,opts:W}=X;if(W.$comment&&$.$comment)y3(X);IA(X),EA(X);let J=Y.const("_errs",u.default.errors);x3(X,J),Y.var(Q,_._`${J} === ${u.default.errors}`)}function _3(X){(0,I1.checkUnknownRules)(X),jA(X)}function x3(X,Q){if(X.opts.jtd)return S3(X,[],!1,Q);let $=(0,b3.getSchemaTypes)(X.schema),Y=(0,b3.coerceAndCheckDataType)(X,$);S3(X,$,!Y,Q)}function jA(X){let{schema:Q,errSchemaPath:$,opts:Y,self:W}=X;if(Q.$ref&&Y.ignoreKeywordsWithRef&&(0,I1.schemaHasRulesButRef)(Q,W.RULES))W.logger.warn(`$ref: keywords ignored in schema at path "${$}"`)}function RA(X){let{schema:Q,opts:$}=X;if(Q.default!==void 0&&$.useDefaults&&$.strictSchema)(0,I1.checkStrictMode)(X,"default is ignored in the schema root")}function IA(X){let Q=X.schema[X.opts.schemaId];if(Q)X.baseId=(0,qA.resolveUrl)(X.opts.uriResolver,X.baseId,Q)}function EA(X){if(X.schema.$async&&!X.schemaEnv.$async)throw Error("async schema in sync schema")}function y3({gen:X,schemaEnv:Q,schema:$,errSchemaPath:Y,opts:W}){let J=$.$comment;if(W.$comment===!0)X.code(_._`${u.default.self}.logger.log(${J})`);else if(typeof W.$comment=="function"){let G=_.str`${Y}/$comment`,H=X.scopeValue("root",{ref:Q.root});X.code(_._`${u.default.self}.opts.$comment(${J}, ${G}, ${H}.schema)`)}}function bA(X){let{gen:Q,schemaEnv:$,validateName:Y,ValidationError:W,opts:J}=X;if($.$async)Q.if(_._`${u.default.errors} === 0`,()=>Q.return(u.default.data),()=>Q.throw(_._`new ${W}(${u.default.vErrors})`));else{if(Q.assign(_._`${Y}.errors`,u.default.vErrors),J.unevaluated)PA(X);Q.return(_._`${u.default.errors} === 0`)}}function PA({gen:X,evaluated:Q,props:$,items:Y}){if($ instanceof _.Name)X.assign(_._`${Q}.props`,$);if(Y instanceof _.Name)X.assign(_._`${Q}.items`,Y)}function S3(X,Q,$,Y){let{gen:W,schema:J,data:G,allErrors:H,opts:B,self:z}=X,{RULES:K}=z;if(J.$ref&&(B.ignoreKeywordsWithRef||!(0,I1.schemaHasRulesButRef)(J,K))){W.block(()=>f3(X,"$ref",K.all.$ref.definition));return}if(!B.jtd)SA(X,Q);W.block(()=>{for(let L of K.rules)V(L);V(K.post)});function V(L){if(!(0,MY.shouldUseGroup)(J,L))return;if(L.type){if(W.if((0,k8.checkDataType)(L.type,G,B.strictNumbers)),Z3(X,L),Q.length===1&&Q[0]===L.type&&$)W.else(),(0,k8.reportTypeError)(X);W.endIf()}else Z3(X,L);if(!H)W.if(_._`${u.default.errors} === ${Y||0}`)}}function Z3(X,Q){let{gen:$,schema:Y,opts:{useDefaults:W}}=X;if(W)(0,LA.assignDefaults)(X,Q.type);$.block(()=>{for(let J of Q.rules)if((0,MY.shouldUseRule)(Y,J))f3(X,J.keyword,J.definition,Q.type)})}function SA(X,Q){if(X.schemaEnv.meta||!X.opts.strictTypes)return;if(ZA(X,Q),!X.opts.allowUnionTypes)CA(X,Q);kA(X,X.dataTypes)}function ZA(X,Q){if(!Q.length)return;if(!X.dataTypes.length){X.dataTypes=Q;return}Q.forEach(($)=>{if(!g3(X.dataTypes,$))jY(X,`type "${$}" not allowed by context "${X.dataTypes.join(",")}"`)}),TA(X,Q)}function CA(X,Q){if(Q.length>1&&!(Q.length===2&&Q.includes("null")))jY(X,"use allowUnionTypes to allow union type keyword")}function kA(X,Q){let $=X.self.RULES.all;for(let Y in $){let W=$[Y];if(typeof W=="object"&&(0,MY.shouldUseRule)(X.schema,W)){let{type:J}=W.definition;if(J.length&&!J.some((G)=>vA(Q,G)))jY(X,`missing type "${J.join(",")}" for keyword "${Y}"`)}}}function vA(X,Q){return X.includes(Q)||Q==="number"&&X.includes("integer")}function g3(X,Q){return X.includes(Q)||Q==="integer"&&X.includes("number")}function TA(X,Q){let $=[];for(let Y of X.dataTypes)if(g3(Q,Y))$.push(Y);else if(Q.includes("integer")&&Y==="number")$.push("integer");X.dataTypes=$}function jY(X,Q){let $=X.schemaEnv.baseId+X.errSchemaPath;Q+=` at "${$}" (strictTypes)`,(0,I1.checkStrictMode)(X,Q,X.opts.strictTypes)}class RY{constructor(X,Q,$){if((0,dX.validateKeywordUsage)(X,Q,$),this.gen=X.gen,this.allErrors=X.allErrors,this.keyword=$,this.data=X.data,this.schema=X.schema[$],this.$data=Q.$data&&X.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,I1.schemaRefOrVal)(X,this.schema,$,this.$data),this.schemaType=Q.schemaType,this.parentSchema=X.schema,this.params={},this.it=X,this.def=Q,this.$data)this.schemaCode=X.gen.const("vSchema",h3(this.$data,X));else if(this.schemaCode=this.schemaValue,!(0,dX.validSchemaType)(this.schema,Q.schemaType,Q.allowUndefined))throw Error(`${$} value must be ${JSON.stringify(Q.schemaType)}`);if("code"in Q?Q.trackErrors:Q.errors!==!1)this.errsCount=X.gen.const("_errs",u.default.errors)}result(X,Q,$){this.failResult((0,_.not)(X),Q,$)}failResult(X,Q,$){if(this.gen.if(X),$)$();else this.error();if(Q){if(this.gen.else(),Q(),this.allErrors)this.gen.endIf()}else if(this.allErrors)this.gen.endIf();else this.gen.else()}pass(X,Q){this.failResult((0,_.not)(X),void 0,Q)}fail(X){if(X===void 0){if(this.error(),!this.allErrors)this.gen.if(!1);return}if(this.gen.if(X),this.error(),this.allErrors)this.gen.endIf();else this.gen.else()}fail$data(X){if(!this.$data)return this.fail(X);let{schemaCode:Q}=this;this.fail(_._`${Q} !== undefined && (${(0,_.or)(this.invalid$data(),X)})`)}error(X,Q,$){if(Q){this.setParams(Q),this._error(X,$),this.setParams({});return}this._error(X,$)}_error(X,Q){(X?pX.reportExtraError:pX.reportError)(this,this.def.error,Q)}$dataError(){(0,pX.reportError)(this,this.def.$dataError||pX.keyword$DataError)}reset(){if(this.errsCount===void 0)throw Error('add "trackErrors" to keyword definition');(0,pX.resetErrorsCount)(this.gen,this.errsCount)}ok(X){if(!this.allErrors)this.gen.if(X)}setParams(X,Q){if(Q)Object.assign(this.params,X);else this.params=X}block$data(X,Q,$=_.nil){this.gen.block(()=>{this.check$data(X,$),Q()})}check$data(X=_.nil,Q=_.nil){if(!this.$data)return;let{gen:$,schemaCode:Y,schemaType:W,def:J}=this;if($.if((0,_.or)(_._`${Y} === undefined`,Q)),X!==_.nil)$.assign(X,!0);if(W.length||J.validateSchema){if($.elseIf(this.invalid$data()),this.$dataError(),X!==_.nil)$.assign(X,!1)}$.else()}invalid$data(){let{gen:X,schemaCode:Q,schemaType:$,def:Y,it:W}=this;return(0,_.or)(J(),G());function J(){if($.length){if(!(Q instanceof _.Name))throw Error("ajv implementation error");let H=Array.isArray($)?$:[$];return _._`${(0,k8.checkDataTypes)(H,Q,W.opts.strictNumbers,k8.DataType.Wrong)}`}return _.nil}function G(){if(Y.validateSchema){let H=X.scopeValue("validate$data",{ref:Y.validateSchema});return _._`!${H}(${Q})`}return _.nil}}subschema(X,Q){let $=(0,wY.getSubschema)(this.it,X);(0,wY.extendSubschemaData)($,this.it,X),(0,wY.extendSubschemaMode)($,X);let Y={...this.it,...$,items:void 0,props:void 0};return wA(Y,Q),Y}mergeEvaluated(X,Q){let{it:$,gen:Y}=this;if(!$.opts.unevaluated)return;if($.props!==!0&&X.props!==void 0)$.props=I1.mergeEvaluated.props(Y,X.props,$.props,Q);if($.items!==!0&&X.items!==void 0)$.items=I1.mergeEvaluated.items(Y,X.items,$.items,Q)}mergeValidEvaluated(X,Q){let{it:$,gen:Y}=this;if($.opts.unevaluated&&($.props!==!0||$.items!==!0))return Y.if(Q,()=>this.mergeEvaluated(X,_.Name)),!0}}u3.KeywordCxt=RY;function f3(X,Q,$,Y){let W=new RY(X,$,Q);if("code"in $)$.code(W,Y);else if(W.$data&&$.validate)(0,dX.funcKeywordCode)(W,$);else if("macro"in $)(0,dX.macroKeywordCode)(W,$);else if($.compile||$.validate)(0,dX.funcKeywordCode)(W,$)}var _A=/^\/(?:[^~]|~0|~1)*$/,xA=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function h3(X,{dataLevel:Q,dataNames:$,dataPathArr:Y}){let W,J;if(X==="")return u.default.rootData;if(X[0]==="/"){if(!_A.test(X))throw Error(`Invalid JSON-pointer: ${X}`);W=X,J=u.default.rootData}else{let z=xA.exec(X);if(!z)throw Error(`Invalid JSON-pointer: ${X}`);let K=+z[1];if(W=z[2],W==="#"){if(K>=Q)throw Error(B("property/index",K));return Y[Q-K]}if(K>Q)throw Error(B("data",K));if(J=$[Q-K],!W)return J}let G=J,H=W.split("/");for(let z of H)if(z)J=_._`${J}${(0,_.getProperty)((0,I1.unescapeJsonPointer)(z))}`,G=_._`${G} && ${J}`;return G;function B(z,K){return`Cannot access ${z} ${K} levels up, current level is ${Q}`}}u3.getData=h3});var v8=P((c3)=>{Object.defineProperty(c3,"__esModule",{value:!0});class m3 extends Error{constructor(X){super("validation failed");this.errors=X,this.ajv=this.validation=!0}}c3.default=m3});var nX=P((d3)=>{Object.defineProperty(d3,"__esModule",{value:!0});var IY=cX();class p3 extends Error{constructor(X,Q,$,Y){super(Y||`can't resolve reference ${$} from id ${Q}`);this.missingRef=(0,IY.resolveUrl)(X,Q,$),this.missingSchema=(0,IY.normalizeId)((0,IY.getFullPath)(X,this.missingRef))}}d3.default=p3});var _8=P((r3)=>{Object.defineProperty(r3,"__esModule",{value:!0});r3.resolveSchema=r3.getCompilingSchema=r3.resolveRef=r3.compileSchema=r3.SchemaEnv=void 0;var X1=c(),uA=v8(),B6=R1(),Q1=cX(),i3=e(),lA=iX();class rX{constructor(X){var Q;this.refs={},this.dynamicAnchors={};let $;if(typeof X.schema=="object")$=X.schema;this.schema=X.schema,this.schemaId=X.schemaId,this.root=X.root||this,this.baseId=(Q=X.baseId)!==null&&Q!==void 0?Q:(0,Q1.normalizeId)($===null||$===void 0?void 0:$[X.schemaId||"$id"]),this.schemaPath=X.schemaPath,this.localRefs=X.localRefs,this.meta=X.meta,this.$async=$===null||$===void 0?void 0:$.$async,this.refs={}}}r3.SchemaEnv=rX;function bY(X){let Q=n3.call(this,X);if(Q)return Q;let $=(0,Q1.getFullPath)(this.opts.uriResolver,X.root.baseId),{es5:Y,lines:W}=this.opts.code,{ownProperties:J}=this.opts,G=new X1.CodeGen(this.scope,{es5:Y,lines:W,ownProperties:J}),H;if(X.$async)H=G.scopeValue("Error",{ref:uA.default,code:X1._`require("ajv/dist/runtime/validation_error").default`});let B=G.scopeName("validate");X.validateName=B;let z={gen:G,allErrors:this.opts.allErrors,data:B6.default.data,parentData:B6.default.parentData,parentDataProperty:B6.default.parentDataProperty,dataNames:[B6.default.data],dataPathArr:[X1.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:G.scopeValue("schema",this.opts.code.source===!0?{ref:X.schema,code:(0,X1.stringify)(X.schema)}:{ref:X.schema}),validateName:B,ValidationError:H,schema:X.schema,schemaEnv:X,rootId:$,baseId:X.baseId||$,schemaPath:X1.nil,errSchemaPath:X.schemaPath||(this.opts.jtd?"":"#"),errorPath:X1._`""`,opts:this.opts,self:this},K;try{this._compilations.add(X),(0,lA.validateFunctionCode)(z),G.optimize(this.opts.code.optimize);let V=G.toString();if(K=`${G.scopeRefs(B6.default.scope)}return ${V}`,this.opts.code.process)K=this.opts.code.process(K,X);let U=Function(`${B6.default.self}`,`${B6.default.scope}`,K)(this,this.scope.get());if(this.scope.value(B,{ref:U}),U.errors=null,U.schema=X.schema,U.schemaEnv=X,X.$async)U.$async=!0;if(this.opts.code.source===!0)U.source={validateName:B,validateCode:V,scopeValues:G._values};if(this.opts.unevaluated){let{props:F,items:q}=z;if(U.evaluated={props:F instanceof X1.Name?void 0:F,items:q instanceof X1.Name?void 0:q,dynamicProps:F instanceof X1.Name,dynamicItems:q instanceof X1.Name},U.source)U.source.evaluated=(0,X1.stringify)(U.evaluated)}return X.validate=U,X}catch(V){if(delete X.validate,delete X.validateName,K)this.logger.error("Error compiling schema, function code:",K);throw V}finally{this._compilations.delete(X)}}r3.compileSchema=bY;function mA(X,Q,$){var Y;$=(0,Q1.resolveUrl)(this.opts.uriResolver,Q,$);let W=X.refs[$];if(W)return W;let J=dA.call(this,X,$);if(J===void 0){let G=(Y=X.localRefs)===null||Y===void 0?void 0:Y[$],{schemaId:H}=this.opts;if(G)J=new rX({schema:G,schemaId:H,root:X,baseId:Q})}if(J===void 0)return;return X.refs[$]=cA.call(this,J)}r3.resolveRef=mA;function cA(X){if((0,Q1.inlineRef)(X.schema,this.opts.inlineRefs))return X.schema;return X.validate?X:bY.call(this,X)}function n3(X){for(let Q of this._compilations)if(pA(Q,X))return Q}r3.getCompilingSchema=n3;function pA(X,Q){return X.schema===Q.schema&&X.root===Q.root&&X.baseId===Q.baseId}function dA(X,Q){let $;while(typeof($=this.refs[Q])=="string")Q=$;return $||this.schemas[Q]||T8.call(this,X,Q)}function T8(X,Q){let $=this.opts.uriResolver.parse(Q),Y=(0,Q1._getFullPath)(this.opts.uriResolver,$),W=(0,Q1.getFullPath)(this.opts.uriResolver,X.baseId,void 0);if(Object.keys(X.schema).length>0&&Y===W)return EY.call(this,$,X);let J=(0,Q1.normalizeId)(Y),G=this.refs[J]||this.schemas[J];if(typeof G=="string"){let H=T8.call(this,X,G);if(typeof(H===null||H===void 0?void 0:H.schema)!=="object")return;return EY.call(this,$,H)}if(typeof(G===null||G===void 0?void 0:G.schema)!=="object")return;if(!G.validate)bY.call(this,G);if(J===(0,Q1.normalizeId)(Q)){let{schema:H}=G,{schemaId:B}=this.opts,z=H[B];if(z)W=(0,Q1.resolveUrl)(this.opts.uriResolver,W,z);return new rX({schema:H,schemaId:B,root:X,baseId:W})}return EY.call(this,$,G)}r3.resolveSchema=T8;var iA=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function EY(X,{baseId:Q,schema:$,root:Y}){var W;if(((W=X.fragment)===null||W===void 0?void 0:W[0])!=="/")return;for(let H of X.fragment.slice(1).split("/")){if(typeof $==="boolean")return;let B=$[(0,i3.unescapeFragment)(H)];if(B===void 0)return;$=B;let z=typeof $==="object"&&$[this.opts.schemaId];if(!iA.has(H)&&z)Q=(0,Q1.resolveUrl)(this.opts.uriResolver,Q,z)}let J;if(typeof $!="boolean"&&$.$ref&&!(0,i3.schemaHasRulesButRef)($,this.RULES)){let H=(0,Q1.resolveUrl)(this.opts.uriResolver,Q,$.$ref);J=T8.call(this,Y,H)}let{schemaId:G}=this.opts;if(J=J||new rX({schema:$,schemaId:G,root:Y,baseId:Q}),J.schema!==J.root.schema)return J;return}});var t3=P((GT,aA)=>{aA.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var s3=P((HT,a3)=>{var sA={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};a3.exports={HEX:sA}});var GH=P((BT,JH)=>{var{HEX:eA}=s3(),Xw=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function $H(X){if(WH(X,".")<3)return{host:X,isIPV4:!1};let Q=X.match(Xw)||[],[$]=Q;if($)return{host:$w($,"."),isIPV4:!0};else return{host:X,isIPV4:!1}}function PY(X,Q=!1){let $="",Y=!0;for(let W of X){if(eA[W]===void 0)return;if(W!=="0"&&Y===!0)Y=!1;if(!Y)$+=W}if(Q&&$.length===0)$="0";return $}function Qw(X){let Q=0,$={error:!1,address:"",zone:""},Y=[],W=[],J=!1,G=!1,H=!1;function B(){if(W.length){if(J===!1){let z=PY(W);if(z!==void 0)Y.push(z);else return $.error=!0,!1}W.length=0}return!0}for(let z=0;z<X.length;z++){let K=X[z];if(K==="["||K==="]")continue;if(K===":"){if(G===!0)H=!0;if(!B())break;if(Q++,Y.push(":"),Q>7){$.error=!0;break}if(z-1>=0&&X[z-1]===":")G=!0;continue}else if(K==="%"){if(!B())break;J=!0}else{W.push(K);continue}}if(W.length)if(J)$.zone=W.join("");else if(H)Y.push(W.join(""));else Y.push(PY(W));return $.address=Y.join(""),$}function YH(X){if(WH(X,":")<2)return{host:X,isIPV6:!1};let Q=Qw(X);if(!Q.error){let{address:$,address:Y}=Q;if(Q.zone)$+="%"+Q.zone,Y+="%25"+Q.zone;return{host:$,escapedHost:Y,isIPV6:!0}}else return{host:X,isIPV6:!1}}function $w(X,Q){let $="",Y=!0,W=X.length;for(let J=0;J<W;J++){let G=X[J];if(G==="0"&&Y){if(J+1<=W&&X[J+1]===Q||J+1===W)$+=G,Y=!1}else{if(G===Q)Y=!0;else Y=!1;$+=G}}return $}function WH(X,Q){let $=0;for(let Y=0;Y<X.length;Y++)if(X[Y]===Q)$++;return $}var e3=/^\.\.?\//u,XH=/^\/\.(?:\/|$)/u,QH=/^\/\.\.(?:\/|$)/u,Yw=/^\/?(?:.|\n)*?(?=\/|$)/u;function Ww(X){let Q=[];while(X.length)if(X.match(e3))X=X.replace(e3,"");else if(X.match(XH))X=X.replace(XH,"/");else if(X.match(QH))X=X.replace(QH,"/"),Q.pop();else if(X==="."||X==="..")X="";else{let $=X.match(Yw);if($){let Y=$[0];X=X.slice(Y.length),Q.push(Y)}else throw Error("Unexpected dot segment condition")}return Q.join("")}function Jw(X,Q){let $=Q!==!0?escape:unescape;if(X.scheme!==void 0)X.scheme=$(X.scheme);if(X.userinfo!==void 0)X.userinfo=$(X.userinfo);if(X.host!==void 0)X.host=$(X.host);if(X.path!==void 0)X.path=$(X.path);if(X.query!==void 0)X.query=$(X.query);if(X.fragment!==void 0)X.fragment=$(X.fragment);return X}function Gw(X){let Q=[];if(X.userinfo!==void 0)Q.push(X.userinfo),Q.push("@");if(X.host!==void 0){let $=unescape(X.host),Y=$H($);if(Y.isIPV4)$=Y.host;else{let W=YH(Y.host);if(W.isIPV6===!0)$=`[${W.escapedHost}]`;else $=X.host}Q.push($)}if(typeof X.port==="number"||typeof X.port==="string")Q.push(":"),Q.push(String(X.port));return Q.length?Q.join(""):void 0}JH.exports={recomposeAuthority:Gw,normalizeComponentEncoding:Jw,removeDotSegments:Ww,normalizeIPv4:$H,normalizeIPv6:YH,stringArrayToHexStripped:PY}});var VH=P((zT,UH)=>{var Hw=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,Bw=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function HH(X){return typeof X.secure==="boolean"?X.secure:String(X.scheme).toLowerCase()==="wss"}function BH(X){if(!X.host)X.error=X.error||"HTTP URIs must have a host.";return X}function zH(X){let Q=String(X.scheme).toLowerCase()==="https";if(X.port===(Q?443:80)||X.port==="")X.port=void 0;if(!X.path)X.path="/";return X}function zw(X){return X.secure=HH(X),X.resourceName=(X.path||"/")+(X.query?"?"+X.query:""),X.path=void 0,X.query=void 0,X}function Kw(X){if(X.port===(HH(X)?443:80)||X.port==="")X.port=void 0;if(typeof X.secure==="boolean")X.scheme=X.secure?"wss":"ws",X.secure=void 0;if(X.resourceName){let[Q,$]=X.resourceName.split("?");X.path=Q&&Q!=="/"?Q:void 0,X.query=$,X.resourceName=void 0}return X.fragment=void 0,X}function Uw(X,Q){if(!X.path)return X.error="URN can not be parsed",X;let $=X.path.match(Bw);if($){let Y=Q.scheme||X.scheme||"urn";X.nid=$[1].toLowerCase(),X.nss=$[2];let W=`${Y}:${Q.nid||X.nid}`,J=SY[W];if(X.path=void 0,J)X=J.parse(X,Q)}else X.error=X.error||"URN can not be parsed.";return X}function Vw(X,Q){let $=Q.scheme||X.scheme||"urn",Y=X.nid.toLowerCase(),W=`${$}:${Q.nid||Y}`,J=SY[W];if(J)X=J.serialize(X,Q);let G=X,H=X.nss;return G.path=`${Y||Q.nid}:${H}`,Q.skipEscape=!0,G}function Lw(X,Q){let $=X;if($.uuid=$.nss,$.nss=void 0,!Q.tolerant&&(!$.uuid||!Hw.test($.uuid)))$.error=$.error||"UUID is not valid.";return $}function qw(X){let Q=X;return Q.nss=(X.uuid||"").toLowerCase(),Q}var KH={scheme:"http",domainHost:!0,parse:BH,serialize:zH},Fw={scheme:"https",domainHost:KH.domainHost,parse:BH,serialize:zH},x8={scheme:"ws",domainHost:!0,parse:zw,serialize:Kw},Nw={scheme:"wss",domainHost:x8.domainHost,parse:x8.parse,serialize:x8.serialize},Ow={scheme:"urn",parse:Uw,serialize:Vw,skipNormalize:!0},Dw={scheme:"urn:uuid",parse:Lw,serialize:qw,skipNormalize:!0},SY={http:KH,https:Fw,ws:x8,wss:Nw,urn:Ow,"urn:uuid":Dw};UH.exports=SY});var qH=P((KT,g8)=>{var{normalizeIPv6:Aw,normalizeIPv4:ww,removeDotSegments:oX,recomposeAuthority:Mw,normalizeComponentEncoding:y8}=GH(),ZY=VH();function jw(X,Q){if(typeof X==="string")X=V1(E1(X,Q),Q);else if(typeof X==="object")X=E1(V1(X,Q),Q);return X}function Rw(X,Q,$){let Y=Object.assign({scheme:"null"},$),W=LH(E1(X,Y),E1(Q,Y),Y,!0);return V1(W,{...Y,skipEscape:!0})}function LH(X,Q,$,Y){let W={};if(!Y)X=E1(V1(X,$),$),Q=E1(V1(Q,$),$);if($=$||{},!$.tolerant&&Q.scheme)W.scheme=Q.scheme,W.userinfo=Q.userinfo,W.host=Q.host,W.port=Q.port,W.path=oX(Q.path||""),W.query=Q.query;else{if(Q.userinfo!==void 0||Q.host!==void 0||Q.port!==void 0)W.userinfo=Q.userinfo,W.host=Q.host,W.port=Q.port,W.path=oX(Q.path||""),W.query=Q.query;else{if(!Q.path)if(W.path=X.path,Q.query!==void 0)W.query=Q.query;else W.query=X.query;else{if(Q.path.charAt(0)==="/")W.path=oX(Q.path);else{if((X.userinfo!==void 0||X.host!==void 0||X.port!==void 0)&&!X.path)W.path="/"+Q.path;else if(!X.path)W.path=Q.path;else W.path=X.path.slice(0,X.path.lastIndexOf("/")+1)+Q.path;W.path=oX(W.path)}W.query=Q.query}W.userinfo=X.userinfo,W.host=X.host,W.port=X.port}W.scheme=X.scheme}return W.fragment=Q.fragment,W}function Iw(X,Q,$){if(typeof X==="string")X=unescape(X),X=V1(y8(E1(X,$),!0),{...$,skipEscape:!0});else if(typeof X==="object")X=V1(y8(X,!0),{...$,skipEscape:!0});if(typeof Q==="string")Q=unescape(Q),Q=V1(y8(E1(Q,$),!0),{...$,skipEscape:!0});else if(typeof Q==="object")Q=V1(y8(Q,!0),{...$,skipEscape:!0});return X.toLowerCase()===Q.toLowerCase()}function V1(X,Q){let $={host:X.host,scheme:X.scheme,userinfo:X.userinfo,port:X.port,path:X.path,query:X.query,nid:X.nid,nss:X.nss,uuid:X.uuid,fragment:X.fragment,reference:X.reference,resourceName:X.resourceName,secure:X.secure,error:""},Y=Object.assign({},Q),W=[],J=ZY[(Y.scheme||$.scheme||"").toLowerCase()];if(J&&J.serialize)J.serialize($,Y);if($.path!==void 0)if(!Y.skipEscape){if($.path=escape($.path),$.scheme!==void 0)$.path=$.path.split("%3A").join(":")}else $.path=unescape($.path);if(Y.reference!=="suffix"&&$.scheme)W.push($.scheme,":");let G=Mw($);if(G!==void 0){if(Y.reference!=="suffix")W.push("//");if(W.push(G),$.path&&$.path.charAt(0)!=="/")W.push("/")}if($.path!==void 0){let H=$.path;if(!Y.absolutePath&&(!J||!J.absolutePath))H=oX(H);if(G===void 0)H=H.replace(/^\/\//u,"/%2F");W.push(H)}if($.query!==void 0)W.push("?",$.query);if($.fragment!==void 0)W.push("#",$.fragment);return W.join("")}var Ew=Array.from({length:127},(X,Q)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(Q)));function bw(X){let Q=0;for(let $=0,Y=X.length;$<Y;++$)if(Q=X.charCodeAt($),Q>126||Ew[Q])return!0;return!1}var Pw=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function E1(X,Q){let $=Object.assign({},Q),Y={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},W=X.indexOf("%")!==-1,J=!1;if($.reference==="suffix")X=($.scheme?$.scheme+":":"")+"//"+X;let G=X.match(Pw);if(G){if(Y.scheme=G[1],Y.userinfo=G[3],Y.host=G[4],Y.port=parseInt(G[5],10),Y.path=G[6]||"",Y.query=G[7],Y.fragment=G[8],isNaN(Y.port))Y.port=G[5];if(Y.host){let B=ww(Y.host);if(B.isIPV4===!1){let z=Aw(B.host);Y.host=z.host.toLowerCase(),J=z.isIPV6}else Y.host=B.host,J=!0}if(Y.scheme===void 0&&Y.userinfo===void 0&&Y.host===void 0&&Y.port===void 0&&Y.query===void 0&&!Y.path)Y.reference="same-document";else if(Y.scheme===void 0)Y.reference="relative";else if(Y.fragment===void 0)Y.reference="absolute";else Y.reference="uri";if($.reference&&$.reference!=="suffix"&&$.reference!==Y.reference)Y.error=Y.error||"URI is not a "+$.reference+" reference.";let H=ZY[($.scheme||Y.scheme||"").toLowerCase()];if(!$.unicodeSupport&&(!H||!H.unicodeSupport)){if(Y.host&&($.domainHost||H&&H.domainHost)&&J===!1&&bw(Y.host))try{Y.host=URL.domainToASCII(Y.host.toLowerCase())}catch(B){Y.error=Y.error||"Host's domain name can not be converted to ASCII: "+B}}if(!H||H&&!H.skipNormalize){if(W&&Y.scheme!==void 0)Y.scheme=unescape(Y.scheme);if(W&&Y.host!==void 0)Y.host=unescape(Y.host);if(Y.path)Y.path=escape(unescape(Y.path));if(Y.fragment)Y.fragment=encodeURI(decodeURIComponent(Y.fragment))}if(H&&H.parse)H.parse(Y,$)}else Y.error=Y.error||"URI can not be parsed.";return Y}var CY={SCHEMES:ZY,normalize:jw,resolve:Rw,resolveComponents:LH,equal:Iw,serialize:V1,parse:E1};g8.exports=CY;g8.exports.default=CY;g8.exports.fastUri=CY});var OH=P((NH)=>{Object.defineProperty(NH,"__esModule",{value:!0});var FH=qH();FH.code='require("ajv/dist/runtime/uri").default';NH.default=FH});var EH=P((b1)=>{Object.defineProperty(b1,"__esModule",{value:!0});b1.CodeGen=b1.Name=b1.nil=b1.stringify=b1.str=b1._=b1.KeywordCxt=void 0;var Zw=iX();Object.defineProperty(b1,"KeywordCxt",{enumerable:!0,get:function(){return Zw.KeywordCxt}});var p6=c();Object.defineProperty(b1,"_",{enumerable:!0,get:function(){return p6._}});Object.defineProperty(b1,"str",{enumerable:!0,get:function(){return p6.str}});Object.defineProperty(b1,"stringify",{enumerable:!0,get:function(){return p6.stringify}});Object.defineProperty(b1,"nil",{enumerable:!0,get:function(){return p6.nil}});Object.defineProperty(b1,"Name",{enumerable:!0,get:function(){return p6.Name}});Object.defineProperty(b1,"CodeGen",{enumerable:!0,get:function(){return p6.CodeGen}});var Cw=v8(),jH=nX(),kw=KY(),tX=_8(),vw=c(),aX=cX(),f8=mX(),vY=e(),DH=t3(),Tw=OH(),RH=(X,Q)=>new RegExp(X,Q);RH.code="new RegExp";var _w=["removeAdditional","useDefaults","coerceTypes"],xw=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),yw={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},gw={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},AH=200;function fw(X){var Q,$,Y,W,J,G,H,B,z,K,V,L,U,F,q,N,A,M,R,S,C,K0,U0,s,D0;let q0=X.strict,W1=(Q=X.code)===null||Q===void 0?void 0:Q.optimize,P1=W1===!0||W1===void 0?1:W1||0,U6=(Y=($=X.code)===null||$===void 0?void 0:$.regExp)!==null&&Y!==void 0?Y:RH,d=(W=X.uriResolver)!==null&&W!==void 0?W:Tw.default;return{strictSchema:(G=(J=X.strictSchema)!==null&&J!==void 0?J:q0)!==null&&G!==void 0?G:!0,strictNumbers:(B=(H=X.strictNumbers)!==null&&H!==void 0?H:q0)!==null&&B!==void 0?B:!0,strictTypes:(K=(z=X.strictTypes)!==null&&z!==void 0?z:q0)!==null&&K!==void 0?K:"log",strictTuples:(L=(V=X.strictTuples)!==null&&V!==void 0?V:q0)!==null&&L!==void 0?L:"log",strictRequired:(F=(U=X.strictRequired)!==null&&U!==void 0?U:q0)!==null&&F!==void 0?F:!1,code:X.code?{...X.code,optimize:P1,regExp:U6}:{optimize:P1,regExp:U6},loopRequired:(q=X.loopRequired)!==null&&q!==void 0?q:AH,loopEnum:(N=X.loopEnum)!==null&&N!==void 0?N:AH,meta:(A=X.meta)!==null&&A!==void 0?A:!0,messages:(M=X.messages)!==null&&M!==void 0?M:!0,inlineRefs:(R=X.inlineRefs)!==null&&R!==void 0?R:!0,schemaId:(S=X.schemaId)!==null&&S!==void 0?S:"$id",addUsedSchema:(C=X.addUsedSchema)!==null&&C!==void 0?C:!0,validateSchema:(K0=X.validateSchema)!==null&&K0!==void 0?K0:!0,validateFormats:(U0=X.validateFormats)!==null&&U0!==void 0?U0:!0,unicodeRegExp:(s=X.unicodeRegExp)!==null&&s!==void 0?s:!0,int32range:(D0=X.int32range)!==null&&D0!==void 0?D0:!0,uriResolver:d}}class h8{constructor(X={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,X=this.opts={...X,...fw(X)};let{es5:Q,lines:$}=this.opts.code;this.scope=new vw.ValueScope({scope:{},prefixes:xw,es5:Q,lines:$}),this.logger=pw(X.logger);let Y=X.validateFormats;if(X.validateFormats=!1,this.RULES=(0,kw.getRules)(),wH.call(this,yw,X,"NOT SUPPORTED"),wH.call(this,gw,X,"DEPRECATED","warn"),this._metaOpts=mw.call(this),X.formats)uw.call(this);if(this._addVocabularies(),this._addDefaultMetaSchema(),X.keywords)lw.call(this,X.keywords);if(typeof X.meta=="object")this.addMetaSchema(X.meta);hw.call(this),X.validateFormats=Y}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:X,meta:Q,schemaId:$}=this.opts,Y=DH;if($==="id")Y={...DH},Y.id=Y.$id,delete Y.$id;if(Q&&X)this.addMetaSchema(Y,Y[$],!1)}defaultMeta(){let{meta:X,schemaId:Q}=this.opts;return this.opts.defaultMeta=typeof X=="object"?X[Q]||X:void 0}validate(X,Q){let $;if(typeof X=="string"){if($=this.getSchema(X),!$)throw Error(`no schema with key or ref "${X}"`)}else $=this.compile(X);let Y=$(Q);if(!("$async"in $))this.errors=$.errors;return Y}compile(X,Q){let $=this._addSchema(X,Q);return $.validate||this._compileSchemaEnv($)}compileAsync(X,Q){if(typeof this.opts.loadSchema!="function")throw Error("options.loadSchema should be a function");let{loadSchema:$}=this.opts;return Y.call(this,X,Q);async function Y(z,K){await W.call(this,z.$schema);let V=this._addSchema(z,K);return V.validate||J.call(this,V)}async function W(z){if(z&&!this.getSchema(z))await Y.call(this,{$ref:z},!0)}async function J(z){try{return this._compileSchemaEnv(z)}catch(K){if(!(K instanceof jH.default))throw K;return G.call(this,K),await H.call(this,K.missingSchema),J.call(this,z)}}function G({missingSchema:z,missingRef:K}){if(this.refs[z])throw Error(`AnySchema ${z} is loaded but ${K} cannot be resolved`)}async function H(z){let K=await B.call(this,z);if(!this.refs[z])await W.call(this,K.$schema);if(!this.refs[z])this.addSchema(K,z,Q)}async function B(z){let K=this._loading[z];if(K)return K;try{return await(this._loading[z]=$(z))}finally{delete this._loading[z]}}}addSchema(X,Q,$,Y=this.opts.validateSchema){if(Array.isArray(X)){for(let J of X)this.addSchema(J,void 0,$,Y);return this}let W;if(typeof X==="object"){let{schemaId:J}=this.opts;if(W=X[J],W!==void 0&&typeof W!="string")throw Error(`schema ${J} must be string`)}return Q=(0,aX.normalizeId)(Q||W),this._checkUnique(Q),this.schemas[Q]=this._addSchema(X,$,Q,Y,!0),this}addMetaSchema(X,Q,$=this.opts.validateSchema){return this.addSchema(X,Q,!0,$),this}validateSchema(X,Q){if(typeof X=="boolean")return!0;let $;if($=X.$schema,$!==void 0&&typeof $!="string")throw Error("$schema must be a string");if($=$||this.opts.defaultMeta||this.defaultMeta(),!$)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let Y=this.validate($,X);if(!Y&&Q){let W="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(W);else throw Error(W)}return Y}getSchema(X){let Q;while(typeof(Q=MH.call(this,X))=="string")X=Q;if(Q===void 0){let{schemaId:$}=this.opts,Y=new tX.SchemaEnv({schema:{},schemaId:$});if(Q=tX.resolveSchema.call(this,Y,X),!Q)return;this.refs[X]=Q}return Q.validate||this._compileSchemaEnv(Q)}removeSchema(X){if(X instanceof RegExp)return this._removeAllSchemas(this.schemas,X),this._removeAllSchemas(this.refs,X),this;switch(typeof X){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let Q=MH.call(this,X);if(typeof Q=="object")this._cache.delete(Q.schema);return delete this.schemas[X],delete this.refs[X],this}case"object":{let Q=X;this._cache.delete(Q);let $=X[this.opts.schemaId];if($)$=(0,aX.normalizeId)($),delete this.schemas[$],delete this.refs[$];return this}default:throw Error("ajv.removeSchema: invalid parameter")}}addVocabulary(X){for(let Q of X)this.addKeyword(Q);return this}addKeyword(X,Q){let $;if(typeof X=="string"){if($=X,typeof Q=="object")this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Q.keyword=$}else if(typeof X=="object"&&Q===void 0){if(Q=X,$=Q.keyword,Array.isArray($)&&!$.length)throw Error("addKeywords: keyword must be string or non-empty array")}else throw Error("invalid addKeywords parameters");if(iw.call(this,$,Q),!Q)return(0,vY.eachItem)($,(W)=>kY.call(this,W)),this;rw.call(this,Q);let Y={...Q,type:(0,f8.getJSONTypes)(Q.type),schemaType:(0,f8.getJSONTypes)(Q.schemaType)};return(0,vY.eachItem)($,Y.type.length===0?(W)=>kY.call(this,W,Y):(W)=>Y.type.forEach((J)=>kY.call(this,W,Y,J))),this}getKeyword(X){let Q=this.RULES.all[X];return typeof Q=="object"?Q.definition:!!Q}removeKeyword(X){let{RULES:Q}=this;delete Q.keywords[X],delete Q.all[X];for(let $ of Q.rules){let Y=$.rules.findIndex((W)=>W.keyword===X);if(Y>=0)$.rules.splice(Y,1)}return this}addFormat(X,Q){if(typeof Q=="string")Q=new RegExp(Q);return this.formats[X]=Q,this}errorsText(X=this.errors,{separator:Q=", ",dataVar:$="data"}={}){if(!X||X.length===0)return"No errors";return X.map((Y)=>`${$}${Y.instancePath} ${Y.message}`).reduce((Y,W)=>Y+Q+W)}$dataMetaSchema(X,Q){let $=this.RULES.all;X=JSON.parse(JSON.stringify(X));for(let Y of Q){let W=Y.split("/").slice(1),J=X;for(let G of W)J=J[G];for(let G in $){let H=$[G];if(typeof H!="object")continue;let{$data:B}=H.definition,z=J[G];if(B&&z)J[G]=IH(z)}}return X}_removeAllSchemas(X,Q){for(let $ in X){let Y=X[$];if(!Q||Q.test($)){if(typeof Y=="string")delete X[$];else if(Y&&!Y.meta)this._cache.delete(Y.schema),delete X[$]}}}_addSchema(X,Q,$,Y=this.opts.validateSchema,W=this.opts.addUsedSchema){let J,{schemaId:G}=this.opts;if(typeof X=="object")J=X[G];else if(this.opts.jtd)throw Error("schema must be object");else if(typeof X!="boolean")throw Error("schema must be object or boolean");let H=this._cache.get(X);if(H!==void 0)return H;$=(0,aX.normalizeId)(J||$);let B=aX.getSchemaRefs.call(this,X,$);if(H=new tX.SchemaEnv({schema:X,schemaId:G,meta:Q,baseId:$,localRefs:B}),this._cache.set(H.schema,H),W&&!$.startsWith("#")){if($)this._checkUnique($);this.refs[$]=H}if(Y)this.validateSchema(X,!0);return H}_checkUnique(X){if(this.schemas[X]||this.refs[X])throw Error(`schema with key or id "${X}" already exists`)}_compileSchemaEnv(X){if(X.meta)this._compileMetaSchema(X);else tX.compileSchema.call(this,X);if(!X.validate)throw Error("ajv implementation error");return X.validate}_compileMetaSchema(X){let Q=this.opts;this.opts=this._metaOpts;try{tX.compileSchema.call(this,X)}finally{this.opts=Q}}}h8.ValidationError=Cw.default;h8.MissingRefError=jH.default;b1.default=h8;function wH(X,Q,$,Y="error"){for(let W in X){let J=W;if(J in Q)this.logger[Y](`${$}: option ${W}. ${X[J]}`)}}function MH(X){return X=(0,aX.normalizeId)(X),this.schemas[X]||this.refs[X]}function hw(){let X=this.opts.schemas;if(!X)return;if(Array.isArray(X))this.addSchema(X);else for(let Q in X)this.addSchema(X[Q],Q)}function uw(){for(let X in this.opts.formats){let Q=this.opts.formats[X];if(Q)this.addFormat(X,Q)}}function lw(X){if(Array.isArray(X)){this.addVocabulary(X);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let Q in X){let $=X[Q];if(!$.keyword)$.keyword=Q;this.addKeyword($)}}function mw(){let X={...this.opts};for(let Q of _w)delete X[Q];return X}var cw={log(){},warn(){},error(){}};function pw(X){if(X===!1)return cw;if(X===void 0)return console;if(X.log&&X.warn&&X.error)return X;throw Error("logger must implement log, warn and error methods")}var dw=/^[a-z_$][a-z0-9_$:-]*$/i;function iw(X,Q){let{RULES:$}=this;if((0,vY.eachItem)(X,(Y)=>{if($.keywords[Y])throw Error(`Keyword ${Y} is already defined`);if(!dw.test(Y))throw Error(`Keyword ${Y} has invalid name`)}),!Q)return;if(Q.$data&&!(("code"in Q)||("validate"in Q)))throw Error('$data keyword must have "code" or "validate" function')}function kY(X,Q,$){var Y;let W=Q===null||Q===void 0?void 0:Q.post;if($&&W)throw Error('keyword with "post" flag cannot have "type"');let{RULES:J}=this,G=W?J.post:J.rules.find(({type:B})=>B===$);if(!G)G={type:$,rules:[]},J.rules.push(G);if(J.keywords[X]=!0,!Q)return;let H={keyword:X,definition:{...Q,type:(0,f8.getJSONTypes)(Q.type),schemaType:(0,f8.getJSONTypes)(Q.schemaType)}};if(Q.before)nw.call(this,G,H,Q.before);else G.rules.push(H);J.all[X]=H,(Y=Q.implements)===null||Y===void 0||Y.forEach((B)=>this.addKeyword(B))}function nw(X,Q,$){let Y=X.rules.findIndex((W)=>W.keyword===$);if(Y>=0)X.rules.splice(Y,0,Q);else X.rules.push(Q),this.logger.warn(`rule ${$} is not defined`)}function rw(X){let{metaSchema:Q}=X;if(Q===void 0)return;if(X.$data&&this.opts.$data)Q=IH(Q);X.validateSchema=this.compile(Q,!0)}var ow={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function IH(X){return{anyOf:[X,ow]}}});var PH=P((bH)=>{Object.defineProperty(bH,"__esModule",{value:!0});var sw={keyword:"id",code(){throw Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};bH.default=sw});var TH=P((kH)=>{Object.defineProperty(kH,"__esModule",{value:!0});kH.callRef=kH.getValidate=void 0;var XM=nX(),SH=d0(),g0=c(),d6=R1(),ZH=_8(),u8=e(),QM={keyword:"$ref",schemaType:"string",code(X){let{gen:Q,schema:$,it:Y}=X,{baseId:W,schemaEnv:J,validateName:G,opts:H,self:B}=Y,{root:z}=J;if(($==="#"||$==="#/")&&W===z.baseId)return V();let K=ZH.resolveRef.call(B,z,W,$);if(K===void 0)throw new XM.default(Y.opts.uriResolver,W,$);if(K instanceof ZH.SchemaEnv)return L(K);return U(K);function V(){if(J===z)return l8(X,G,J,J.$async);let F=Q.scopeValue("root",{ref:z});return l8(X,g0._`${F}.validate`,z,z.$async)}function L(F){let q=CH(X,F);l8(X,q,F,F.$async)}function U(F){let q=Q.scopeValue("schema",H.code.source===!0?{ref:F,code:(0,g0.stringify)(F)}:{ref:F}),N=Q.name("valid"),A=X.subschema({schema:F,dataTypes:[],schemaPath:g0.nil,topSchemaRef:q,errSchemaPath:$},N);X.mergeEvaluated(A),X.ok(N)}}};function CH(X,Q){let{gen:$}=X;return Q.validate?$.scopeValue("validate",{ref:Q.validate}):g0._`${$.scopeValue("wrapper",{ref:Q})}.validate`}kH.getValidate=CH;function l8(X,Q,$,Y){let{gen:W,it:J}=X,{allErrors:G,schemaEnv:H,opts:B}=J,z=B.passContext?d6.default.this:g0.nil;if(Y)K();else V();function K(){if(!H.$async)throw Error("async schema referenced by sync schema");let F=W.let("valid");W.try(()=>{if(W.code(g0._`await ${(0,SH.callValidateCode)(X,Q,z)}`),U(Q),!G)W.assign(F,!0)},(q)=>{if(W.if(g0._`!(${q} instanceof ${J.ValidationError})`,()=>W.throw(q)),L(q),!G)W.assign(F,!1)}),X.ok(F)}function V(){X.result((0,SH.callValidateCode)(X,Q,z),()=>U(Q),()=>L(Q))}function L(F){let q=g0._`${F}.errors`;W.assign(d6.default.vErrors,g0._`${d6.default.vErrors} === null ? ${q} : ${d6.default.vErrors}.concat(${q})`),W.assign(d6.default.errors,g0._`${d6.default.vErrors}.length`)}function U(F){var q;if(!J.opts.unevaluated)return;let N=(q=$===null||$===void 0?void 0:$.validate)===null||q===void 0?void 0:q.evaluated;if(J.props!==!0)if(N&&!N.dynamicProps){if(N.props!==void 0)J.props=u8.mergeEvaluated.props(W,N.props,J.props)}else{let A=W.var("props",g0._`${F}.evaluated.props`);J.props=u8.mergeEvaluated.props(W,A,J.props,g0.Name)}if(J.items!==!0)if(N&&!N.dynamicItems){if(N.items!==void 0)J.items=u8.mergeEvaluated.items(W,N.items,J.items)}else{let A=W.var("items",g0._`${F}.evaluated.items`);J.items=u8.mergeEvaluated.items(W,A,J.items,g0.Name)}}}kH.callRef=l8;kH.default=QM});var xH=P((_H)=>{Object.defineProperty(_H,"__esModule",{value:!0});var WM=PH(),JM=TH(),GM=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",WM.default,JM.default];_H.default=GM});var gH=P((yH)=>{Object.defineProperty(yH,"__esModule",{value:!0});var m8=c(),i1=m8.operators,c8={maximum:{okStr:"<=",ok:i1.LTE,fail:i1.GT},minimum:{okStr:">=",ok:i1.GTE,fail:i1.LT},exclusiveMaximum:{okStr:"<",ok:i1.LT,fail:i1.GTE},exclusiveMinimum:{okStr:">",ok:i1.GT,fail:i1.LTE}},BM={message:({keyword:X,schemaCode:Q})=>m8.str`must be ${c8[X].okStr} ${Q}`,params:({keyword:X,schemaCode:Q})=>m8._`{comparison: ${c8[X].okStr}, limit: ${Q}}`},zM={keyword:Object.keys(c8),type:"number",schemaType:"number",$data:!0,error:BM,code(X){let{keyword:Q,data:$,schemaCode:Y}=X;X.fail$data(m8._`${$} ${c8[Q].fail} ${Y} || isNaN(${$})`)}};yH.default=zM});var hH=P((fH)=>{Object.defineProperty(fH,"__esModule",{value:!0});var sX=c(),UM={message:({schemaCode:X})=>sX.str`must be multiple of ${X}`,params:({schemaCode:X})=>sX._`{multipleOf: ${X}}`},VM={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:UM,code(X){let{gen:Q,data:$,schemaCode:Y,it:W}=X,J=W.opts.multipleOfPrecision,G=Q.let("res"),H=J?sX._`Math.abs(Math.round(${G}) - ${G}) > 1e-${J}`:sX._`${G} !== parseInt(${G})`;X.fail$data(sX._`(${Y} === 0 || (${G} = ${$}/${Y}, ${H}))`)}};fH.default=VM});var mH=P((lH)=>{Object.defineProperty(lH,"__esModule",{value:!0});function uH(X){let Q=X.length,$=0,Y=0,W;while(Y<Q)if($++,W=X.charCodeAt(Y++),W>=55296&&W<=56319&&Y<Q){if(W=X.charCodeAt(Y),(W&64512)===56320)Y++}return $}lH.default=uH;uH.code='require("ajv/dist/runtime/ucs2length").default'});var pH=P((cH)=>{Object.defineProperty(cH,"__esModule",{value:!0});var z6=c(),FM=e(),NM=mH(),OM={message({keyword:X,schemaCode:Q}){let $=X==="maxLength"?"more":"fewer";return z6.str`must NOT have ${$} than ${Q} characters`},params:({schemaCode:X})=>z6._`{limit: ${X}}`},DM={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:OM,code(X){let{keyword:Q,data:$,schemaCode:Y,it:W}=X,J=Q==="maxLength"?z6.operators.GT:z6.operators.LT,G=W.opts.unicode===!1?z6._`${$}.length`:z6._`${(0,FM.useFunc)(X.gen,NM.default)}(${$})`;X.fail$data(z6._`${G} ${J} ${Y}`)}};cH.default=DM});var iH=P((dH)=>{Object.defineProperty(dH,"__esModule",{value:!0});var wM=d0(),p8=c(),MM={message:({schemaCode:X})=>p8.str`must match pattern "${X}"`,params:({schemaCode:X})=>p8._`{pattern: ${X}}`},jM={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:MM,code(X){let{data:Q,$data:$,schema:Y,schemaCode:W,it:J}=X,G=J.opts.unicodeRegExp?"u":"",H=$?p8._`(new RegExp(${W}, ${G}))`:(0,wM.usePattern)(X,Y);X.fail$data(p8._`!${H}.test(${Q})`)}};dH.default=jM});var rH=P((nH)=>{Object.defineProperty(nH,"__esModule",{value:!0});var eX=c(),IM={message({keyword:X,schemaCode:Q}){let $=X==="maxProperties"?"more":"fewer";return eX.str`must NOT have ${$} than ${Q} properties`},params:({schemaCode:X})=>eX._`{limit: ${X}}`},EM={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:IM,code(X){let{keyword:Q,data:$,schemaCode:Y}=X,W=Q==="maxProperties"?eX.operators.GT:eX.operators.LT;X.fail$data(eX._`Object.keys(${$}).length ${W} ${Y}`)}};nH.default=EM});var tH=P((oH)=>{Object.defineProperty(oH,"__esModule",{value:!0});var X4=d0(),Q4=c(),PM=e(),SM={message:({params:{missingProperty:X}})=>Q4.str`must have required property '${X}'`,params:({params:{missingProperty:X}})=>Q4._`{missingProperty: ${X}}`},ZM={keyword:"required",type:"object",schemaType:"array",$data:!0,error:SM,code(X){let{gen:Q,schema:$,schemaCode:Y,data:W,$data:J,it:G}=X,{opts:H}=G;if(!J&&$.length===0)return;let B=$.length>=H.loopRequired;if(G.allErrors)z();else K();if(H.strictRequired){let U=X.parentSchema.properties,{definedProperties:F}=X.it;for(let q of $)if((U===null||U===void 0?void 0:U[q])===void 0&&!F.has(q)){let N=G.schemaEnv.baseId+G.errSchemaPath,A=`required property "${q}" is not defined at "${N}" (strictRequired)`;(0,PM.checkStrictMode)(G,A,G.opts.strictRequired)}}function z(){if(B||J)X.block$data(Q4.nil,V);else for(let U of $)(0,X4.checkReportMissingProp)(X,U)}function K(){let U=Q.let("missing");if(B||J){let F=Q.let("valid",!0);X.block$data(F,()=>L(U,F)),X.ok(F)}else Q.if((0,X4.checkMissingProp)(X,$,U)),(0,X4.reportMissingProp)(X,U),Q.else()}function V(){Q.forOf("prop",Y,(U)=>{X.setParams({missingProperty:U}),Q.if((0,X4.noPropertyInData)(Q,W,U,H.ownProperties),()=>X.error())})}function L(U,F){X.setParams({missingProperty:U}),Q.forOf(U,Y,()=>{Q.assign(F,(0,X4.propertyInData)(Q,W,U,H.ownProperties)),Q.if((0,Q4.not)(F),()=>{X.error(),Q.break()})},Q4.nil)}}};oH.default=ZM});var sH=P((aH)=>{Object.defineProperty(aH,"__esModule",{value:!0});var $4=c(),kM={message({keyword:X,schemaCode:Q}){let $=X==="maxItems"?"more":"fewer";return $4.str`must NOT have ${$} than ${Q} items`},params:({schemaCode:X})=>$4._`{limit: ${X}}`},vM={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:kM,code(X){let{keyword:Q,data:$,schemaCode:Y}=X,W=Q==="maxItems"?$4.operators.GT:$4.operators.LT;X.fail$data($4._`${$}.length ${W} ${Y}`)}};aH.default=vM});var d8=P((XB)=>{Object.defineProperty(XB,"__esModule",{value:!0});var eH=DY();eH.code='require("ajv/dist/runtime/equal").default';XB.default=eH});var $B=P((QB)=>{Object.defineProperty(QB,"__esModule",{value:!0});var TY=mX(),I0=c(),xM=e(),yM=d8(),gM={message:({params:{i:X,j:Q}})=>I0.str`must NOT have duplicate items (items ## ${Q} and ${X} are identical)`,params:({params:{i:X,j:Q}})=>I0._`{i: ${X}, j: ${Q}}`},fM={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:gM,code(X){let{gen:Q,data:$,$data:Y,schema:W,parentSchema:J,schemaCode:G,it:H}=X;if(!Y&&!W)return;let B=Q.let("valid"),z=J.items?(0,TY.getSchemaTypes)(J.items):[];X.block$data(B,K,I0._`${G} === false`),X.ok(B);function K(){let F=Q.let("i",I0._`${$}.length`),q=Q.let("j");X.setParams({i:F,j:q}),Q.assign(B,!0),Q.if(I0._`${F} > 1`,()=>(V()?L:U)(F,q))}function V(){return z.length>0&&!z.some((F)=>F==="object"||F==="array")}function L(F,q){let N=Q.name("item"),A=(0,TY.checkDataTypes)(z,N,H.opts.strictNumbers,TY.DataType.Wrong),M=Q.const("indices",I0._`{}`);Q.for(I0._`;${F}--;`,()=>{if(Q.let(N,I0._`${$}[${F}]`),Q.if(A,I0._`continue`),z.length>1)Q.if(I0._`typeof ${N} == "string"`,I0._`${N} += "_"`);Q.if(I0._`typeof ${M}[${N}] == "number"`,()=>{Q.assign(q,I0._`${M}[${N}]`),X.error(),Q.assign(B,!1).break()}).code(I0._`${M}[${N}] = ${F}`)})}function U(F,q){let N=(0,xM.useFunc)(Q,yM.default),A=Q.name("outer");Q.label(A).for(I0._`;${F}--;`,()=>Q.for(I0._`${q} = ${F}; ${q}--;`,()=>Q.if(I0._`${N}(${$}[${F}], ${$}[${q}])`,()=>{X.error(),Q.assign(B,!1).break(A)})))}}};QB.default=fM});var WB=P((YB)=>{Object.defineProperty(YB,"__esModule",{value:!0});var _Y=c(),uM=e(),lM=d8(),mM={message:"must be equal to constant",params:({schemaCode:X})=>_Y._`{allowedValue: ${X}}`},cM={keyword:"const",$data:!0,error:mM,code(X){let{gen:Q,data:$,$data:Y,schemaCode:W,schema:J}=X;if(Y||J&&typeof J=="object")X.fail$data(_Y._`!${(0,uM.useFunc)(Q,lM.default)}(${$}, ${W})`);else X.fail(_Y._`${J} !== ${$}`)}};YB.default=cM});var GB=P((JB)=>{Object.defineProperty(JB,"__esModule",{value:!0});var Y4=c(),dM=e(),iM=d8(),nM={message:"must be equal to one of the allowed values",params:({schemaCode:X})=>Y4._`{allowedValues: ${X}}`},rM={keyword:"enum",schemaType:"array",$data:!0,error:nM,code(X){let{gen:Q,data:$,$data:Y,schema:W,schemaCode:J,it:G}=X;if(!Y&&W.length===0)throw Error("enum must have non-empty array");let H=W.length>=G.opts.loopEnum,B,z=()=>B!==null&&B!==void 0?B:B=(0,dM.useFunc)(Q,iM.default),K;if(H||Y)K=Q.let("valid"),X.block$data(K,V);else{if(!Array.isArray(W))throw Error("ajv implementation error");let U=Q.const("vSchema",J);K=(0,Y4.or)(...W.map((F,q)=>L(U,q)))}X.pass(K);function V(){Q.assign(K,!1),Q.forOf("v",J,(U)=>Q.if(Y4._`${z()}(${$}, ${U})`,()=>Q.assign(K,!0).break()))}function L(U,F){let q=W[F];return typeof q==="object"&&q!==null?Y4._`${z()}(${$}, ${U}[${F}])`:Y4._`${$} === ${q}`}}};JB.default=rM});var BB=P((HB)=>{Object.defineProperty(HB,"__esModule",{value:!0});var tM=gH(),aM=hH(),sM=pH(),eM=iH(),Xj=rH(),Qj=tH(),$j=sH(),Yj=$B(),Wj=WB(),Jj=GB(),Gj=[tM.default,aM.default,sM.default,eM.default,Xj.default,Qj.default,$j.default,Yj.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Wj.default,Jj.default];HB.default=Gj});var yY=P((KB)=>{Object.defineProperty(KB,"__esModule",{value:!0});KB.validateAdditionalItems=void 0;var K6=c(),xY=e(),Bj={message:({params:{len:X}})=>K6.str`must NOT have more than ${X} items`,params:({params:{len:X}})=>K6._`{limit: ${X}}`},zj={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Bj,code(X){let{parentSchema:Q,it:$}=X,{items:Y}=Q;if(!Array.isArray(Y)){(0,xY.checkStrictMode)($,'"additionalItems" is ignored when "items" is not an array of schemas');return}zB(X,Y)}};function zB(X,Q){let{gen:$,schema:Y,data:W,keyword:J,it:G}=X;G.items=!0;let H=$.const("len",K6._`${W}.length`);if(Y===!1)X.setParams({len:Q.length}),X.pass(K6._`${H} <= ${Q.length}`);else if(typeof Y=="object"&&!(0,xY.alwaysValidSchema)(G,Y)){let z=$.var("valid",K6._`${H} <= ${Q.length}`);$.if((0,K6.not)(z),()=>B(z)),X.ok(z)}function B(z){$.forRange("i",Q.length,H,(K)=>{if(X.subschema({keyword:J,dataProp:K,dataPropType:xY.Type.Num},z),!G.allErrors)$.if((0,K6.not)(z),()=>$.break())})}}KB.validateAdditionalItems=zB;KB.default=zj});var gY=P((qB)=>{Object.defineProperty(qB,"__esModule",{value:!0});qB.validateTuple=void 0;var VB=c(),i8=e(),Uj=d0(),Vj={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(X){let{schema:Q,it:$}=X;if(Array.isArray(Q))return LB(X,"additionalItems",Q);if($.items=!0,(0,i8.alwaysValidSchema)($,Q))return;X.ok((0,Uj.validateArray)(X))}};function LB(X,Q,$=X.schema){let{gen:Y,parentSchema:W,data:J,keyword:G,it:H}=X;if(K(W),H.opts.unevaluated&&$.length&&H.items!==!0)H.items=i8.mergeEvaluated.items(Y,$.length,H.items);let B=Y.name("valid"),z=Y.const("len",VB._`${J}.length`);$.forEach((V,L)=>{if((0,i8.alwaysValidSchema)(H,V))return;Y.if(VB._`${z} > ${L}`,()=>X.subschema({keyword:G,schemaProp:L,dataProp:L},B)),X.ok(B)});function K(V){let{opts:L,errSchemaPath:U}=H,F=$.length,q=F===V.minItems&&(F===V.maxItems||V[Q]===!1);if(L.strictTuples&&!q){let N=`"${G}" is ${F}-tuple, but minItems or maxItems/${Q} are not specified or different at path "${U}"`;(0,i8.checkStrictMode)(H,N,L.strictTuples)}}}qB.validateTuple=LB;qB.default=Vj});var OB=P((NB)=>{Object.defineProperty(NB,"__esModule",{value:!0});var qj=gY(),Fj={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:(X)=>(0,qj.validateTuple)(X,"items")};NB.default=Fj});var wB=P((AB)=>{Object.defineProperty(AB,"__esModule",{value:!0});var DB=c(),Oj=e(),Dj=d0(),Aj=yY(),wj={message:({params:{len:X}})=>DB.str`must NOT have more than ${X} items`,params:({params:{len:X}})=>DB._`{limit: ${X}}`},Mj={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:wj,code(X){let{schema:Q,parentSchema:$,it:Y}=X,{prefixItems:W}=$;if(Y.items=!0,(0,Oj.alwaysValidSchema)(Y,Q))return;if(W)(0,Aj.validateAdditionalItems)(X,W);else X.ok((0,Dj.validateArray)(X))}};AB.default=Mj});var jB=P((MB)=>{Object.defineProperty(MB,"__esModule",{value:!0});var i0=c(),n8=e(),Rj={message:({params:{min:X,max:Q}})=>Q===void 0?i0.str`must contain at least ${X} valid item(s)`:i0.str`must contain at least ${X} and no more than ${Q} valid item(s)`,params:({params:{min:X,max:Q}})=>Q===void 0?i0._`{minContains: ${X}}`:i0._`{minContains: ${X}, maxContains: ${Q}}`},Ij={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Rj,code(X){let{gen:Q,schema:$,parentSchema:Y,data:W,it:J}=X,G,H,{minContains:B,maxContains:z}=Y;if(J.opts.next)G=B===void 0?1:B,H=z;else G=1;let K=Q.const("len",i0._`${W}.length`);if(X.setParams({min:G,max:H}),H===void 0&&G===0){(0,n8.checkStrictMode)(J,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(H!==void 0&&G>H){(0,n8.checkStrictMode)(J,'"minContains" > "maxContains" is always invalid'),X.fail();return}if((0,n8.alwaysValidSchema)(J,$)){let q=i0._`${K} >= ${G}`;if(H!==void 0)q=i0._`${q} && ${K} <= ${H}`;X.pass(q);return}J.items=!0;let V=Q.name("valid");if(H===void 0&&G===1)U(V,()=>Q.if(V,()=>Q.break()));else if(G===0){if(Q.let(V,!0),H!==void 0)Q.if(i0._`${W}.length > 0`,L)}else Q.let(V,!1),L();X.result(V,()=>X.reset());function L(){let q=Q.name("_valid"),N=Q.let("count",0);U(q,()=>Q.if(q,()=>F(N)))}function U(q,N){Q.forRange("i",0,K,(A)=>{X.subschema({keyword:"contains",dataProp:A,dataPropType:n8.Type.Num,compositeRule:!0},q),N()})}function F(q){if(Q.code(i0._`${q}++`),H===void 0)Q.if(i0._`${q} >= ${G}`,()=>Q.assign(V,!0).break());else if(Q.if(i0._`${q} > ${H}`,()=>Q.assign(V,!1).break()),G===1)Q.assign(V,!0);else Q.if(i0._`${q} >= ${G}`,()=>Q.assign(V,!0))}}};MB.default=Ij});var SB=P((EB)=>{Object.defineProperty(EB,"__esModule",{value:!0});EB.validateSchemaDeps=EB.validatePropertyDeps=EB.error=void 0;var fY=c(),bj=e(),W4=d0();EB.error={message:({params:{property:X,depsCount:Q,deps:$}})=>{let Y=Q===1?"property":"properties";return fY.str`must have ${Y} ${$} when property ${X} is present`},params:({params:{property:X,depsCount:Q,deps:$,missingProperty:Y}})=>fY._`{property: ${X},
     missingProperty: ${Y},
     depsCount: ${Q},
-    deps: ${$}}`};var Pj={keyword:"dependencies",type:"object",schemaType:"object",error:EB.error,code(X){let[Q,$]=Sj(X);RB(X,Q),IB(X,$)}};function Sj({schema:X}){let Q={},$={};for(let Y in X){if(Y==="__proto__")continue;let W=Array.isArray(X[Y])?Q:$;W[Y]=X[Y]}return[Q,$]}function RB(X,Q=X.schema){let{gen:$,data:Y,it:W}=X;if(Object.keys(Q).length===0)return;let J=$.let("missing");for(let G in Q){let H=Q[G];if(H.length===0)continue;let B=(0,W4.propertyInData)($,Y,G,W.opts.ownProperties);if(X.setParams({property:G,depsCount:H.length,deps:H.join(", ")}),W.allErrors)$.if(B,()=>{for(let z of H)(0,W4.checkReportMissingProp)(X,z)});else $.if(fY._`${B} && (${(0,W4.checkMissingProp)(X,H,J)})`),(0,W4.reportMissingProp)(X,J),$.else()}}EB.validatePropertyDeps=RB;function IB(X,Q=X.schema){let{gen:$,data:Y,keyword:W,it:J}=X,G=$.name("valid");for(let H in Q){if((0,bj.alwaysValidSchema)(J,Q[H]))continue;$.if((0,W4.propertyInData)($,Y,H,J.opts.ownProperties),()=>{let B=X.subschema({keyword:W,schemaProp:H},G);X.mergeValidEvaluated(B,G)},()=>$.var(G,!0)),X.ok(G)}}EB.validateSchemaDeps=IB;EB.default=Pj});var kB=P((CB)=>{Object.defineProperty(CB,"__esModule",{value:!0});var ZB=c(),kj=e(),vj={message:"property name must be valid",params:({params:X})=>ZB._`{propertyName: ${X.propertyName}}`},Tj={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:vj,code(X){let{gen:Q,schema:$,data:Y,it:W}=X;if((0,kj.alwaysValidSchema)(W,$))return;let J=Q.name("valid");Q.forIn("key",Y,(G)=>{X.setParams({propertyName:G}),X.subschema({keyword:"propertyNames",data:G,dataTypes:["string"],propertyName:G,compositeRule:!0},J),Q.if((0,ZB.not)(J),()=>{if(X.error(!0),!W.allErrors)Q.break()})}),X.ok(J)}};CB.default=Tj});var hY=P((vB)=>{Object.defineProperty(vB,"__esModule",{value:!0});var r8=d0(),$1=c(),xj=R1(),o8=e(),yj={message:"must NOT have additional properties",params:({params:X})=>$1._`{additionalProperty: ${X.additionalProperty}}`},gj={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:yj,code(X){let{gen:Q,schema:$,parentSchema:Y,data:W,errsCount:J,it:G}=X;if(!J)throw Error("ajv implementation error");let{allErrors:H,opts:B}=G;if(G.props=!0,B.removeAdditional!=="all"&&(0,o8.alwaysValidSchema)(G,$))return;let z=(0,r8.allSchemaProperties)(Y.properties),K=(0,r8.allSchemaProperties)(Y.patternProperties);V(),X.ok($1._`${J} === ${xj.default.errors}`);function V(){Q.forIn("key",W,(N)=>{if(!z.length&&!K.length)F(N);else Q.if(L(N),()=>F(N))})}function L(N){let A;if(z.length>8){let M=(0,o8.schemaRefOrVal)(G,Y.properties,"properties");A=(0,r8.isOwnProperty)(Q,M,N)}else if(z.length)A=(0,$1.or)(...z.map((M)=>$1._`${N} === ${M}`));else A=$1.nil;if(K.length)A=(0,$1.or)(A,...K.map((M)=>$1._`${(0,r8.usePattern)(X,M)}.test(${N})`));return(0,$1.not)(A)}function U(N){Q.code($1._`delete ${W}[${N}]`)}function F(N){if(B.removeAdditional==="all"||B.removeAdditional&&$===!1){U(N);return}if($===!1){if(X.setParams({additionalProperty:N}),X.error(),!H)Q.break();return}if(typeof $=="object"&&!(0,o8.alwaysValidSchema)(G,$)){let A=Q.name("valid");if(B.removeAdditional==="failing")q(N,A,!1),Q.if((0,$1.not)(A),()=>{X.reset(),U(N)});else if(q(N,A),!H)Q.if((0,$1.not)(A),()=>Q.break())}}function q(N,A,M){let R={keyword:"additionalProperties",dataProp:N,dataPropType:o8.Type.Str};if(M===!1)Object.assign(R,{compositeRule:!0,createErrors:!1,allErrors:!1});X.subschema(R,A)}}};vB.default=gj});var yB=P((xB)=>{Object.defineProperty(xB,"__esModule",{value:!0});var hj=iX(),TB=d0(),uY=e(),_B=hY(),uj={keyword:"properties",type:"object",schemaType:"object",code(X){let{gen:Q,schema:$,parentSchema:Y,data:W,it:J}=X;if(J.opts.removeAdditional==="all"&&Y.additionalProperties===void 0)_B.default.code(new hj.KeywordCxt(J,_B.default,"additionalProperties"));let G=(0,TB.allSchemaProperties)($);for(let V of G)J.definedProperties.add(V);if(J.opts.unevaluated&&G.length&&J.props!==!0)J.props=uY.mergeEvaluated.props(Q,(0,uY.toHash)(G),J.props);let H=G.filter((V)=>!(0,uY.alwaysValidSchema)(J,$[V]));if(H.length===0)return;let B=Q.name("valid");for(let V of H){if(z(V))K(V);else{if(Q.if((0,TB.propertyInData)(Q,W,V,J.opts.ownProperties)),K(V),!J.allErrors)Q.else().var(B,!0);Q.endIf()}X.it.definedProperties.add(V),X.ok(B)}function z(V){return J.opts.useDefaults&&!J.compositeRule&&$[V].default!==void 0}function K(V){X.subschema({keyword:"properties",schemaProp:V,dataProp:V},B)}}};xB.default=uj});var lB=P((uB)=>{Object.defineProperty(uB,"__esModule",{value:!0});var gB=d0(),t8=c(),fB=e(),hB=e(),mj={keyword:"patternProperties",type:"object",schemaType:"object",code(X){let{gen:Q,schema:$,data:Y,parentSchema:W,it:J}=X,{opts:G}=J,H=(0,gB.allSchemaProperties)($),B=H.filter((q)=>(0,fB.alwaysValidSchema)(J,$[q]));if(H.length===0||B.length===H.length&&(!J.opts.unevaluated||J.props===!0))return;let z=G.strictSchema&&!G.allowMatchingProperties&&W.properties,K=Q.name("valid");if(J.props!==!0&&!(J.props instanceof t8.Name))J.props=(0,hB.evaluatedPropsToName)(Q,J.props);let{props:V}=J;L();function L(){for(let q of H){if(z)U(q);if(J.allErrors)F(q);else Q.var(K,!0),F(q),Q.if(K)}}function U(q){for(let N in z)if(new RegExp(q).test(N))(0,fB.checkStrictMode)(J,`property ${N} matches pattern ${q} (use allowMatchingProperties)`)}function F(q){Q.forIn("key",Y,(N)=>{Q.if(t8._`${(0,gB.usePattern)(X,q)}.test(${N})`,()=>{let A=B.includes(q);if(!A)X.subschema({keyword:"patternProperties",schemaProp:q,dataProp:N,dataPropType:hB.Type.Str},K);if(J.opts.unevaluated&&V!==!0)Q.assign(t8._`${V}[${N}]`,!0);else if(!A&&!J.allErrors)Q.if((0,t8.not)(K),()=>Q.break())})})}}};uB.default=mj});var cB=P((mB)=>{Object.defineProperty(mB,"__esModule",{value:!0});var pj=e(),dj={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(X){let{gen:Q,schema:$,it:Y}=X;if((0,pj.alwaysValidSchema)(Y,$)){X.fail();return}let W=Q.name("valid");X.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},W),X.failResult(W,()=>X.reset(),()=>X.error())},error:{message:"must NOT be valid"}};mB.default=dj});var dB=P((pB)=>{Object.defineProperty(pB,"__esModule",{value:!0});var nj=d0(),rj={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:nj.validateUnion,error:{message:"must match a schema in anyOf"}};pB.default=rj});var nB=P((iB)=>{Object.defineProperty(iB,"__esModule",{value:!0});var a8=c(),tj=e(),aj={message:"must match exactly one schema in oneOf",params:({params:X})=>a8._`{passingSchemas: ${X.passing}}`},sj={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:aj,code(X){let{gen:Q,schema:$,parentSchema:Y,it:W}=X;if(!Array.isArray($))throw Error("ajv implementation error");if(W.opts.discriminator&&Y.discriminator)return;let J=$,G=Q.let("valid",!1),H=Q.let("passing",null),B=Q.name("_valid");X.setParams({passing:H}),Q.block(z),X.result(G,()=>X.reset(),()=>X.error(!0));function z(){J.forEach((K,V)=>{let L;if((0,tj.alwaysValidSchema)(W,K))Q.var(B,!0);else L=X.subschema({keyword:"oneOf",schemaProp:V,compositeRule:!0},B);if(V>0)Q.if(a8._`${B} && ${G}`).assign(G,!1).assign(H,a8._`[${H}, ${V}]`).else();Q.if(B,()=>{if(Q.assign(G,!0),Q.assign(H,V),L)X.mergeEvaluated(L,a8.Name)})})}}};iB.default=sj});var oB=P((rB)=>{Object.defineProperty(rB,"__esModule",{value:!0});var XR=e(),QR={keyword:"allOf",schemaType:"array",code(X){let{gen:Q,schema:$,it:Y}=X;if(!Array.isArray($))throw Error("ajv implementation error");let W=Q.name("valid");$.forEach((J,G)=>{if((0,XR.alwaysValidSchema)(Y,J))return;let H=X.subschema({keyword:"allOf",schemaProp:G},W);X.ok(W),X.mergeEvaluated(H)})}};rB.default=QR});var eB=P((sB)=>{Object.defineProperty(sB,"__esModule",{value:!0});var s8=c(),aB=e(),YR={message:({params:X})=>s8.str`must match "${X.ifClause}" schema`,params:({params:X})=>s8._`{failingKeyword: ${X.ifClause}}`},WR={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:YR,code(X){let{gen:Q,parentSchema:$,it:Y}=X;if($.then===void 0&&$.else===void 0)(0,aB.checkStrictMode)(Y,'"if" without "then" and "else" is ignored');let W=tB(Y,"then"),J=tB(Y,"else");if(!W&&!J)return;let G=Q.let("valid",!0),H=Q.name("_valid");if(B(),X.reset(),W&&J){let K=Q.let("ifClause");X.setParams({ifClause:K}),Q.if(H,z("then",K),z("else",K))}else if(W)Q.if(H,z("then"));else Q.if((0,s8.not)(H),z("else"));X.pass(G,()=>X.error(!0));function B(){let K=X.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},H);X.mergeEvaluated(K)}function z(K,V){return()=>{let L=X.subschema({keyword:K},H);if(Q.assign(G,H),X.mergeValidEvaluated(L,G),V)Q.assign(V,s8._`${K}`);else X.setParams({ifClause:K})}}}};function tB(X,Q){let $=X.schema[Q];return $!==void 0&&!(0,aB.alwaysValidSchema)(X,$)}sB.default=WR});var Qz=P((Xz)=>{Object.defineProperty(Xz,"__esModule",{value:!0});var GR=e(),HR={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:X,parentSchema:Q,it:$}){if(Q.if===void 0)(0,GR.checkStrictMode)($,`"${X}" without "if" is ignored`)}};Xz.default=HR});var Yz=P(($z)=>{Object.defineProperty($z,"__esModule",{value:!0});var zR=yY(),KR=OB(),UR=gY(),VR=wB(),LR=jB(),qR=SB(),FR=kB(),NR=hY(),OR=yB(),DR=lB(),AR=cB(),wR=dB(),MR=nB(),jR=oB(),RR=eB(),IR=Qz();function ER(X=!1){let Q=[AR.default,wR.default,MR.default,jR.default,RR.default,IR.default,FR.default,NR.default,qR.default,OR.default,DR.default];if(X)Q.push(KR.default,VR.default);else Q.push(zR.default,UR.default);return Q.push(LR.default),Q}$z.default=ER});var Jz=P((Wz)=>{Object.defineProperty(Wz,"__esModule",{value:!0});var L0=c(),PR={message:({schemaCode:X})=>L0.str`must match format "${X}"`,params:({schemaCode:X})=>L0._`{format: ${X}}`},SR={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:PR,code(X,Q){let{gen:$,data:Y,$data:W,schema:J,schemaCode:G,it:H}=X,{opts:B,errSchemaPath:z,schemaEnv:K,self:V}=H;if(!B.validateFormats)return;if(W)L();else U();function L(){let F=$.scopeValue("formats",{ref:V.formats,code:B.code.formats}),q=$.const("fDef",L0._`${F}[${G}]`),N=$.let("fType"),A=$.let("format");$.if(L0._`typeof ${q} == "object" && !(${q} instanceof RegExp)`,()=>$.assign(N,L0._`${q}.type || "string"`).assign(A,L0._`${q}.validate`),()=>$.assign(N,L0._`"string"`).assign(A,q)),X.fail$data((0,L0.or)(M(),R()));function M(){if(B.strictSchema===!1)return L0.nil;return L0._`${G} && !${A}`}function R(){let S=K.$async?L0._`(${q}.async ? await ${A}(${Y}) : ${A}(${Y}))`:L0._`${A}(${Y})`,C=L0._`(typeof ${A} == "function" ? ${S} : ${A}.test(${Y}))`;return L0._`${A} && ${A} !== true && ${N} === ${Q} && !${C}`}}function U(){let F=V.formats[J];if(!F){M();return}if(F===!0)return;let[q,N,A]=R(F);if(q===Q)X.pass(S());function M(){if(B.strictSchema===!1){V.logger.warn(C());return}throw Error(C());function C(){return`unknown format "${J}" ignored in schema at path "${z}"`}}function R(C){let K0=C instanceof RegExp?(0,L0.regexpCode)(C):B.code.formats?L0._`${B.code.formats}${(0,L0.getProperty)(J)}`:void 0,U0=$.scopeValue("formats",{key:J,ref:C,code:K0});if(typeof C=="object"&&!(C instanceof RegExp))return[C.type||"string",C.validate,L0._`${U0}.validate`];return["string",C,U0]}function S(){if(typeof F=="object"&&!(F instanceof RegExp)&&F.async){if(!K.$async)throw Error("async format in sync schema");return L0._`await ${A}(${Y})`}return typeof N=="function"?L0._`${A}(${Y})`:L0._`${A}.test(${Y})`}}}};Wz.default=SR});var Hz=P((Gz)=>{Object.defineProperty(Gz,"__esModule",{value:!0});var CR=Jz(),kR=[CR.default];Gz.default=kR});var Kz=P((Bz)=>{Object.defineProperty(Bz,"__esModule",{value:!0});Bz.contentVocabulary=Bz.metadataVocabulary=void 0;Bz.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Bz.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Lz=P((Vz)=>{Object.defineProperty(Vz,"__esModule",{value:!0});var _R=xH(),xR=BB(),yR=Yz(),gR=Hz(),Uz=Kz(),fR=[_R.default,xR.default,(0,yR.default)(),gR.default,Uz.metadataVocabulary,Uz.contentVocabulary];Vz.default=fR});var Oz=P((Fz)=>{Object.defineProperty(Fz,"__esModule",{value:!0});Fz.DiscrError=void 0;var qz;(function(X){X.Tag="tag",X.Mapping="mapping"})(qz||(Fz.DiscrError=qz={}))});var wz=P((Az)=>{Object.defineProperty(Az,"__esModule",{value:!0});var i6=c(),lY=Oz(),Dz=_8(),uR=nX(),lR=e(),mR={message:({params:{discrError:X,tagName:Q}})=>X===lY.DiscrError.Tag?`tag "${Q}" must be string`:`value of tag "${Q}" must be in oneOf`,params:({params:{discrError:X,tag:Q,tagName:$}})=>i6._`{error: ${X}, tag: ${$}, tagValue: ${Q}}`},cR={keyword:"discriminator",type:"object",schemaType:"object",error:mR,code(X){let{gen:Q,data:$,schema:Y,parentSchema:W,it:J}=X,{oneOf:G}=W;if(!J.opts.discriminator)throw Error("discriminator: requires discriminator option");let H=Y.propertyName;if(typeof H!="string")throw Error("discriminator: requires propertyName");if(Y.mapping)throw Error("discriminator: mapping is not supported");if(!G)throw Error("discriminator: requires oneOf keyword");let B=Q.let("valid",!1),z=Q.const("tag",i6._`${$}${(0,i6.getProperty)(H)}`);Q.if(i6._`typeof ${z} == "string"`,()=>K(),()=>X.error(!1,{discrError:lY.DiscrError.Tag,tag:z,tagName:H})),X.ok(B);function K(){let U=L();Q.if(!1);for(let F in U)Q.elseIf(i6._`${z} === ${F}`),Q.assign(B,V(U[F]));Q.else(),X.error(!1,{discrError:lY.DiscrError.Mapping,tag:z,tagName:H}),Q.endIf()}function V(U){let F=Q.name("valid"),q=X.subschema({keyword:"oneOf",schemaProp:U},F);return X.mergeEvaluated(q,i6.Name),F}function L(){var U;let F={},q=A(W),N=!0;for(let S=0;S<G.length;S++){let C=G[S];if((C===null||C===void 0?void 0:C.$ref)&&!(0,lR.schemaHasRulesButRef)(C,J.self.RULES)){let U0=C.$ref;if(C=Dz.resolveRef.call(J.self,J.schemaEnv.root,J.baseId,U0),C instanceof Dz.SchemaEnv)C=C.schema;if(C===void 0)throw new uR.default(J.opts.uriResolver,J.baseId,U0)}let K0=(U=C===null||C===void 0?void 0:C.properties)===null||U===void 0?void 0:U[H];if(typeof K0!="object")throw Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${H}"`);N=N&&(q||A(C)),M(K0,S)}if(!N)throw Error(`discriminator: "${H}" must be required`);return F;function A({required:S}){return Array.isArray(S)&&S.includes(H)}function M(S,C){if(S.const)R(S.const,C);else if(S.enum)for(let K0 of S.enum)R(K0,C);else throw Error(`discriminator: "properties/${H}" must have "const" or "enum"`)}function R(S,C){if(typeof S!="string"||S in F)throw Error(`discriminator: "${H}" values must be unique strings`);F[S]=C}}}};Az.default=cR});var Mz=P((W_,dR)=>{dR.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var cY=P((f0,mY)=>{Object.defineProperty(f0,"__esModule",{value:!0});f0.MissingRefError=f0.ValidationError=f0.CodeGen=f0.Name=f0.nil=f0.stringify=f0.str=f0._=f0.KeywordCxt=f0.Ajv=void 0;var iR=EH(),nR=Lz(),rR=wz(),jz=Mz(),oR=["/properties"],e8="http://json-schema.org/draft-07/schema";class J4 extends iR.default{_addVocabularies(){if(super._addVocabularies(),nR.default.forEach((X)=>this.addVocabulary(X)),this.opts.discriminator)this.addKeyword(rR.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let X=this.opts.$data?this.$dataMetaSchema(jz,oR):jz;this.addMetaSchema(X,e8,!1),this.refs["http://json-schema.org/schema"]=e8}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(e8)?e8:void 0)}}f0.Ajv=J4;mY.exports=f0=J4;mY.exports.Ajv=J4;Object.defineProperty(f0,"__esModule",{value:!0});f0.default=J4;var tR=iX();Object.defineProperty(f0,"KeywordCxt",{enumerable:!0,get:function(){return tR.KeywordCxt}});var n6=c();Object.defineProperty(f0,"_",{enumerable:!0,get:function(){return n6._}});Object.defineProperty(f0,"str",{enumerable:!0,get:function(){return n6.str}});Object.defineProperty(f0,"stringify",{enumerable:!0,get:function(){return n6.stringify}});Object.defineProperty(f0,"nil",{enumerable:!0,get:function(){return n6.nil}});Object.defineProperty(f0,"Name",{enumerable:!0,get:function(){return n6.Name}});Object.defineProperty(f0,"CodeGen",{enumerable:!0,get:function(){return n6.CodeGen}});var aR=v8();Object.defineProperty(f0,"ValidationError",{enumerable:!0,get:function(){return aR.default}});var sR=nX();Object.defineProperty(f0,"MissingRefError",{enumerable:!0,get:function(){return sR.default}})});var vz=P((Cz)=>{Object.defineProperty(Cz,"__esModule",{value:!0});Cz.formatNames=Cz.fastFormats=Cz.fullFormats=void 0;function L1(X,Q){return{validate:X,compare:Q}}Cz.fullFormats={date:L1(bz,nY),time:L1(dY(!0),rY),"date-time":L1(Rz(!0),Sz),"iso-time":L1(dY(),Pz),"iso-date-time":L1(Rz(),Zz),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:GI,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:LI,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:HI,int32:{type:"number",validate:KI},int64:{type:"number",validate:UI},float:{type:"number",validate:Ez},double:{type:"number",validate:Ez},password:!0,binary:!0};Cz.fastFormats={...Cz.fullFormats,date:L1(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,nY),time:L1(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,rY),"date-time":L1(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,Sz),"iso-time":L1(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Pz),"iso-date-time":L1(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Zz),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};Cz.formatNames=Object.keys(Cz.fullFormats);function QI(X){return X%4===0&&(X%100!==0||X%400===0)}var $I=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,YI=[0,31,28,31,30,31,30,31,31,30,31,30,31];function bz(X){let Q=$I.exec(X);if(!Q)return!1;let $=+Q[1],Y=+Q[2],W=+Q[3];return Y>=1&&Y<=12&&W>=1&&W<=(Y===2&&QI($)?29:YI[Y])}function nY(X,Q){if(!(X&&Q))return;if(X>Q)return 1;if(X<Q)return-1;return 0}var pY=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function dY(X){return function($){let Y=pY.exec($);if(!Y)return!1;let W=+Y[1],J=+Y[2],G=+Y[3],H=Y[4],B=Y[5]==="-"?-1:1,z=+(Y[6]||0),K=+(Y[7]||0);if(z>23||K>59||X&&!H)return!1;if(W<=23&&J<=59&&G<60)return!0;let V=J-K*B,L=W-z*B-(V<0?1:0);return(L===23||L===-1)&&(V===59||V===-1)&&G<61}}function rY(X,Q){if(!(X&&Q))return;let $=new Date("2020-01-01T"+X).valueOf(),Y=new Date("2020-01-01T"+Q).valueOf();if(!($&&Y))return;return $-Y}function Pz(X,Q){if(!(X&&Q))return;let $=pY.exec(X),Y=pY.exec(Q);if(!($&&Y))return;if(X=$[1]+$[2]+$[3],Q=Y[1]+Y[2]+Y[3],X>Q)return 1;if(X<Q)return-1;return 0}var iY=/t|\s/i;function Rz(X){let Q=dY(X);return function(Y){let W=Y.split(iY);return W.length===2&&bz(W[0])&&Q(W[1])}}function Sz(X,Q){if(!(X&&Q))return;let $=new Date(X).valueOf(),Y=new Date(Q).valueOf();if(!($&&Y))return;return $-Y}function Zz(X,Q){if(!(X&&Q))return;let[$,Y]=X.split(iY),[W,J]=Q.split(iY),G=nY($,W);if(G===void 0)return;return G||rY(Y,J)}var WI=/\/|:/,JI=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function GI(X){return WI.test(X)&&JI.test(X)}var Iz=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function HI(X){return Iz.lastIndex=0,Iz.test(X)}var BI=-2147483648,zI=2147483647;function KI(X){return Number.isInteger(X)&&X<=zI&&X>=BI}function UI(X){return Number.isInteger(X)}function Ez(){return!0}var VI=/[^\\]\\Z/;function LI(X){if(VI.test(X))return!1;try{return new RegExp(X),!0}catch(Q){return!1}}});var _z=P((Tz)=>{Object.defineProperty(Tz,"__esModule",{value:!0});Tz.formatLimitDefinition=void 0;var FI=cY(),Y1=c(),n1=Y1.operators,X9={formatMaximum:{okStr:"<=",ok:n1.LTE,fail:n1.GT},formatMinimum:{okStr:">=",ok:n1.GTE,fail:n1.LT},formatExclusiveMaximum:{okStr:"<",ok:n1.LT,fail:n1.GTE},formatExclusiveMinimum:{okStr:">",ok:n1.GT,fail:n1.LTE}},NI={message:({keyword:X,schemaCode:Q})=>Y1.str`should be ${X9[X].okStr} ${Q}`,params:({keyword:X,schemaCode:Q})=>Y1._`{comparison: ${X9[X].okStr}, limit: ${Q}}`};Tz.formatLimitDefinition={keyword:Object.keys(X9),type:"string",schemaType:"string",$data:!0,error:NI,code(X){let{gen:Q,data:$,schemaCode:Y,keyword:W,it:J}=X,{opts:G,self:H}=J;if(!G.validateFormats)return;let B=new FI.KeywordCxt(J,H.RULES.all.format.definition,"format");if(B.$data)z();else K();function z(){let L=Q.scopeValue("formats",{ref:H.formats,code:G.code.formats}),U=Q.const("fmt",Y1._`${L}[${B.schemaCode}]`);X.fail$data((0,Y1.or)(Y1._`typeof ${U} != "object"`,Y1._`${U} instanceof RegExp`,Y1._`typeof ${U}.compare != "function"`,V(U)))}function K(){let L=B.schema,U=H.formats[L];if(!U||U===!0)return;if(typeof U!="object"||U instanceof RegExp||typeof U.compare!="function")throw Error(`"${W}": format "${L}" does not define "compare" function`);let F=Q.scopeValue("formats",{key:L,ref:U,code:G.code.formats?Y1._`${G.code.formats}${(0,Y1.getProperty)(L)}`:void 0});X.fail$data(V(F))}function V(L){return Y1._`${L}.compare(${$}, ${Y}) ${X9[W].fail} 0`}},dependencies:["format"]};var OI=(X)=>{return X.addKeyword(Tz.formatLimitDefinition),X};Tz.default=OI});var fz=P((G4,gz)=>{Object.defineProperty(G4,"__esModule",{value:!0});var r6=vz(),AI=_z(),aY=c(),xz=new aY.Name("fullFormats"),wI=new aY.Name("fastFormats"),sY=(X,Q={keywords:!0})=>{if(Array.isArray(Q))return yz(X,Q,r6.fullFormats,xz),X;let[$,Y]=Q.mode==="fast"?[r6.fastFormats,wI]:[r6.fullFormats,xz],W=Q.formats||r6.formatNames;if(yz(X,W,$,Y),Q.keywords)(0,AI.default)(X);return X};sY.get=(X,Q="full")=>{let Y=(Q==="fast"?r6.fastFormats:r6.fullFormats)[X];if(!Y)throw Error(`Unknown format "${X}"`);return Y};function yz(X,Q,$,Y){var W,J;(W=(J=X.opts.code).formats)!==null&&W!==void 0||(J.formats=aY._`require("ajv-formats/dist/formats").${Y}`);for(let G of Q)X.addFormat(G,$[G])}gz.exports=G4=sY;Object.defineProperty(G4,"__esModule",{value:!0});G4.default=sY});import{join as tz}from"path";import{fileURLToPath as CI}from"url";import{setMaxListeners as BK}from"events";var zK=50;function N6(X=zK){let Q=new AbortController;return BK(X,Q.signal),Q}import{spawn as aU}from"child_process";import{createInterface as sU}from"readline";import*as h from"fs";import{stat as yU,readdir as gU,unlink as fU,rmdir as hU,rm as uU,open as GP}from"fs/promises";var KK=typeof global=="object"&&global&&global.Object===Object&&global,q7=KK;var UK=typeof self=="object"&&self&&self.Object===Object&&self,VK=q7||UK||Function("return this")(),O6=VK;var LK=O6.Symbol,D6=LK;var F7=Object.prototype,qK=F7.hasOwnProperty,FK=F7.toString,e6=D6?D6.toStringTag:void 0;function NK(X){var Q=qK.call(X,e6),$=X[e6];try{X[e6]=void 0;var Y=!0}catch(J){}var W=FK.call(X);if(Y)if(Q)X[e6]=$;else delete X[e6];return W}var N7=NK;var OK=Object.prototype,DK=OK.toString;function AK(X){return DK.call(X)}var O7=AK;var wK="[object Null]",MK="[object Undefined]",D7=D6?D6.toStringTag:void 0;function jK(X){if(X==null)return X===void 0?MK:wK;return D7&&D7 in Object(X)?N7(X):O7(X)}var A7=jK;function RK(X){var Q=typeof X;return X!=null&&(Q=="object"||Q=="function")}var z4=RK;var IK="[object AsyncFunction]",EK="[object Function]",bK="[object GeneratorFunction]",PK="[object Proxy]";function SK(X){if(!z4(X))return!1;var Q=A7(X);return Q==EK||Q==bK||Q==IK||Q==PK}var w7=SK;var ZK=O6["__core-js_shared__"],K4=ZK;var M7=function(){var X=/[^.]+$/.exec(K4&&K4.keys&&K4.keys.IE_PROTO||"");return X?"Symbol(src)_1."+X:""}();function CK(X){return!!M7&&M7 in X}var j7=CK;var kK=Function.prototype,vK=kK.toString;function TK(X){if(X!=null){try{return vK.call(X)}catch(Q){}try{return X+""}catch(Q){}}return""}var R7=TK;var _K=/[\\^$.*+?()[\]{}|]/g,xK=/^\[object .+?Constructor\]$/,yK=Function.prototype,gK=Object.prototype,fK=yK.toString,hK=gK.hasOwnProperty,uK=RegExp("^"+fK.call(hK).replace(_K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function lK(X){if(!z4(X)||j7(X))return!1;var Q=w7(X)?uK:xK;return Q.test(R7(X))}var I7=lK;function mK(X,Q){return X==null?void 0:X[Q]}var E7=mK;function cK(X,Q){var $=E7(X,Q);return I7($)?$:void 0}var U4=cK;var pK=U4(Object,"create"),q1=pK;function dK(){this.__data__=q1?q1(null):{},this.size=0}var b7=dK;function iK(X){var Q=this.has(X)&&delete this.__data__[X];return this.size-=Q?1:0,Q}var P7=iK;var nK="__lodash_hash_undefined__",rK=Object.prototype,oK=rK.hasOwnProperty;function tK(X){var Q=this.__data__;if(q1){var $=Q[X];return $===nK?void 0:$}return oK.call(Q,X)?Q[X]:void 0}var S7=tK;var aK=Object.prototype,sK=aK.hasOwnProperty;function eK(X){var Q=this.__data__;return q1?Q[X]!==void 0:sK.call(Q,X)}var Z7=eK;var XU="__lodash_hash_undefined__";function QU(X,Q){var $=this.__data__;return this.size+=this.has(X)?0:1,$[X]=q1&&Q===void 0?XU:Q,this}var C7=QU;function A6(X){var Q=-1,$=X==null?0:X.length;this.clear();while(++Q<$){var Y=X[Q];this.set(Y[0],Y[1])}}A6.prototype.clear=b7;A6.prototype.delete=P7;A6.prototype.get=S7;A6.prototype.has=Z7;A6.prototype.set=C7;var W9=A6;function $U(){this.__data__=[],this.size=0}var k7=$U;function YU(X,Q){return X===Q||X!==X&&Q!==Q}var v7=YU;function WU(X,Q){var $=X.length;while($--)if(v7(X[$][0],Q))return $;return-1}var Z1=WU;var JU=Array.prototype,GU=JU.splice;function HU(X){var Q=this.__data__,$=Z1(Q,X);if($<0)return!1;var Y=Q.length-1;if($==Y)Q.pop();else GU.call(Q,$,1);return--this.size,!0}var T7=HU;function BU(X){var Q=this.__data__,$=Z1(Q,X);return $<0?void 0:Q[$][1]}var _7=BU;function zU(X){return Z1(this.__data__,X)>-1}var x7=zU;function KU(X,Q){var $=this.__data__,Y=Z1($,X);if(Y<0)++this.size,$.push([X,Q]);else $[Y][1]=Q;return this}var y7=KU;function w6(X){var Q=-1,$=X==null?0:X.length;this.clear();while(++Q<$){var Y=X[Q];this.set(Y[0],Y[1])}}w6.prototype.clear=k7;w6.prototype.delete=T7;w6.prototype.get=_7;w6.prototype.has=x7;w6.prototype.set=y7;var g7=w6;var UU=U4(O6,"Map"),f7=UU;function VU(){this.size=0,this.__data__={hash:new W9,map:new(f7||g7),string:new W9}}var h7=VU;function LU(X){var Q=typeof X;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?X!=="__proto__":X===null}var u7=LU;function qU(X,Q){var $=X.__data__;return u7(Q)?$[typeof Q=="string"?"string":"hash"]:$.map}var C1=qU;function FU(X){var Q=C1(this,X).delete(X);return this.size-=Q?1:0,Q}var l7=FU;function NU(X){return C1(this,X).get(X)}var m7=NU;function OU(X){return C1(this,X).has(X)}var c7=OU;function DU(X,Q){var $=C1(this,X),Y=$.size;return $.set(X,Q),this.size+=$.size==Y?0:1,this}var p7=DU;function M6(X){var Q=-1,$=X==null?0:X.length;this.clear();while(++Q<$){var Y=X[Q];this.set(Y[0],Y[1])}}M6.prototype.clear=h7;M6.prototype.delete=l7;M6.prototype.get=m7;M6.prototype.has=c7;M6.prototype.set=p7;var J9=M6;var AU="Expected a function";function G9(X,Q){if(typeof X!="function"||Q!=null&&typeof Q!="function")throw TypeError(AU);var $=function(){var Y=arguments,W=Q?Q.apply(this,Y):Y[0],J=$.cache;if(J.has(W))return J.get(W);var G=X.apply(this,Y);return $.cache=J.set(W,G)||J,G};return $.cache=new(G9.Cache||J9),$}G9.Cache=J9;var k1=G9;function wU(X,Q){if(X.destroyed)return;X.write(Q)}function d7(X){wU(process.stderr,X)}var i7=k1((X)=>{if(!X||X.trim()==="")return null;let Q=X.split(",").map((J)=>J.trim()).filter(Boolean);if(Q.length===0)return null;let $=Q.some((J)=>J.startsWith("!")),Y=Q.some((J)=>!J.startsWith("!"));if($&&Y)return null;let W=Q.map((J)=>J.replace(/^!/,"").toLowerCase());return{include:$?[]:W,exclude:$?W:[],isExclusive:$}});function MU(X){let Q=[],$=X.match(/^MCP server ["']([^"']+)["']/);if($&&$[1])Q.push("mcp"),Q.push($[1].toLowerCase());else{let J=X.match(/^([^:[]+):/);if(J&&J[1])Q.push(J[1].trim().toLowerCase())}let Y=X.match(/^\[([^\]]+)]/);if(Y&&Y[1])Q.push(Y[1].trim().toLowerCase());if(X.toLowerCase().includes("statsig event:"))Q.push("statsig");let W=X.match(/:\s*([^:]+?)(?:\s+(?:type|mode|status|event))?:/);if(W&&W[1]){let J=W[1].trim().toLowerCase();if(J.length<30&&!J.includes(" "))Q.push(J)}return Array.from(new Set(Q))}function jU(X,Q){if(!Q)return!0;if(X.length===0)return!1;if(Q.isExclusive)return!X.some(($)=>Q.exclude.includes($));else return X.some(($)=>Q.include.includes($))}function n7(X,Q){if(!Q)return!0;let $=MU(X);return jU($,Q)}import{join as RU}from"path";import{homedir as IU}from"os";function V4(){return process.env.CLAUDE_CONFIG_DIR??RU(IU(),".claude")}function H9(X){if(!X)return!1;if(typeof X==="boolean")return X;let Q=X.toLowerCase().trim();return["1","true","yes","on"].includes(Q)}import{dirname as z9,join as YW}from"path";import{cwd as EU}from"process";import{realpathSync as a7}from"fs";import{randomUUID as bU}from"crypto";function r7(X){return{name:X,default:30000,validate:(Q)=>{if(!Q)return{effective:30000,status:"valid"};let $=parseInt(Q,10);if(isNaN($)||$<=0)return{effective:30000,status:"invalid",message:`Invalid value "${Q}" (using default: 30000)`};if($>150000)return{effective:150000,status:"capped",message:`Capped from ${$} to 150000`};return{effective:$,status:"valid"}}}}var o7=r7("BASH_MAX_OUTPUT_LENGTH"),Ib=r7("TASK_MAX_OUTPUT_LENGTH"),t7={name:"CLAUDE_CODE_MAX_OUTPUT_TOKENS",default:32000,validate:(X)=>{if(!X)return{effective:32000,status:"valid"};let Y=parseInt(X,10);if(isNaN(Y)||Y<=0)return{effective:32000,status:"invalid",message:`Invalid value "${X}" (using default: 32000)`};if(Y>64000)return{effective:64000,status:"capped",message:`Capped from ${Y} to 64000`};return{effective:Y,status:"valid"}}};function PU(){let X="";if(typeof process<"u"&&typeof process.cwd==="function"&&typeof a7==="function")X=a7(EU());return{originalCwd:X,projectRoot:X,totalCostUSD:0,totalAPIDuration:0,totalAPIDurationWithoutRetries:0,totalToolDuration:0,startTime:Date.now(),lastInteractionTime:Date.now(),totalLinesAdded:0,totalLinesRemoved:0,hasUnknownModelCost:!1,cwd:X,modelUsage:{},mainLoopModelOverride:void 0,initialMainLoopModel:null,modelStrings:null,isInteractive:!1,clientType:"cli",sessionIngressToken:void 0,oauthTokenFromFd:void 0,apiKeyFromFd:void 0,flagSettingsPath:void 0,allowedSettingSources:["userSettings","projectSettings","localSettings","flagSettings","policySettings"],meter:null,sessionCounter:null,locCounter:null,prCounter:null,commitCounter:null,costCounter:null,tokenCounter:null,codeEditToolDecisionCounter:null,activeTimeCounter:null,sessionId:bU(),parentSessionId:void 0,loggerProvider:null,eventLogger:null,meterProvider:null,tracerProvider:null,agentColorMap:new Map,agentColorIndex:0,envVarValidators:[o7,t7],lastAPIRequest:null,inMemoryErrorLog:[],inlinePlugins:[],useCoworkPlugins:!1,sessionBypassPermissionsMode:!1,sessionTrustAccepted:!1,sessionPersistenceDisabled:!1,hasExitedPlanMode:!1,needsPlanModeExitAttachment:!1,hasExitedDelegateMode:!1,needsDelegateModeExitAttachment:!1,lspRecommendationShownThisSession:!1,initJsonSchema:null,registeredHooks:null,planSlugCache:new Map,teleportedSessionInfo:null,invokedSkills:new Map,slowOperations:[],promptCacheBreaks:[],sdkBetas:void 0,mainThreadAgentType:void 0,isRemoteMode:!1,directConnectServerUrl:void 0,additionalDirectoriesForClaudeMd:[],resumedTranscriptPath:null}}var SU=PU();function s7(){return SU.sessionId}function e7({writeFn:X,flushIntervalMs:Q=1000,maxBufferSize:$=100,immediateMode:Y=!1}){let W=[],J=null;function G(){if(J)clearTimeout(J),J=null}function H(){if(W.length===0)return;X(W.join("")),W=[],G()}function B(){if(!J)J=setTimeout(H,Q)}return{write(z){if(Y){X(z);return}if(W.push(z),B(),W.length>=$)H()},flush:H,dispose(){H()}}}var XW=new Set;function QW(X){return XW.add(X),()=>XW.delete(X)}var B9=1/0;function ZU(X){if(X===null)return"null";if(X===void 0)return"undefined";if(Array.isArray(X))return`Array[${X.length}]`;if(typeof X==="object")return`Object{${Object.keys(X).length} keys}`;if(typeof X==="string")return`string(${X.length} chars)`;return typeof X}function $W(X,Q){let $=performance.now();try{return Q()}finally{performance.now()-$>B9}}function Z0(X,Q,$){let Y=ZU(X);return $W(`JSON.stringify(${Y})`,()=>JSON.stringify(X,Q,$))}var L4=(X,Q)=>{let $=typeof X==="string"?X.length:0;return $W(`JSON.parse(${$} chars)`,()=>JSON.parse(X,Q))};var CU=k1(()=>{return H9(process.env.DEBUG)||H9(process.env.DEBUG_SDK)||process.argv.includes("--debug")||process.argv.includes("-d")||WW()||process.argv.some((X)=>X.startsWith("--debug="))||JW()!==null}),kU=k1(()=>{let X=process.argv.find(($)=>$.startsWith("--debug="));if(!X)return null;let Q=X.substring(8);return i7(Q)}),WW=k1(()=>{return process.argv.includes("--debug-to-stderr")||process.argv.includes("-d2e")}),JW=k1(()=>{for(let X=0;X<process.argv.length;X++){let Q=process.argv[X];if(Q.startsWith("--debug-file="))return Q.substring(13);if(Q==="--debug-file"&&X+1<process.argv.length)return process.argv[X+1]}return null});function vU(X){if(typeof process>"u"||typeof process.versions>"u"||typeof process.versions.node>"u")return!1;let Q=kU();return n7(X,Q)}var TU=!1;var q4=null;function _U(){if(!q4)q4=e7({writeFn:(X)=>{let Q=GW();if(!n0().existsSync(z9(Q)))n0().mkdirSync(z9(Q));n0().appendFileSync(Q,X),xU()},flushIntervalMs:1000,maxBufferSize:100,immediateMode:CU()}),QW(async()=>q4?.dispose());return q4}function v1(X,{level:Q}={level:"debug"}){if(!vU(X))return;if(TU&&X.includes(`
+    deps: ${$}}`};var Pj={keyword:"dependencies",type:"object",schemaType:"object",error:EB.error,code(X){let[Q,$]=Sj(X);RB(X,Q),IB(X,$)}};function Sj({schema:X}){let Q={},$={};for(let Y in X){if(Y==="__proto__")continue;let W=Array.isArray(X[Y])?Q:$;W[Y]=X[Y]}return[Q,$]}function RB(X,Q=X.schema){let{gen:$,data:Y,it:W}=X;if(Object.keys(Q).length===0)return;let J=$.let("missing");for(let G in Q){let H=Q[G];if(H.length===0)continue;let B=(0,W4.propertyInData)($,Y,G,W.opts.ownProperties);if(X.setParams({property:G,depsCount:H.length,deps:H.join(", ")}),W.allErrors)$.if(B,()=>{for(let z of H)(0,W4.checkReportMissingProp)(X,z)});else $.if(fY._`${B} && (${(0,W4.checkMissingProp)(X,H,J)})`),(0,W4.reportMissingProp)(X,J),$.else()}}EB.validatePropertyDeps=RB;function IB(X,Q=X.schema){let{gen:$,data:Y,keyword:W,it:J}=X,G=$.name("valid");for(let H in Q){if((0,bj.alwaysValidSchema)(J,Q[H]))continue;$.if((0,W4.propertyInData)($,Y,H,J.opts.ownProperties),()=>{let B=X.subschema({keyword:W,schemaProp:H},G);X.mergeValidEvaluated(B,G)},()=>$.var(G,!0)),X.ok(G)}}EB.validateSchemaDeps=IB;EB.default=Pj});var kB=P((CB)=>{Object.defineProperty(CB,"__esModule",{value:!0});var ZB=c(),kj=e(),vj={message:"property name must be valid",params:({params:X})=>ZB._`{propertyName: ${X.propertyName}}`},Tj={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:vj,code(X){let{gen:Q,schema:$,data:Y,it:W}=X;if((0,kj.alwaysValidSchema)(W,$))return;let J=Q.name("valid");Q.forIn("key",Y,(G)=>{X.setParams({propertyName:G}),X.subschema({keyword:"propertyNames",data:G,dataTypes:["string"],propertyName:G,compositeRule:!0},J),Q.if((0,ZB.not)(J),()=>{if(X.error(!0),!W.allErrors)Q.break()})}),X.ok(J)}};CB.default=Tj});var hY=P((vB)=>{Object.defineProperty(vB,"__esModule",{value:!0});var r8=d0(),$1=c(),xj=R1(),o8=e(),yj={message:"must NOT have additional properties",params:({params:X})=>$1._`{additionalProperty: ${X.additionalProperty}}`},gj={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:yj,code(X){let{gen:Q,schema:$,parentSchema:Y,data:W,errsCount:J,it:G}=X;if(!J)throw Error("ajv implementation error");let{allErrors:H,opts:B}=G;if(G.props=!0,B.removeAdditional!=="all"&&(0,o8.alwaysValidSchema)(G,$))return;let z=(0,r8.allSchemaProperties)(Y.properties),K=(0,r8.allSchemaProperties)(Y.patternProperties);V(),X.ok($1._`${J} === ${xj.default.errors}`);function V(){Q.forIn("key",W,(N)=>{if(!z.length&&!K.length)F(N);else Q.if(L(N),()=>F(N))})}function L(N){let A;if(z.length>8){let M=(0,o8.schemaRefOrVal)(G,Y.properties,"properties");A=(0,r8.isOwnProperty)(Q,M,N)}else if(z.length)A=(0,$1.or)(...z.map((M)=>$1._`${N} === ${M}`));else A=$1.nil;if(K.length)A=(0,$1.or)(A,...K.map((M)=>$1._`${(0,r8.usePattern)(X,M)}.test(${N})`));return(0,$1.not)(A)}function U(N){Q.code($1._`delete ${W}[${N}]`)}function F(N){if(B.removeAdditional==="all"||B.removeAdditional&&$===!1){U(N);return}if($===!1){if(X.setParams({additionalProperty:N}),X.error(),!H)Q.break();return}if(typeof $=="object"&&!(0,o8.alwaysValidSchema)(G,$)){let A=Q.name("valid");if(B.removeAdditional==="failing")q(N,A,!1),Q.if((0,$1.not)(A),()=>{X.reset(),U(N)});else if(q(N,A),!H)Q.if((0,$1.not)(A),()=>Q.break())}}function q(N,A,M){let R={keyword:"additionalProperties",dataProp:N,dataPropType:o8.Type.Str};if(M===!1)Object.assign(R,{compositeRule:!0,createErrors:!1,allErrors:!1});X.subschema(R,A)}}};vB.default=gj});var yB=P((xB)=>{Object.defineProperty(xB,"__esModule",{value:!0});var hj=iX(),TB=d0(),uY=e(),_B=hY(),uj={keyword:"properties",type:"object",schemaType:"object",code(X){let{gen:Q,schema:$,parentSchema:Y,data:W,it:J}=X;if(J.opts.removeAdditional==="all"&&Y.additionalProperties===void 0)_B.default.code(new hj.KeywordCxt(J,_B.default,"additionalProperties"));let G=(0,TB.allSchemaProperties)($);for(let V of G)J.definedProperties.add(V);if(J.opts.unevaluated&&G.length&&J.props!==!0)J.props=uY.mergeEvaluated.props(Q,(0,uY.toHash)(G),J.props);let H=G.filter((V)=>!(0,uY.alwaysValidSchema)(J,$[V]));if(H.length===0)return;let B=Q.name("valid");for(let V of H){if(z(V))K(V);else{if(Q.if((0,TB.propertyInData)(Q,W,V,J.opts.ownProperties)),K(V),!J.allErrors)Q.else().var(B,!0);Q.endIf()}X.it.definedProperties.add(V),X.ok(B)}function z(V){return J.opts.useDefaults&&!J.compositeRule&&$[V].default!==void 0}function K(V){X.subschema({keyword:"properties",schemaProp:V,dataProp:V},B)}}};xB.default=uj});var lB=P((uB)=>{Object.defineProperty(uB,"__esModule",{value:!0});var gB=d0(),t8=c(),fB=e(),hB=e(),mj={keyword:"patternProperties",type:"object",schemaType:"object",code(X){let{gen:Q,schema:$,data:Y,parentSchema:W,it:J}=X,{opts:G}=J,H=(0,gB.allSchemaProperties)($),B=H.filter((q)=>(0,fB.alwaysValidSchema)(J,$[q]));if(H.length===0||B.length===H.length&&(!J.opts.unevaluated||J.props===!0))return;let z=G.strictSchema&&!G.allowMatchingProperties&&W.properties,K=Q.name("valid");if(J.props!==!0&&!(J.props instanceof t8.Name))J.props=(0,hB.evaluatedPropsToName)(Q,J.props);let{props:V}=J;L();function L(){for(let q of H){if(z)U(q);if(J.allErrors)F(q);else Q.var(K,!0),F(q),Q.if(K)}}function U(q){for(let N in z)if(new RegExp(q).test(N))(0,fB.checkStrictMode)(J,`property ${N} matches pattern ${q} (use allowMatchingProperties)`)}function F(q){Q.forIn("key",Y,(N)=>{Q.if(t8._`${(0,gB.usePattern)(X,q)}.test(${N})`,()=>{let A=B.includes(q);if(!A)X.subschema({keyword:"patternProperties",schemaProp:q,dataProp:N,dataPropType:hB.Type.Str},K);if(J.opts.unevaluated&&V!==!0)Q.assign(t8._`${V}[${N}]`,!0);else if(!A&&!J.allErrors)Q.if((0,t8.not)(K),()=>Q.break())})})}}};uB.default=mj});var cB=P((mB)=>{Object.defineProperty(mB,"__esModule",{value:!0});var pj=e(),dj={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(X){let{gen:Q,schema:$,it:Y}=X;if((0,pj.alwaysValidSchema)(Y,$)){X.fail();return}let W=Q.name("valid");X.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},W),X.failResult(W,()=>X.reset(),()=>X.error())},error:{message:"must NOT be valid"}};mB.default=dj});var dB=P((pB)=>{Object.defineProperty(pB,"__esModule",{value:!0});var nj=d0(),rj={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:nj.validateUnion,error:{message:"must match a schema in anyOf"}};pB.default=rj});var nB=P((iB)=>{Object.defineProperty(iB,"__esModule",{value:!0});var a8=c(),tj=e(),aj={message:"must match exactly one schema in oneOf",params:({params:X})=>a8._`{passingSchemas: ${X.passing}}`},sj={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:aj,code(X){let{gen:Q,schema:$,parentSchema:Y,it:W}=X;if(!Array.isArray($))throw Error("ajv implementation error");if(W.opts.discriminator&&Y.discriminator)return;let J=$,G=Q.let("valid",!1),H=Q.let("passing",null),B=Q.name("_valid");X.setParams({passing:H}),Q.block(z),X.result(G,()=>X.reset(),()=>X.error(!0));function z(){J.forEach((K,V)=>{let L;if((0,tj.alwaysValidSchema)(W,K))Q.var(B,!0);else L=X.subschema({keyword:"oneOf",schemaProp:V,compositeRule:!0},B);if(V>0)Q.if(a8._`${B} && ${G}`).assign(G,!1).assign(H,a8._`[${H}, ${V}]`).else();Q.if(B,()=>{if(Q.assign(G,!0),Q.assign(H,V),L)X.mergeEvaluated(L,a8.Name)})})}}};iB.default=sj});var oB=P((rB)=>{Object.defineProperty(rB,"__esModule",{value:!0});var XR=e(),QR={keyword:"allOf",schemaType:"array",code(X){let{gen:Q,schema:$,it:Y}=X;if(!Array.isArray($))throw Error("ajv implementation error");let W=Q.name("valid");$.forEach((J,G)=>{if((0,XR.alwaysValidSchema)(Y,J))return;let H=X.subschema({keyword:"allOf",schemaProp:G},W);X.ok(W),X.mergeEvaluated(H)})}};rB.default=QR});var eB=P((sB)=>{Object.defineProperty(sB,"__esModule",{value:!0});var s8=c(),aB=e(),YR={message:({params:X})=>s8.str`must match "${X.ifClause}" schema`,params:({params:X})=>s8._`{failingKeyword: ${X.ifClause}}`},WR={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:YR,code(X){let{gen:Q,parentSchema:$,it:Y}=X;if($.then===void 0&&$.else===void 0)(0,aB.checkStrictMode)(Y,'"if" without "then" and "else" is ignored');let W=tB(Y,"then"),J=tB(Y,"else");if(!W&&!J)return;let G=Q.let("valid",!0),H=Q.name("_valid");if(B(),X.reset(),W&&J){let K=Q.let("ifClause");X.setParams({ifClause:K}),Q.if(H,z("then",K),z("else",K))}else if(W)Q.if(H,z("then"));else Q.if((0,s8.not)(H),z("else"));X.pass(G,()=>X.error(!0));function B(){let K=X.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},H);X.mergeEvaluated(K)}function z(K,V){return()=>{let L=X.subschema({keyword:K},H);if(Q.assign(G,H),X.mergeValidEvaluated(L,G),V)Q.assign(V,s8._`${K}`);else X.setParams({ifClause:K})}}}};function tB(X,Q){let $=X.schema[Q];return $!==void 0&&!(0,aB.alwaysValidSchema)(X,$)}sB.default=WR});var Qz=P((Xz)=>{Object.defineProperty(Xz,"__esModule",{value:!0});var GR=e(),HR={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:X,parentSchema:Q,it:$}){if(Q.if===void 0)(0,GR.checkStrictMode)($,`"${X}" without "if" is ignored`)}};Xz.default=HR});var Yz=P(($z)=>{Object.defineProperty($z,"__esModule",{value:!0});var zR=yY(),KR=OB(),UR=gY(),VR=wB(),LR=jB(),qR=SB(),FR=kB(),NR=hY(),OR=yB(),DR=lB(),AR=cB(),wR=dB(),MR=nB(),jR=oB(),RR=eB(),IR=Qz();function ER(X=!1){let Q=[AR.default,wR.default,MR.default,jR.default,RR.default,IR.default,FR.default,NR.default,qR.default,OR.default,DR.default];if(X)Q.push(KR.default,VR.default);else Q.push(zR.default,UR.default);return Q.push(LR.default),Q}$z.default=ER});var Jz=P((Wz)=>{Object.defineProperty(Wz,"__esModule",{value:!0});var L0=c(),PR={message:({schemaCode:X})=>L0.str`must match format "${X}"`,params:({schemaCode:X})=>L0._`{format: ${X}}`},SR={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:PR,code(X,Q){let{gen:$,data:Y,$data:W,schema:J,schemaCode:G,it:H}=X,{opts:B,errSchemaPath:z,schemaEnv:K,self:V}=H;if(!B.validateFormats)return;if(W)L();else U();function L(){let F=$.scopeValue("formats",{ref:V.formats,code:B.code.formats}),q=$.const("fDef",L0._`${F}[${G}]`),N=$.let("fType"),A=$.let("format");$.if(L0._`typeof ${q} == "object" && !(${q} instanceof RegExp)`,()=>$.assign(N,L0._`${q}.type || "string"`).assign(A,L0._`${q}.validate`),()=>$.assign(N,L0._`"string"`).assign(A,q)),X.fail$data((0,L0.or)(M(),R()));function M(){if(B.strictSchema===!1)return L0.nil;return L0._`${G} && !${A}`}function R(){let S=K.$async?L0._`(${q}.async ? await ${A}(${Y}) : ${A}(${Y}))`:L0._`${A}(${Y})`,C=L0._`(typeof ${A} == "function" ? ${S} : ${A}.test(${Y}))`;return L0._`${A} && ${A} !== true && ${N} === ${Q} && !${C}`}}function U(){let F=V.formats[J];if(!F){M();return}if(F===!0)return;let[q,N,A]=R(F);if(q===Q)X.pass(S());function M(){if(B.strictSchema===!1){V.logger.warn(C());return}throw Error(C());function C(){return`unknown format "${J}" ignored in schema at path "${z}"`}}function R(C){let K0=C instanceof RegExp?(0,L0.regexpCode)(C):B.code.formats?L0._`${B.code.formats}${(0,L0.getProperty)(J)}`:void 0,U0=$.scopeValue("formats",{key:J,ref:C,code:K0});if(typeof C=="object"&&!(C instanceof RegExp))return[C.type||"string",C.validate,L0._`${U0}.validate`];return["string",C,U0]}function S(){if(typeof F=="object"&&!(F instanceof RegExp)&&F.async){if(!K.$async)throw Error("async format in sync schema");return L0._`await ${A}(${Y})`}return typeof N=="function"?L0._`${A}(${Y})`:L0._`${A}.test(${Y})`}}}};Wz.default=SR});var Hz=P((Gz)=>{Object.defineProperty(Gz,"__esModule",{value:!0});var CR=Jz(),kR=[CR.default];Gz.default=kR});var Kz=P((Bz)=>{Object.defineProperty(Bz,"__esModule",{value:!0});Bz.contentVocabulary=Bz.metadataVocabulary=void 0;Bz.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Bz.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Lz=P((Vz)=>{Object.defineProperty(Vz,"__esModule",{value:!0});var _R=xH(),xR=BB(),yR=Yz(),gR=Hz(),Uz=Kz(),fR=[_R.default,xR.default,(0,yR.default)(),gR.default,Uz.metadataVocabulary,Uz.contentVocabulary];Vz.default=fR});var Oz=P((Fz)=>{Object.defineProperty(Fz,"__esModule",{value:!0});Fz.DiscrError=void 0;var qz;(function(X){X.Tag="tag",X.Mapping="mapping"})(qz||(Fz.DiscrError=qz={}))});var wz=P((Az)=>{Object.defineProperty(Az,"__esModule",{value:!0});var i6=c(),lY=Oz(),Dz=_8(),uR=nX(),lR=e(),mR={message:({params:{discrError:X,tagName:Q}})=>X===lY.DiscrError.Tag?`tag "${Q}" must be string`:`value of tag "${Q}" must be in oneOf`,params:({params:{discrError:X,tag:Q,tagName:$}})=>i6._`{error: ${X}, tag: ${$}, tagValue: ${Q}}`},cR={keyword:"discriminator",type:"object",schemaType:"object",error:mR,code(X){let{gen:Q,data:$,schema:Y,parentSchema:W,it:J}=X,{oneOf:G}=W;if(!J.opts.discriminator)throw Error("discriminator: requires discriminator option");let H=Y.propertyName;if(typeof H!="string")throw Error("discriminator: requires propertyName");if(Y.mapping)throw Error("discriminator: mapping is not supported");if(!G)throw Error("discriminator: requires oneOf keyword");let B=Q.let("valid",!1),z=Q.const("tag",i6._`${$}${(0,i6.getProperty)(H)}`);Q.if(i6._`typeof ${z} == "string"`,()=>K(),()=>X.error(!1,{discrError:lY.DiscrError.Tag,tag:z,tagName:H})),X.ok(B);function K(){let U=L();Q.if(!1);for(let F in U)Q.elseIf(i6._`${z} === ${F}`),Q.assign(B,V(U[F]));Q.else(),X.error(!1,{discrError:lY.DiscrError.Mapping,tag:z,tagName:H}),Q.endIf()}function V(U){let F=Q.name("valid"),q=X.subschema({keyword:"oneOf",schemaProp:U},F);return X.mergeEvaluated(q,i6.Name),F}function L(){var U;let F={},q=A(W),N=!0;for(let S=0;S<G.length;S++){let C=G[S];if((C===null||C===void 0?void 0:C.$ref)&&!(0,lR.schemaHasRulesButRef)(C,J.self.RULES)){let U0=C.$ref;if(C=Dz.resolveRef.call(J.self,J.schemaEnv.root,J.baseId,U0),C instanceof Dz.SchemaEnv)C=C.schema;if(C===void 0)throw new uR.default(J.opts.uriResolver,J.baseId,U0)}let K0=(U=C===null||C===void 0?void 0:C.properties)===null||U===void 0?void 0:U[H];if(typeof K0!="object")throw Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${H}"`);N=N&&(q||A(C)),M(K0,S)}if(!N)throw Error(`discriminator: "${H}" must be required`);return F;function A({required:S}){return Array.isArray(S)&&S.includes(H)}function M(S,C){if(S.const)R(S.const,C);else if(S.enum)for(let K0 of S.enum)R(K0,C);else throw Error(`discriminator: "properties/${H}" must have "const" or "enum"`)}function R(S,C){if(typeof S!="string"||S in F)throw Error(`discriminator: "${H}" values must be unique strings`);F[S]=C}}}};Az.default=cR});var Mz=P((W_,dR)=>{dR.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var cY=P((f0,mY)=>{Object.defineProperty(f0,"__esModule",{value:!0});f0.MissingRefError=f0.ValidationError=f0.CodeGen=f0.Name=f0.nil=f0.stringify=f0.str=f0._=f0.KeywordCxt=f0.Ajv=void 0;var iR=EH(),nR=Lz(),rR=wz(),jz=Mz(),oR=["/properties"],e8="http://json-schema.org/draft-07/schema";class J4 extends iR.default{_addVocabularies(){if(super._addVocabularies(),nR.default.forEach((X)=>this.addVocabulary(X)),this.opts.discriminator)this.addKeyword(rR.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let X=this.opts.$data?this.$dataMetaSchema(jz,oR):jz;this.addMetaSchema(X,e8,!1),this.refs["http://json-schema.org/schema"]=e8}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(e8)?e8:void 0)}}f0.Ajv=J4;mY.exports=f0=J4;mY.exports.Ajv=J4;Object.defineProperty(f0,"__esModule",{value:!0});f0.default=J4;var tR=iX();Object.defineProperty(f0,"KeywordCxt",{enumerable:!0,get:function(){return tR.KeywordCxt}});var n6=c();Object.defineProperty(f0,"_",{enumerable:!0,get:function(){return n6._}});Object.defineProperty(f0,"str",{enumerable:!0,get:function(){return n6.str}});Object.defineProperty(f0,"stringify",{enumerable:!0,get:function(){return n6.stringify}});Object.defineProperty(f0,"nil",{enumerable:!0,get:function(){return n6.nil}});Object.defineProperty(f0,"Name",{enumerable:!0,get:function(){return n6.Name}});Object.defineProperty(f0,"CodeGen",{enumerable:!0,get:function(){return n6.CodeGen}});var aR=v8();Object.defineProperty(f0,"ValidationError",{enumerable:!0,get:function(){return aR.default}});var sR=nX();Object.defineProperty(f0,"MissingRefError",{enumerable:!0,get:function(){return sR.default}})});var vz=P((Cz)=>{Object.defineProperty(Cz,"__esModule",{value:!0});Cz.formatNames=Cz.fastFormats=Cz.fullFormats=void 0;function L1(X,Q){return{validate:X,compare:Q}}Cz.fullFormats={date:L1(bz,nY),time:L1(dY(!0),rY),"date-time":L1(Rz(!0),Sz),"iso-time":L1(dY(),Pz),"iso-date-time":L1(Rz(),Zz),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:GI,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:LI,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:HI,int32:{type:"number",validate:KI},int64:{type:"number",validate:UI},float:{type:"number",validate:Ez},double:{type:"number",validate:Ez},password:!0,binary:!0};Cz.fastFormats={...Cz.fullFormats,date:L1(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,nY),time:L1(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,rY),"date-time":L1(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,Sz),"iso-time":L1(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Pz),"iso-date-time":L1(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Zz),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};Cz.formatNames=Object.keys(Cz.fullFormats);function QI(X){return X%4===0&&(X%100!==0||X%400===0)}var $I=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,YI=[0,31,28,31,30,31,30,31,31,30,31,30,31];function bz(X){let Q=$I.exec(X);if(!Q)return!1;let $=+Q[1],Y=+Q[2],W=+Q[3];return Y>=1&&Y<=12&&W>=1&&W<=(Y===2&&QI($)?29:YI[Y])}function nY(X,Q){if(!(X&&Q))return;if(X>Q)return 1;if(X<Q)return-1;return 0}var pY=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function dY(X){return function($){let Y=pY.exec($);if(!Y)return!1;let W=+Y[1],J=+Y[2],G=+Y[3],H=Y[4],B=Y[5]==="-"?-1:1,z=+(Y[6]||0),K=+(Y[7]||0);if(z>23||K>59||X&&!H)return!1;if(W<=23&&J<=59&&G<60)return!0;let V=J-K*B,L=W-z*B-(V<0?1:0);return(L===23||L===-1)&&(V===59||V===-1)&&G<61}}function rY(X,Q){if(!(X&&Q))return;let $=new Date("2020-01-01T"+X).valueOf(),Y=new Date("2020-01-01T"+Q).valueOf();if(!($&&Y))return;return $-Y}function Pz(X,Q){if(!(X&&Q))return;let $=pY.exec(X),Y=pY.exec(Q);if(!($&&Y))return;if(X=$[1]+$[2]+$[3],Q=Y[1]+Y[2]+Y[3],X>Q)return 1;if(X<Q)return-1;return 0}var iY=/t|\s/i;function Rz(X){let Q=dY(X);return function(Y){let W=Y.split(iY);return W.length===2&&bz(W[0])&&Q(W[1])}}function Sz(X,Q){if(!(X&&Q))return;let $=new Date(X).valueOf(),Y=new Date(Q).valueOf();if(!($&&Y))return;return $-Y}function Zz(X,Q){if(!(X&&Q))return;let[$,Y]=X.split(iY),[W,J]=Q.split(iY),G=nY($,W);if(G===void 0)return;return G||rY(Y,J)}var WI=/\/|:/,JI=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function GI(X){return WI.test(X)&&JI.test(X)}var Iz=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function HI(X){return Iz.lastIndex=0,Iz.test(X)}var BI=-2147483648,zI=2147483647;function KI(X){return Number.isInteger(X)&&X<=zI&&X>=BI}function UI(X){return Number.isInteger(X)}function Ez(){return!0}var VI=/[^\\]\\Z/;function LI(X){if(VI.test(X))return!1;try{return new RegExp(X),!0}catch(Q){return!1}}});var _z=P((Tz)=>{Object.defineProperty(Tz,"__esModule",{value:!0});Tz.formatLimitDefinition=void 0;var FI=cY(),Y1=c(),n1=Y1.operators,X9={formatMaximum:{okStr:"<=",ok:n1.LTE,fail:n1.GT},formatMinimum:{okStr:">=",ok:n1.GTE,fail:n1.LT},formatExclusiveMaximum:{okStr:"<",ok:n1.LT,fail:n1.GTE},formatExclusiveMinimum:{okStr:">",ok:n1.GT,fail:n1.LTE}},NI={message:({keyword:X,schemaCode:Q})=>Y1.str`should be ${X9[X].okStr} ${Q}`,params:({keyword:X,schemaCode:Q})=>Y1._`{comparison: ${X9[X].okStr}, limit: ${Q}}`};Tz.formatLimitDefinition={keyword:Object.keys(X9),type:"string",schemaType:"string",$data:!0,error:NI,code(X){let{gen:Q,data:$,schemaCode:Y,keyword:W,it:J}=X,{opts:G,self:H}=J;if(!G.validateFormats)return;let B=new FI.KeywordCxt(J,H.RULES.all.format.definition,"format");if(B.$data)z();else K();function z(){let L=Q.scopeValue("formats",{ref:H.formats,code:G.code.formats}),U=Q.const("fmt",Y1._`${L}[${B.schemaCode}]`);X.fail$data((0,Y1.or)(Y1._`typeof ${U} != "object"`,Y1._`${U} instanceof RegExp`,Y1._`typeof ${U}.compare != "function"`,V(U)))}function K(){let L=B.schema,U=H.formats[L];if(!U||U===!0)return;if(typeof U!="object"||U instanceof RegExp||typeof U.compare!="function")throw Error(`"${W}": format "${L}" does not define "compare" function`);let F=Q.scopeValue("formats",{key:L,ref:U,code:G.code.formats?Y1._`${G.code.formats}${(0,Y1.getProperty)(L)}`:void 0});X.fail$data(V(F))}function V(L){return Y1._`${L}.compare(${$}, ${Y}) ${X9[W].fail} 0`}},dependencies:["format"]};var OI=(X)=>{return X.addKeyword(Tz.formatLimitDefinition),X};Tz.default=OI});var fz=P((G4,gz)=>{Object.defineProperty(G4,"__esModule",{value:!0});var r6=vz(),AI=_z(),aY=c(),xz=new aY.Name("fullFormats"),wI=new aY.Name("fastFormats"),sY=(X,Q={keywords:!0})=>{if(Array.isArray(Q))return yz(X,Q,r6.fullFormats,xz),X;let[$,Y]=Q.mode==="fast"?[r6.fastFormats,wI]:[r6.fullFormats,xz],W=Q.formats||r6.formatNames;if(yz(X,W,$,Y),Q.keywords)(0,AI.default)(X);return X};sY.get=(X,Q="full")=>{let Y=(Q==="fast"?r6.fastFormats:r6.fullFormats)[X];if(!Y)throw Error(`Unknown format "${X}"`);return Y};function yz(X,Q,$,Y){var W,J;(W=(J=X.opts.code).formats)!==null&&W!==void 0||(J.formats=aY._`require("ajv-formats/dist/formats").${Y}`);for(let G of Q)X.addFormat(G,$[G])}gz.exports=G4=sY;Object.defineProperty(G4,"__esModule",{value:!0});G4.default=sY});import{join as tz}from"path";import{fileURLToPath as CI}from"url";import{setMaxListeners as BK}from"events";var zK=50;function N6(X=zK){let Q=new AbortController;return BK(X,Q.signal),Q}import{fork as aU}from"child_process";import{createInterface as sU}from"readline";import*as h from"fs";import{stat as yU,readdir as gU,unlink as fU,rmdir as hU,rm as uU,open as GP}from"fs/promises";var KK=typeof global=="object"&&global&&global.Object===Object&&global,q7=KK;var UK=typeof self=="object"&&self&&self.Object===Object&&self,VK=q7||UK||Function("return this")(),O6=VK;var LK=O6.Symbol,D6=LK;var F7=Object.prototype,qK=F7.hasOwnProperty,FK=F7.toString,e6=D6?D6.toStringTag:void 0;function NK(X){var Q=qK.call(X,e6),$=X[e6];try{X[e6]=void 0;var Y=!0}catch(J){}var W=FK.call(X);if(Y)if(Q)X[e6]=$;else delete X[e6];return W}var N7=NK;var OK=Object.prototype,DK=OK.toString;function AK(X){return DK.call(X)}var O7=AK;var wK="[object Null]",MK="[object Undefined]",D7=D6?D6.toStringTag:void 0;function jK(X){if(X==null)return X===void 0?MK:wK;return D7&&D7 in Object(X)?N7(X):O7(X)}var A7=jK;function RK(X){var Q=typeof X;return X!=null&&(Q=="object"||Q=="function")}var z4=RK;var IK="[object AsyncFunction]",EK="[object Function]",bK="[object GeneratorFunction]",PK="[object Proxy]";function SK(X){if(!z4(X))return!1;var Q=A7(X);return Q==EK||Q==bK||Q==IK||Q==PK}var w7=SK;var ZK=O6["__core-js_shared__"],K4=ZK;var M7=function(){var X=/[^.]+$/.exec(K4&&K4.keys&&K4.keys.IE_PROTO||"");return X?"Symbol(src)_1."+X:""}();function CK(X){return!!M7&&M7 in X}var j7=CK;var kK=Function.prototype,vK=kK.toString;function TK(X){if(X!=null){try{return vK.call(X)}catch(Q){}try{return X+""}catch(Q){}}return""}var R7=TK;var _K=/[\\^$.*+?()[\]{}|]/g,xK=/^\[object .+?Constructor\]$/,yK=Function.prototype,gK=Object.prototype,fK=yK.toString,hK=gK.hasOwnProperty,uK=RegExp("^"+fK.call(hK).replace(_K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function lK(X){if(!z4(X)||j7(X))return!1;var Q=w7(X)?uK:xK;return Q.test(R7(X))}var I7=lK;function mK(X,Q){return X==null?void 0:X[Q]}var E7=mK;function cK(X,Q){var $=E7(X,Q);return I7($)?$:void 0}var U4=cK;var pK=U4(Object,"create"),q1=pK;function dK(){this.__data__=q1?q1(null):{},this.size=0}var b7=dK;function iK(X){var Q=this.has(X)&&delete this.__data__[X];return this.size-=Q?1:0,Q}var P7=iK;var nK="__lodash_hash_undefined__",rK=Object.prototype,oK=rK.hasOwnProperty;function tK(X){var Q=this.__data__;if(q1){var $=Q[X];return $===nK?void 0:$}return oK.call(Q,X)?Q[X]:void 0}var S7=tK;var aK=Object.prototype,sK=aK.hasOwnProperty;function eK(X){var Q=this.__data__;return q1?Q[X]!==void 0:sK.call(Q,X)}var Z7=eK;var XU="__lodash_hash_undefined__";function QU(X,Q){var $=this.__data__;return this.size+=this.has(X)?0:1,$[X]=q1&&Q===void 0?XU:Q,this}var C7=QU;function A6(X){var Q=-1,$=X==null?0:X.length;this.clear();while(++Q<$){var Y=X[Q];this.set(Y[0],Y[1])}}A6.prototype.clear=b7;A6.prototype.delete=P7;A6.prototype.get=S7;A6.prototype.has=Z7;A6.prototype.set=C7;var W9=A6;function $U(){this.__data__=[],this.size=0}var k7=$U;function YU(X,Q){return X===Q||X!==X&&Q!==Q}var v7=YU;function WU(X,Q){var $=X.length;while($--)if(v7(X[$][0],Q))return $;return-1}var Z1=WU;var JU=Array.prototype,GU=JU.splice;function HU(X){var Q=this.__data__,$=Z1(Q,X);if($<0)return!1;var Y=Q.length-1;if($==Y)Q.pop();else GU.call(Q,$,1);return--this.size,!0}var T7=HU;function BU(X){var Q=this.__data__,$=Z1(Q,X);return $<0?void 0:Q[$][1]}var _7=BU;function zU(X){return Z1(this.__data__,X)>-1}var x7=zU;function KU(X,Q){var $=this.__data__,Y=Z1($,X);if(Y<0)++this.size,$.push([X,Q]);else $[Y][1]=Q;return this}var y7=KU;function w6(X){var Q=-1,$=X==null?0:X.length;this.clear();while(++Q<$){var Y=X[Q];this.set(Y[0],Y[1])}}w6.prototype.clear=k7;w6.prototype.delete=T7;w6.prototype.get=_7;w6.prototype.has=x7;w6.prototype.set=y7;var g7=w6;var UU=U4(O6,"Map"),f7=UU;function VU(){this.size=0,this.__data__={hash:new W9,map:new(f7||g7),string:new W9}}var h7=VU;function LU(X){var Q=typeof X;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?X!=="__proto__":X===null}var u7=LU;function qU(X,Q){var $=X.__data__;return u7(Q)?$[typeof Q=="string"?"string":"hash"]:$.map}var C1=qU;function FU(X){var Q=C1(this,X).delete(X);return this.size-=Q?1:0,Q}var l7=FU;function NU(X){return C1(this,X).get(X)}var m7=NU;function OU(X){return C1(this,X).has(X)}var c7=OU;function DU(X,Q){var $=C1(this,X),Y=$.size;return $.set(X,Q),this.size+=$.size==Y?0:1,this}var p7=DU;function M6(X){var Q=-1,$=X==null?0:X.length;this.clear();while(++Q<$){var Y=X[Q];this.set(Y[0],Y[1])}}M6.prototype.clear=h7;M6.prototype.delete=l7;M6.prototype.get=m7;M6.prototype.has=c7;M6.prototype.set=p7;var J9=M6;var AU="Expected a function";function G9(X,Q){if(typeof X!="function"||Q!=null&&typeof Q!="function")throw TypeError(AU);var $=function(){var Y=arguments,W=Q?Q.apply(this,Y):Y[0],J=$.cache;if(J.has(W))return J.get(W);var G=X.apply(this,Y);return $.cache=J.set(W,G)||J,G};return $.cache=new(G9.Cache||J9),$}G9.Cache=J9;var k1=G9;function wU(X,Q){if(X.destroyed)return;X.write(Q)}function d7(X){wU(process.stderr,X)}var i7=k1((X)=>{if(!X||X.trim()==="")return null;let Q=X.split(",").map((J)=>J.trim()).filter(Boolean);if(Q.length===0)return null;let $=Q.some((J)=>J.startsWith("!")),Y=Q.some((J)=>!J.startsWith("!"));if($&&Y)return null;let W=Q.map((J)=>J.replace(/^!/,"").toLowerCase());return{include:$?[]:W,exclude:$?W:[],isExclusive:$}});function MU(X){let Q=[],$=X.match(/^MCP server ["']([^"']+)["']/);if($&&$[1])Q.push("mcp"),Q.push($[1].toLowerCase());else{let J=X.match(/^([^:[]+):/);if(J&&J[1])Q.push(J[1].trim().toLowerCase())}let Y=X.match(/^\[([^\]]+)]/);if(Y&&Y[1])Q.push(Y[1].trim().toLowerCase());if(X.toLowerCase().includes("statsig event:"))Q.push("statsig");let W=X.match(/:\s*([^:]+?)(?:\s+(?:type|mode|status|event))?:/);if(W&&W[1]){let J=W[1].trim().toLowerCase();if(J.length<30&&!J.includes(" "))Q.push(J)}return Array.from(new Set(Q))}function jU(X,Q){if(!Q)return!0;if(X.length===0)return!1;if(Q.isExclusive)return!X.some(($)=>Q.exclude.includes($));else return X.some(($)=>Q.include.includes($))}function n7(X,Q){if(!Q)return!0;let $=MU(X);return jU($,Q)}import{join as RU}from"path";import{homedir as IU}from"os";function V4(){return process.env.CLAUDE_CONFIG_DIR??RU(IU(),".claude")}function H9(X){if(!X)return!1;if(typeof X==="boolean")return X;let Q=X.toLowerCase().trim();return["1","true","yes","on"].includes(Q)}import{dirname as z9,join as YW}from"path";import{cwd as EU}from"process";import{realpathSync as a7}from"fs";import{randomUUID as bU}from"crypto";function r7(X){return{name:X,default:30000,validate:(Q)=>{if(!Q)return{effective:30000,status:"valid"};let $=parseInt(Q,10);if(isNaN($)||$<=0)return{effective:30000,status:"invalid",message:`Invalid value "${Q}" (using default: 30000)`};if($>150000)return{effective:150000,status:"capped",message:`Capped from ${$} to 150000`};return{effective:$,status:"valid"}}}}var o7=r7("BASH_MAX_OUTPUT_LENGTH"),Ib=r7("TASK_MAX_OUTPUT_LENGTH"),t7={name:"CLAUDE_CODE_MAX_OUTPUT_TOKENS",default:32000,validate:(X)=>{if(!X)return{effective:32000,status:"valid"};let Y=parseInt(X,10);if(isNaN(Y)||Y<=0)return{effective:32000,status:"invalid",message:`Invalid value "${X}" (using default: 32000)`};if(Y>64000)return{effective:64000,status:"capped",message:`Capped from ${Y} to 64000`};return{effective:Y,status:"valid"}}};function PU(){let X="";if(typeof process<"u"&&typeof process.cwd==="function"&&typeof a7==="function")X=a7(EU());return{originalCwd:X,projectRoot:X,totalCostUSD:0,totalAPIDuration:0,totalAPIDurationWithoutRetries:0,totalToolDuration:0,startTime:Date.now(),lastInteractionTime:Date.now(),totalLinesAdded:0,totalLinesRemoved:0,hasUnknownModelCost:!1,cwd:X,modelUsage:{},mainLoopModelOverride:void 0,initialMainLoopModel:null,modelStrings:null,isInteractive:!1,clientType:"cli",sessionIngressToken:void 0,oauthTokenFromFd:void 0,apiKeyFromFd:void 0,flagSettingsPath:void 0,allowedSettingSources:["userSettings","projectSettings","localSettings","flagSettings","policySettings"],meter:null,sessionCounter:null,locCounter:null,prCounter:null,commitCounter:null,costCounter:null,tokenCounter:null,codeEditToolDecisionCounter:null,activeTimeCounter:null,sessionId:bU(),parentSessionId:void 0,loggerProvider:null,eventLogger:null,meterProvider:null,tracerProvider:null,agentColorMap:new Map,agentColorIndex:0,envVarValidators:[o7,t7],lastAPIRequest:null,inMemoryErrorLog:[],inlinePlugins:[],useCoworkPlugins:!1,sessionBypassPermissionsMode:!1,sessionTrustAccepted:!1,sessionPersistenceDisabled:!1,hasExitedPlanMode:!1,needsPlanModeExitAttachment:!1,hasExitedDelegateMode:!1,needsDelegateModeExitAttachment:!1,lspRecommendationShownThisSession:!1,initJsonSchema:null,registeredHooks:null,planSlugCache:new Map,teleportedSessionInfo:null,invokedSkills:new Map,slowOperations:[],promptCacheBreaks:[],sdkBetas:void 0,mainThreadAgentType:void 0,isRemoteMode:!1,directConnectServerUrl:void 0,additionalDirectoriesForClaudeMd:[],resumedTranscriptPath:null}}var SU=PU();function s7(){return SU.sessionId}function e7({writeFn:X,flushIntervalMs:Q=1000,maxBufferSize:$=100,immediateMode:Y=!1}){let W=[],J=null;function G(){if(J)clearTimeout(J),J=null}function H(){if(W.length===0)return;X(W.join("")),W=[],G()}function B(){if(!J)J=setTimeout(H,Q)}return{write(z){if(Y){X(z);return}if(W.push(z),B(),W.length>=$)H()},flush:H,dispose(){H()}}}var XW=new Set;function QW(X){return XW.add(X),()=>XW.delete(X)}var B9=1/0;function ZU(X){if(X===null)return"null";if(X===void 0)return"undefined";if(Array.isArray(X))return`Array[${X.length}]`;if(typeof X==="object")return`Object{${Object.keys(X).length} keys}`;if(typeof X==="string")return`string(${X.length} chars)`;return typeof X}function $W(X,Q){let $=performance.now();try{return Q()}finally{performance.now()-$>B9}}function Z0(X,Q,$){let Y=ZU(X);return $W(`JSON.stringify(${Y})`,()=>JSON.stringify(X,Q,$))}var L4=(X,Q)=>{let $=typeof X==="string"?X.length:0;return $W(`JSON.parse(${$} chars)`,()=>JSON.parse(X,Q))};var CU=k1(()=>{return H9(process.env.DEBUG)||H9(process.env.DEBUG_SDK)||process.argv.includes("--debug")||process.argv.includes("-d")||WW()||process.argv.some((X)=>X.startsWith("--debug="))||JW()!==null}),kU=k1(()=>{let X=process.argv.find(($)=>$.startsWith("--debug="));if(!X)return null;let Q=X.substring(8);return i7(Q)}),WW=k1(()=>{return process.argv.includes("--debug-to-stderr")||process.argv.includes("-d2e")}),JW=k1(()=>{for(let X=0;X<process.argv.length;X++){let Q=process.argv[X];if(Q.startsWith("--debug-file="))return Q.substring(13);if(Q==="--debug-file"&&X+1<process.argv.length)return process.argv[X+1]}return null});function vU(X){if(typeof process>"u"||typeof process.versions>"u"||typeof process.versions.node>"u")return!1;let Q=kU();return n7(X,Q)}var TU=!1;var q4=null;function _U(){if(!q4)q4=e7({writeFn:(X)=>{let Q=GW();if(!n0().existsSync(z9(Q)))n0().mkdirSync(z9(Q));n0().appendFileSync(Q,X),xU()},flushIntervalMs:1000,maxBufferSize:100,immediateMode:CU()}),QW(async()=>q4?.dispose());return q4}function v1(X,{level:Q}={level:"debug"}){if(!vU(X))return;if(TU&&X.includes(`
 `))X=Z0(X);let Y=`${new Date().toISOString()} [${Q.toUpperCase()}] ${X.trim()}
 `;if(WW()){d7(Y);return}_U().write(Y)}function GW(){return JW()??process.env.CLAUDE_CODE_DEBUG_LOGS_DIR??YW(V4(),"debug",`${s7()}.txt`)}var xU=k1(()=>{if(process.argv[2]==="--ripgrep")return;try{let X=GW(),Q=z9(X),$=YW(Q,"latest");if(!n0().existsSync(Q))n0().mkdirSync(Q);if(n0().existsSync($))try{n0().unlinkSync($)}catch{}n0().symlinkSync(X,$)}catch{}});var lU=!1;function F0(X,Q){let $=performance.now();try{return Q()}finally{performance.now()-$>B9}}var mU={cwd(){return process.cwd()},existsSync(X){return F0(`existsSync(${X})`,()=>h.existsSync(X))},async stat(X){return yU(X)},async readdir(X){return gU(X,{withFileTypes:!0})},async unlink(X){return fU(X)},async rmdir(X){return hU(X)},async rm(X,Q){return uU(X,Q)},statSync(X){return F0(`statSync(${X})`,()=>h.statSync(X))},lstatSync(X){return F0(`lstatSync(${X})`,()=>h.lstatSync(X))},readFileSync(X,Q){return F0(`readFileSync(${X})`,()=>h.readFileSync(X,{encoding:Q.encoding}))},readFileBytesSync(X){return F0(`readFileBytesSync(${X})`,()=>h.readFileSync(X))},readSync(X,Q){return F0(`readSync(${X}, ${Q.length} bytes)`,()=>{let $=void 0;try{$=h.openSync(X,"r");let Y=Buffer.alloc(Q.length),W=h.readSync($,Y,0,Q.length,0);return{buffer:Y,bytesRead:W}}finally{if($)h.closeSync($)}})},appendFileSync(X,Q,$){return F0(`appendFileSync(${X}, ${Q.length} chars)`,()=>{if(!h.existsSync(X)&&$?.mode!==void 0){let Y=h.openSync(X,"a",$.mode);try{h.appendFileSync(Y,Q)}finally{h.closeSync(Y)}}else h.appendFileSync(X,Q)})},copyFileSync(X,Q){return F0(`copyFileSync(${X}  ${Q})`,()=>h.copyFileSync(X,Q))},unlinkSync(X){return F0(`unlinkSync(${X})`,()=>h.unlinkSync(X))},renameSync(X,Q){return F0(`renameSync(${X}  ${Q})`,()=>h.renameSync(X,Q))},linkSync(X,Q){return F0(`linkSync(${X}  ${Q})`,()=>h.linkSync(X,Q))},symlinkSync(X,Q){return F0(`symlinkSync(${X}  ${Q})`,()=>h.symlinkSync(X,Q))},readlinkSync(X){return F0(`readlinkSync(${X})`,()=>h.readlinkSync(X))},realpathSync(X){return F0(`realpathSync(${X})`,()=>h.realpathSync(X))},mkdirSync(X,Q){return F0(`mkdirSync(${X})`,()=>{if(!h.existsSync(X)){let $={recursive:!0};if(Q?.mode!==void 0)$.mode=Q.mode;h.mkdirSync(X,$)}})},readdirSync(X){return F0(`readdirSync(${X})`,()=>h.readdirSync(X,{withFileTypes:!0}))},readdirStringSync(X){return F0(`readdirStringSync(${X})`,()=>h.readdirSync(X))},isDirEmptySync(X){return F0(`isDirEmptySync(${X})`,()=>{return this.readdirSync(X).length===0})},rmdirSync(X){return F0(`rmdirSync(${X})`,()=>h.rmdirSync(X))},rmSync(X,Q){return F0(`rmSync(${X})`,()=>h.rmSync(X,Q))},createWriteStream(X){return h.createWriteStream(X)}},cU=mU;function n0(){return cU}var pU=["PreToolUse","PostToolUse","PostToolUseFailure","Notification","UserPromptSubmit","SessionStart","SessionEnd","Stop","SubagentStart","SubagentStop","PreCompact","PermissionRequest","Setup"],dU=["clear","logout","prompt_input_exit","other","bypass_permissions_disabled"];class F1 extends Error{}function j6(){return process.versions.bun!==void 0}import{randomUUID as iU}from"crypto";import{appendFileSync as nU,existsSync as rU,mkdirSync as oU}from"fs";import{join as HW}from"path";var F4=null,BW=!1;function tU(){if(BW)return F4;if(BW=!0,!process.env.DEBUG_CLAUDE_AGENT_SDK)return null;let X=HW(V4(),"debug");if(F4=HW(X,`sdk-${iU()}.txt`),!rU(X))oU(X,{recursive:!0});return process.stderr.write(`SDK debug logs: ${F4}
 `),F4}function N1(X){let Q=tU();if(!Q)return;let Y=`${new Date().toISOString()} ${X}
-`;nU(Q,Y)}function zW(X,Q){let $={...X};if(Q){let Y={sandbox:Q};if($.settings)try{Y={...L4($.settings),sandbox:Q}}catch{}$.settings=Z0(Y)}return $}class XX{options;process;processStdin;processStdout;ready=!1;abortController;exitError;exitListeners=[];processExitHandler;abortHandler;constructor(X){this.options=X;this.abortController=X.abortController||N6(),this.initialize()}getDefaultExecutable(){return j6()?"bun":"node"}spawnLocalProcess(X){let{command:Q,args:$,cwd:Y,env:W,signal:J}=X,G=W.DEBUG_CLAUDE_AGENT_SDK||this.options.stderr?"pipe":"ignore",H=aU(Q,$,{cwd:Y,stdio:["pipe","pipe",G],signal:J,env:W,windowsHide:!0});if(W.DEBUG_CLAUDE_AGENT_SDK||this.options.stderr)H.stderr.on("data",(z)=>{let K=z.toString();if(N1(K),this.options.stderr)this.options.stderr(K)});return{stdin:H.stdin,stdout:H.stdout,get killed(){return H.killed},get exitCode(){return H.exitCode},kill:H.kill.bind(H),on:H.on.bind(H),once:H.once.bind(H),off:H.off.bind(H)}}initialize(){try{let{additionalDirectories:X=[],agent:Q,betas:$,cwd:Y,executable:W=this.getDefaultExecutable(),executableArgs:J=[],extraArgs:G={},pathToClaudeCodeExecutable:H,env:B={...process.env},maxThinkingTokens:z,maxTurns:K,maxBudgetUsd:V,model:L,fallbackModel:U,jsonSchema:F,permissionMode:q,allowDangerouslySkipPermissions:N,permissionPromptToolName:A,continueConversation:M,resume:R,settingSources:S,allowedTools:C=[],disallowedTools:K0=[],tools:U0,mcpServers:s,strictMcpConfig:D0,canUseTool:q0,includePartialMessages:W1,plugins:P1,sandbox:U6}=this.options,d=["--output-format","stream-json","--verbose","--input-format","stream-json"];if(z!==void 0)d.push("--max-thinking-tokens",z.toString());if(K)d.push("--max-turns",K.toString());if(V!==void 0)d.push("--max-budget-usd",V.toString());if(L)d.push("--model",L);if(Q)d.push("--agent",Q);if($&&$.length>0)d.push("--betas",$.join(","));if(F)d.push("--json-schema",Z0(F));if(B.DEBUG_CLAUDE_AGENT_SDK)d.push("--debug-to-stderr");if(q0){if(A)throw Error("canUseTool callback cannot be used with permissionPromptToolName. Please use one or the other.");d.push("--permission-prompt-tool","stdio")}else if(A)d.push("--permission-prompt-tool",A);if(M)d.push("--continue");if(R)d.push("--resume",R);if(C.length>0)d.push("--allowedTools",C.join(","));if(K0.length>0)d.push("--disallowedTools",K0.join(","));if(U0!==void 0)if(Array.isArray(U0))if(U0.length===0)d.push("--tools","");else d.push("--tools",U0.join(","));else d.push("--tools","default");if(s&&Object.keys(s).length>0)d.push("--mcp-config",Z0({mcpServers:s}));if(S)d.push("--setting-sources",S.join(","));if(D0)d.push("--strict-mcp-config");if(q)d.push("--permission-mode",q);if(N)d.push("--allow-dangerously-skip-permissions");if(U){if(L&&U===L)throw Error("Fallback model cannot be the same as the main model. Please specify a different model for fallbackModel option.");d.push("--fallback-model",U)}if(W1)d.push("--include-partial-messages");for(let S0 of X)d.push("--add-dir",S0);if(P1&&P1.length>0)for(let S0 of P1)if(S0.type==="local")d.push("--plugin-dir",S0.path);else throw Error(`Unsupported plugin type: ${S0.type}`);if(this.options.forkSession)d.push("--fork-session");if(this.options.resumeSessionAt)d.push("--resume-session-at",this.options.resumeSessionAt);if(this.options.persistSession===!1)d.push("--no-session-persistence");let Q9=zW(G??{},U6);for(let[S0,S1]of Object.entries(Q9))if(S1===null)d.push(`--${S0}`);else d.push(`--${S0}`,S1);if(!B.CLAUDE_CODE_ENTRYPOINT)B.CLAUDE_CODE_ENTRYPOINT="sdk-ts";if(delete B.NODE_OPTIONS,B.DEBUG_CLAUDE_AGENT_SDK)B.DEBUG="1";else delete B.DEBUG;let o6=eU(H),V6=o6?H:W,t6=o6?[...J,...d]:[...J,H,...d],a6={command:V6,args:t6,cwd:Y,env:B,signal:this.abortController.signal};if(this.options.spawnClaudeCodeProcess)N1(`Spawning Claude Code (custom): ${V6} ${t6.join(" ")}`),this.process=this.options.spawnClaudeCodeProcess(a6);else{if(!n0().existsSync(H)){let S1=o6?`Claude Code native binary not found at ${H}. Please ensure Claude Code is installed via native installer or specify a valid path with options.pathToClaudeCodeExecutable.`:`Claude Code executable not found at ${H}. Is options.pathToClaudeCodeExecutable set?`;throw ReferenceError(S1)}N1(`Spawning Claude Code: ${V6} ${t6.join(" ")}`),this.process=this.spawnLocalProcess(a6)}this.processStdin=this.process.stdin,this.processStdout=this.process.stdout;let B4=()=>{if(this.process&&!this.process.killed)this.process.kill("SIGTERM")};this.processExitHandler=B4,this.abortHandler=B4,process.on("exit",this.processExitHandler),this.abortController.signal.addEventListener("abort",this.abortHandler),this.process.on("error",(S0)=>{if(this.ready=!1,this.abortController.signal.aborted)this.exitError=new F1("Claude Code process aborted by user");else this.exitError=Error(`Failed to spawn Claude Code process: ${S0.message}`),N1(this.exitError.message)}),this.process.on("exit",(S0,S1)=>{if(this.ready=!1,this.abortController.signal.aborted)this.exitError=new F1("Claude Code process aborted by user");else{let s6=this.getProcessExitError(S0,S1);if(s6)this.exitError=s6,N1(s6.message)}}),this.ready=!0}catch(X){throw this.ready=!1,X}}getProcessExitError(X,Q){if(X!==0&&X!==null)return Error(`Claude Code process exited with code ${X}`);else if(Q)return Error(`Claude Code process terminated by signal ${Q}`);return}write(X){if(this.abortController.signal.aborted)throw new F1("Operation aborted");if(!this.ready||!this.processStdin)throw Error("ProcessTransport is not ready for writing");if(this.process?.killed||this.process?.exitCode!==null)throw Error("Cannot write to terminated process");if(this.exitError)throw Error(`Cannot write to process that exited with error: ${this.exitError.message}`);N1(`[ProcessTransport] Writing to stdin: ${X.substring(0,100)}`);try{if(!this.processStdin.write(X))N1("[ProcessTransport] Write buffer full, data queued")}catch(Q){throw this.ready=!1,Error(`Failed to write to process stdin: ${Q.message}`)}}close(){if(this.processStdin)this.processStdin.end(),this.processStdin=void 0;if(this.abortHandler)this.abortController.signal.removeEventListener("abort",this.abortHandler),this.abortHandler=void 0;for(let{handler:X}of this.exitListeners)this.process?.off("exit",X);if(this.exitListeners=[],this.process&&!this.process.killed)this.process.kill("SIGTERM"),setTimeout(()=>{if(this.process&&!this.process.killed)this.process.kill("SIGKILL")},5000);if(this.ready=!1,this.processExitHandler)process.off("exit",this.processExitHandler),this.processExitHandler=void 0}isReady(){return this.ready}async*readMessages(){if(!this.processStdout)throw Error("ProcessTransport output stream not available");let X=sU({input:this.processStdout});try{for await(let Q of X)if(Q.trim())try{yield L4(Q)}catch($){throw N1(`Non-JSON stdout: ${Q}`),Error(`CLI output was not valid JSON. This may indicate an error during startup. Output: ${Q.slice(0,200)}${Q.length>200?"...":""}`)}await this.waitForExit()}catch(Q){throw Q}finally{X.close()}}endInput(){if(this.processStdin)this.processStdin.end()}getInputStream(){return this.processStdin}onExit(X){if(!this.process)return()=>{};let Q=($,Y)=>{let W=this.getProcessExitError($,Y);X(W)};return this.process.on("exit",Q),this.exitListeners.push({callback:X,handler:Q}),()=>{if(this.process)this.process.off("exit",Q);let $=this.exitListeners.findIndex((Y)=>Y.handler===Q);if($!==-1)this.exitListeners.splice($,1)}}async waitForExit(){if(!this.process){if(this.exitError)throw this.exitError;return}if(this.process.exitCode!==null||this.process.killed){if(this.exitError)throw this.exitError;return}return new Promise((X,Q)=>{let $=(W,J)=>{if(this.abortController.signal.aborted){Q(new F1("Operation aborted"));return}let G=this.getProcessExitError(W,J);if(G)Q(G);else X()};this.process.once("exit",$);let Y=(W)=>{this.process.off("exit",$),Q(W)};this.process.once("error",Y),this.process.once("exit",()=>{this.process.off("error",Y)})})}}function eU(X){return![".js",".mjs",".tsx",".ts",".jsx"].some(($)=>X.endsWith($))}class QX{returned;queue=[];readResolve;readReject;isDone=!1;hasError;started=!1;constructor(X){this.returned=X}[Symbol.asyncIterator](){if(this.started)throw Error("Stream can only be iterated once");return this.started=!0,this}next(){if(this.queue.length>0)return Promise.resolve({done:!1,value:this.queue.shift()});if(this.isDone)return Promise.resolve({done:!0,value:void 0});if(this.hasError)return Promise.reject(this.hasError);return new Promise((X,Q)=>{this.readResolve=X,this.readReject=Q})}enqueue(X){if(this.readResolve){let Q=this.readResolve;this.readResolve=void 0,this.readReject=void 0,Q({done:!1,value:X})}else this.queue.push(X)}done(){if(this.isDone=!0,this.readResolve){let X=this.readResolve;this.readResolve=void 0,this.readReject=void 0,X({done:!0,value:void 0})}}error(X){if(this.hasError=X,this.readReject){let Q=this.readReject;this.readResolve=void 0,this.readReject=void 0,Q(X)}}return(){if(this.isDone=!0,this.returned)this.returned();return Promise.resolve({done:!0,value:void 0})}}class K9{sendMcpMessage;isClosed=!1;constructor(X){this.sendMcpMessage=X}onclose;onerror;onmessage;async start(){}async send(X){if(this.isClosed)throw Error("Transport is closed");this.sendMcpMessage(X)}async close(){if(this.isClosed)return;this.isClosed=!0,this.onclose?.()}}import{randomUUID as XV}from"crypto";class $X{transport;isSingleUserTurn;canUseTool;hooks;abortController;jsonSchema;initConfig;pendingControlResponses=new Map;cleanupPerformed=!1;sdkMessages;inputStream=new QX;initialization;cancelControllers=new Map;hookCallbacks=new Map;nextCallbackId=0;sdkMcpTransports=new Map;sdkMcpServerInstances=new Map;pendingMcpResponses=new Map;firstResultReceivedResolve;firstResultReceived=!1;hasBidirectionalNeeds(){return this.sdkMcpTransports.size>0||this.hooks!==void 0&&Object.keys(this.hooks).length>0||this.canUseTool!==void 0}constructor(X,Q,$,Y,W,J=new Map,G,H){this.transport=X;this.isSingleUserTurn=Q;this.canUseTool=$;this.hooks=Y;this.abortController=W;this.jsonSchema=G;this.initConfig=H;for(let[B,z]of J)this.connectSdkMcpServer(B,z);this.sdkMessages=this.readSdkMessages(),this.readMessages(),this.initialization=this.initialize(),this.initialization.catch(()=>{})}setError(X){this.inputStream.error(X)}close(){this.cleanup()}cleanup(X){if(this.cleanupPerformed)return;this.cleanupPerformed=!0;try{this.transport.close(),this.pendingControlResponses.clear(),this.pendingMcpResponses.clear(),this.cancelControllers.clear(),this.hookCallbacks.clear();for(let Q of this.sdkMcpTransports.values())try{Q.close()}catch{}if(this.sdkMcpTransports.clear(),X)this.inputStream.error(X);else this.inputStream.done()}catch(Q){}}next(...[X]){return this.sdkMessages.next(...[X])}return(X){return this.sdkMessages.return(X)}throw(X){return this.sdkMessages.throw(X)}[Symbol.asyncIterator](){return this.sdkMessages}[Symbol.asyncDispose](){return this.sdkMessages[Symbol.asyncDispose]()}async readMessages(){try{for await(let X of this.transport.readMessages()){if(X.type==="control_response"){let Q=this.pendingControlResponses.get(X.response.request_id);if(Q)Q(X.response);continue}else if(X.type==="control_request"){this.handleControlRequest(X);continue}else if(X.type==="control_cancel_request"){this.handleControlCancelRequest(X);continue}else if(X.type==="keep_alive")continue;if(X.type==="result"){if(this.firstResultReceived=!0,this.firstResultReceivedResolve)this.firstResultReceivedResolve();if(this.isSingleUserTurn)v1("[Query.readMessages] First result received for single-turn query, closing stdin"),this.transport.endInput()}this.inputStream.enqueue(X)}if(this.firstResultReceivedResolve)this.firstResultReceivedResolve();this.inputStream.done(),this.cleanup()}catch(X){if(this.firstResultReceivedResolve)this.firstResultReceivedResolve();this.inputStream.error(X),this.cleanup(X)}}async handleControlRequest(X){let Q=new AbortController;this.cancelControllers.set(X.request_id,Q);try{let $=await this.processControlRequest(X,Q.signal),Y={type:"control_response",response:{subtype:"success",request_id:X.request_id,response:$}};await Promise.resolve(this.transport.write(Z0(Y)+`
+`;nU(Q,Y)}function zW(X,Q){let $={...X};if(Q){let Y={sandbox:Q};if($.settings)try{Y={...L4($.settings),sandbox:Q}}catch{}$.settings=Z0(Y)}return $}class XX{options;process;processStdin;processStdout;ready=!1;abortController;exitError;exitListeners=[];processExitHandler;abortHandler;constructor(X){this.options=X;this.abortController=X.abortController||N6(),this.initialize()}getDefaultExecutable(){return j6()?"bun":"node"}spawnLocalProcess(X){let{args:$,cwd:Y,env:W,signal:J}=X,G=W.DEBUG_CLAUDE_AGENT_SDK||this.options.stderr?"pipe":"ignore",H=aU($[0],$.slice(1),{cwd:Y,stdio:G==="pipe"?["pipe","pipe","pipe","ipc"]:["pipe","pipe","ignore","ipc"],signal:J,env:W});if(W.DEBUG_CLAUDE_AGENT_SDK||this.options.stderr)H.stderr.on("data",(z)=>{let K=z.toString();if(N1(K),this.options.stderr)this.options.stderr(K)});return{stdin:H.stdin,stdout:H.stdout,get killed(){return H.killed},get exitCode(){return H.exitCode},kill:H.kill.bind(H),on:H.on.bind(H),once:H.once.bind(H),off:H.off.bind(H)}}initialize(){try{let{additionalDirectories:X=[],agent:Q,betas:$,cwd:Y,executable:W=this.getDefaultExecutable(),executableArgs:J=[],extraArgs:G={},pathToClaudeCodeExecutable:H,env:B={...process.env},maxThinkingTokens:z,maxTurns:K,maxBudgetUsd:V,model:L,fallbackModel:U,jsonSchema:F,permissionMode:q,allowDangerouslySkipPermissions:N,permissionPromptToolName:A,continueConversation:M,resume:R,settingSources:S,allowedTools:C=[],disallowedTools:K0=[],tools:U0,mcpServers:s,strictMcpConfig:D0,canUseTool:q0,includePartialMessages:W1,plugins:P1,sandbox:U6}=this.options,d=["--output-format","stream-json","--verbose","--input-format","stream-json"];if(z!==void 0)d.push("--max-thinking-tokens",z.toString());if(K)d.push("--max-turns",K.toString());if(V!==void 0)d.push("--max-budget-usd",V.toString());if(L)d.push("--model",L);if(Q)d.push("--agent",Q);if($&&$.length>0)d.push("--betas",$.join(","));if(F)d.push("--json-schema",Z0(F));if(B.DEBUG_CLAUDE_AGENT_SDK)d.push("--debug-to-stderr");if(q0){if(A)throw Error("canUseTool callback cannot be used with permissionPromptToolName. Please use one or the other.");d.push("--permission-prompt-tool","stdio")}else if(A)d.push("--permission-prompt-tool",A);if(M)d.push("--continue");if(R)d.push("--resume",R);if(C.length>0)d.push("--allowedTools",C.join(","));if(K0.length>0)d.push("--disallowedTools",K0.join(","));if(U0!==void 0)if(Array.isArray(U0))if(U0.length===0)d.push("--tools","");else d.push("--tools",U0.join(","));else d.push("--tools","default");if(s&&Object.keys(s).length>0)d.push("--mcp-config",Z0({mcpServers:s}));if(S)d.push("--setting-sources",S.join(","));if(D0)d.push("--strict-mcp-config");if(q)d.push("--permission-mode",q);if(N)d.push("--allow-dangerously-skip-permissions");if(U){if(L&&U===L)throw Error("Fallback model cannot be the same as the main model. Please specify a different model for fallbackModel option.");d.push("--fallback-model",U)}if(W1)d.push("--include-partial-messages");for(let S0 of X)d.push("--add-dir",S0);if(P1&&P1.length>0)for(let S0 of P1)if(S0.type==="local")d.push("--plugin-dir",S0.path);else throw Error(`Unsupported plugin type: ${S0.type}`);if(this.options.forkSession)d.push("--fork-session");if(this.options.resumeSessionAt)d.push("--resume-session-at",this.options.resumeSessionAt);if(this.options.persistSession===!1)d.push("--no-session-persistence");let Q9=zW(G??{},U6);for(let[S0,S1]of Object.entries(Q9))if(S1===null)d.push(`--${S0}`);else d.push(`--${S0}`,S1);if(!B.CLAUDE_CODE_ENTRYPOINT)B.CLAUDE_CODE_ENTRYPOINT="sdk-ts";if(delete B.NODE_OPTIONS,B.DEBUG_CLAUDE_AGENT_SDK)B.DEBUG="1";else delete B.DEBUG;let o6=eU(H),V6=o6?H:W,t6=o6?[...J,...d]:[...J,H,...d],a6={command:V6,args:t6,cwd:Y,env:B,signal:this.abortController.signal};if(this.options.spawnClaudeCodeProcess)N1(`Spawning Claude Code (custom): ${V6} ${t6.join(" ")}`),this.process=this.options.spawnClaudeCodeProcess(a6);else{if(!n0().existsSync(H)){let S1=o6?`Claude Code native binary not found at ${H}. Please ensure Claude Code is installed via native installer or specify a valid path with options.pathToClaudeCodeExecutable.`:`Claude Code executable not found at ${H}. Is options.pathToClaudeCodeExecutable set?`;throw ReferenceError(S1)}N1(`Spawning Claude Code: ${V6} ${t6.join(" ")}`),this.process=this.spawnLocalProcess(a6)}this.processStdin=this.process.stdin,this.processStdout=this.process.stdout;let B4=()=>{if(this.process&&!this.process.killed)this.process.kill("SIGTERM")};this.processExitHandler=B4,this.abortHandler=B4,process.on("exit",this.processExitHandler),this.abortController.signal.addEventListener("abort",this.abortHandler),this.process.on("error",(S0)=>{if(this.ready=!1,this.abortController.signal.aborted)this.exitError=new F1("Claude Code process aborted by user");else this.exitError=Error(`Failed to spawn Claude Code process: ${S0.message}`),N1(this.exitError.message)}),this.process.on("exit",(S0,S1)=>{if(this.ready=!1,this.abortController.signal.aborted)this.exitError=new F1("Claude Code process aborted by user");else{let s6=this.getProcessExitError(S0,S1);if(s6)this.exitError=s6,N1(s6.message)}}),this.ready=!0}catch(X){throw this.ready=!1,X}}getProcessExitError(X,Q){if(X!==0&&X!==null)return Error(`Claude Code process exited with code ${X}`);else if(Q)return Error(`Claude Code process terminated by signal ${Q}`);return}write(X){if(this.abortController.signal.aborted)throw new F1("Operation aborted");if(!this.ready||!this.processStdin)throw Error("ProcessTransport is not ready for writing");if(this.process?.killed||this.process?.exitCode!==null)throw Error("Cannot write to terminated process");if(this.exitError)throw Error(`Cannot write to process that exited with error: ${this.exitError.message}`);N1(`[ProcessTransport] Writing to stdin: ${X.substring(0,100)}`);try{if(!this.processStdin.write(X))N1("[ProcessTransport] Write buffer full, data queued")}catch(Q){throw this.ready=!1,Error(`Failed to write to process stdin: ${Q.message}`)}}close(){if(this.processStdin)this.processStdin.end(),this.processStdin=void 0;if(this.abortHandler)this.abortController.signal.removeEventListener("abort",this.abortHandler),this.abortHandler=void 0;for(let{handler:X}of this.exitListeners)this.process?.off("exit",X);if(this.exitListeners=[],this.process&&!this.process.killed)this.process.kill("SIGTERM"),setTimeout(()=>{if(this.process&&!this.process.killed)this.process.kill("SIGKILL")},5000);if(this.ready=!1,this.processExitHandler)process.off("exit",this.processExitHandler),this.processExitHandler=void 0}isReady(){return this.ready}async*readMessages(){if(!this.processStdout)throw Error("ProcessTransport output stream not available");let X=sU({input:this.processStdout});try{for await(let Q of X)if(Q.trim())try{yield L4(Q)}catch($){throw N1(`Non-JSON stdout: ${Q}`),Error(`CLI output was not valid JSON. This may indicate an error during startup. Output: ${Q.slice(0,200)}${Q.length>200?"...":""}`)}await this.waitForExit()}catch(Q){throw Q}finally{X.close()}}endInput(){if(this.processStdin)this.processStdin.end()}getInputStream(){return this.processStdin}onExit(X){if(!this.process)return()=>{};let Q=($,Y)=>{let W=this.getProcessExitError($,Y);X(W)};return this.process.on("exit",Q),this.exitListeners.push({callback:X,handler:Q}),()=>{if(this.process)this.process.off("exit",Q);let $=this.exitListeners.findIndex((Y)=>Y.handler===Q);if($!==-1)this.exitListeners.splice($,1)}}async waitForExit(){if(!this.process){if(this.exitError)throw this.exitError;return}if(this.process.exitCode!==null||this.process.killed){if(this.exitError)throw this.exitError;return}return new Promise((X,Q)=>{let $=(W,J)=>{if(this.abortController.signal.aborted){Q(new F1("Operation aborted"));return}let G=this.getProcessExitError(W,J);if(G)Q(G);else X()};this.process.once("exit",$);let Y=(W)=>{this.process.off("exit",$),Q(W)};this.process.once("error",Y),this.process.once("exit",()=>{this.process.off("error",Y)})})}}function eU(X){return![".js",".mjs",".tsx",".ts",".jsx"].some(($)=>X.endsWith($))}class QX{returned;queue=[];readResolve;readReject;isDone=!1;hasError;started=!1;constructor(X){this.returned=X}[Symbol.asyncIterator](){if(this.started)throw Error("Stream can only be iterated once");return this.started=!0,this}next(){if(this.queue.length>0)return Promise.resolve({done:!1,value:this.queue.shift()});if(this.isDone)return Promise.resolve({done:!0,value:void 0});if(this.hasError)return Promise.reject(this.hasError);return new Promise((X,Q)=>{this.readResolve=X,this.readReject=Q})}enqueue(X){if(this.readResolve){let Q=this.readResolve;this.readResolve=void 0,this.readReject=void 0,Q({done:!1,value:X})}else this.queue.push(X)}done(){if(this.isDone=!0,this.readResolve){let X=this.readResolve;this.readResolve=void 0,this.readReject=void 0,X({done:!0,value:void 0})}}error(X){if(this.hasError=X,this.readReject){let Q=this.readReject;this.readResolve=void 0,this.readReject=void 0,Q(X)}}return(){if(this.isDone=!0,this.returned)this.returned();return Promise.resolve({done:!0,value:void 0})}}class K9{sendMcpMessage;isClosed=!1;constructor(X){this.sendMcpMessage=X}onclose;onerror;onmessage;async start(){}async send(X){if(this.isClosed)throw Error("Transport is closed");this.sendMcpMessage(X)}async close(){if(this.isClosed)return;this.isClosed=!0,this.onclose?.()}}import{randomUUID as XV}from"crypto";class $X{transport;isSingleUserTurn;canUseTool;hooks;abortController;jsonSchema;initConfig;pendingControlResponses=new Map;cleanupPerformed=!1;sdkMessages;inputStream=new QX;initialization;cancelControllers=new Map;hookCallbacks=new Map;nextCallbackId=0;sdkMcpTransports=new Map;sdkMcpServerInstances=new Map;pendingMcpResponses=new Map;firstResultReceivedResolve;firstResultReceived=!1;hasBidirectionalNeeds(){return this.sdkMcpTransports.size>0||this.hooks!==void 0&&Object.keys(this.hooks).length>0||this.canUseTool!==void 0}constructor(X,Q,$,Y,W,J=new Map,G,H){this.transport=X;this.isSingleUserTurn=Q;this.canUseTool=$;this.hooks=Y;this.abortController=W;this.jsonSchema=G;this.initConfig=H;for(let[B,z]of J)this.connectSdkMcpServer(B,z);this.sdkMessages=this.readSdkMessages(),this.readMessages(),this.initialization=this.initialize(),this.initialization.catch(()=>{})}setError(X){this.inputStream.error(X)}close(){this.cleanup()}cleanup(X){if(this.cleanupPerformed)return;this.cleanupPerformed=!0;try{this.transport.close(),this.pendingControlResponses.clear(),this.pendingMcpResponses.clear(),this.cancelControllers.clear(),this.hookCallbacks.clear();for(let Q of this.sdkMcpTransports.values())try{Q.close()}catch{}if(this.sdkMcpTransports.clear(),X)this.inputStream.error(X);else this.inputStream.done()}catch(Q){}}next(...[X]){return this.sdkMessages.next(...[X])}return(X){return this.sdkMessages.return(X)}throw(X){return this.sdkMessages.throw(X)}[Symbol.asyncIterator](){return this.sdkMessages}[Symbol.asyncDispose](){return this.sdkMessages[Symbol.asyncDispose]()}async readMessages(){try{for await(let X of this.transport.readMessages()){if(X.type==="control_response"){let Q=this.pendingControlResponses.get(X.response.request_id);if(Q)Q(X.response);continue}else if(X.type==="control_request"){this.handleControlRequest(X);continue}else if(X.type==="control_cancel_request"){this.handleControlCancelRequest(X);continue}else if(X.type==="keep_alive")continue;if(X.type==="result"){if(this.firstResultReceived=!0,this.firstResultReceivedResolve)this.firstResultReceivedResolve();if(this.isSingleUserTurn)v1("[Query.readMessages] First result received for single-turn query, closing stdin"),this.transport.endInput()}this.inputStream.enqueue(X)}if(this.firstResultReceivedResolve)this.firstResultReceivedResolve();this.inputStream.done(),this.cleanup()}catch(X){if(this.firstResultReceivedResolve)this.firstResultReceivedResolve();this.inputStream.error(X),this.cleanup(X)}}async handleControlRequest(X){let Q=new AbortController;this.cancelControllers.set(X.request_id,Q);try{let $=await this.processControlRequest(X,Q.signal),Y={type:"control_response",response:{subtype:"success",request_id:X.request_id,response:$}};await Promise.resolve(this.transport.write(Z0(Y)+`
 `))}catch($){let Y={type:"control_response",response:{subtype:"error",request_id:X.request_id,error:$.message||String($)}};await Promise.resolve(this.transport.write(Z0(Y)+`
 `))}finally{this.cancelControllers.delete(X.request_id)}}handleControlCancelRequest(X){let Q=this.cancelControllers.get(X.request_id);if(Q)Q.abort(),this.cancelControllers.delete(X.request_id)}async processControlRequest(X,Q){if(X.request.subtype==="can_use_tool"){if(!this.canUseTool)throw Error("canUseTool callback is not provided.");return{...await this.canUseTool(X.request.tool_name,X.request.input,{signal:Q,suggestions:X.request.permission_suggestions,blockedPath:X.request.blocked_path,decisionReason:X.request.decision_reason,toolUseID:X.request.tool_use_id,agentID:X.request.agent_id}),toolUseID:X.request.tool_use_id}}else if(X.request.subtype==="hook_callback")return await this.handleHookCallbacks(X.request.callback_id,X.request.input,X.request.tool_use_id,Q);else if(X.request.subtype==="mcp_message"){let $=X.request,Y=this.sdkMcpTransports.get($.server_name);if(!Y)throw Error(`SDK MCP server not found: ${$.server_name}`);if("method"in $.message&&"id"in $.message&&$.message.id!==null)return{mcp_response:await this.handleMcpControlRequest($.server_name,$,Y)};else{if(Y.onmessage)Y.onmessage($.message);return{mcp_response:{jsonrpc:"2.0",result:{},id:0}}}}throw Error("Unsupported control request subtype: "+X.request.subtype)}async*readSdkMessages(){for await(let X of this.inputStream)yield X}async initialize(){let X;if(this.hooks){X={};for(let[W,J]of Object.entries(this.hooks))if(J.length>0)X[W]=J.map((G)=>{let H=[];for(let B of G.hooks){let z=`hook_${this.nextCallbackId++}`;this.hookCallbacks.set(z,B),H.push(z)}return{matcher:G.matcher,hookCallbackIds:H,timeout:G.timeout}})}let Q=this.sdkMcpTransports.size>0?Array.from(this.sdkMcpTransports.keys()):void 0,$={subtype:"initialize",hooks:X,sdkMcpServers:Q,jsonSchema:this.jsonSchema,systemPrompt:this.initConfig?.systemPrompt,appendSystemPrompt:this.initConfig?.appendSystemPrompt,agents:this.initConfig?.agents};return(await this.request($)).response}async interrupt(){await this.request({subtype:"interrupt"})}async setPermissionMode(X){await this.request({subtype:"set_permission_mode",mode:X})}async setModel(X){await this.request({subtype:"set_model",model:X})}async setMaxThinkingTokens(X){await this.request({subtype:"set_max_thinking_tokens",max_thinking_tokens:X})}async rewindFiles(X,Q){return(await this.request({subtype:"rewind_files",user_message_id:X,dry_run:Q?.dryRun})).response}async processPendingPermissionRequests(X){for(let Q of X)if(Q.request.subtype==="can_use_tool")this.handleControlRequest(Q).catch(()=>{})}request(X){let Q=Math.random().toString(36).substring(2,15),$={request_id:Q,type:"control_request",request:X};return new Promise((Y,W)=>{this.pendingControlResponses.set(Q,(J)=>{if(J.subtype==="success")Y(J);else if(W(Error(J.error)),J.pending_permission_requests)this.processPendingPermissionRequests(J.pending_permission_requests)}),Promise.resolve(this.transport.write(Z0($)+`
 `))})}async supportedCommands(){return(await this.initialization).commands}async supportedModels(){return(await this.initialization).models}async reconnectMcpServer(X){await this.request({subtype:"mcp_reconnect",serverName:X})}async toggleMcpServer(X,Q){await this.request({subtype:"mcp_toggle",serverName:X,enabled:Q})}async mcpServerStatus(){return(await this.request({subtype:"mcp_status"})).response.mcpServers}async setMcpServers(X){let Q={},$={};for(let[H,B]of Object.entries(X))if(B.type==="sdk"&&"instance"in B)Q[H]=B.instance;else $[H]=B;let Y=new Set(this.sdkMcpServerInstances.keys()),W=new Set(Object.keys(Q));for(let H of Y)if(!W.has(H))await this.disconnectSdkMcpServer(H);for(let[H,B]of Object.entries(Q))if(!Y.has(H))this.connectSdkMcpServer(H,B);let J={};for(let H of Object.keys(Q))J[H]={type:"sdk",name:H};return(await this.request({subtype:"mcp_set_servers",servers:{...$,...J}})).response}async accountInfo(){return(await this.initialization).account}async streamInput(X){v1("[Query.streamInput] Starting to process input stream");try{let Q=0;for await(let $ of X){if(Q++,v1(`[Query.streamInput] Processing message ${Q}: ${$.type}`),this.abortController?.signal.aborted)break;await Promise.resolve(this.transport.write(Z0($)+`
